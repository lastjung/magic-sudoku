import{c as te,a as k,b as q,j as t,d as C,A as ge,m as z,H as Ae,G as oe,L as ie,S as se,R as be,V as Ie,e as Pe,f as de}from"./index-uuoEbfZR.js";import{B as le,R as Re,G as ye}from"./refresh-cw-DbZNdbiG.js";import{Z as ee,P as ce,T as ne,A as we,C as Ne,R as ae,S as $e}from"./zap-BAB-YoM-.js";import{C as Be,S as Ee,X as je}from"./x-CLJPjazh.js";const Oe=[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]],Fe=te("book-open",Oe);const De=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],ke=te("check",De);const Me=[["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M17 20v2",key:"1rnc9c"}],["path",{d:"M17 2v2",key:"11trls"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M2 17h2",key:"7oei6x"}],["path",{d:"M2 7h2",key:"asdhe0"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"M20 17h2",key:"1fpfkl"}],["path",{d:"M20 7h2",key:"1o8tra"}],["path",{d:"M7 20v2",key:"4gnj0m"}],["path",{d:"M7 2v2",key:"1i4yhu"}],["rect",{x:"4",y:"4",width:"16",height:"16",rx:"2",key:"1vbyd7"}],["rect",{x:"8",y:"8",width:"8",height:"8",rx:"1",key:"z9xiuo"}]],Le=te("cpu",Me);const Te=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],ve=te("info",Te);const qe=[["rect",{x:"14",y:"3",width:"5",height:"18",rx:"1",key:"kaeet6"}],["rect",{x:"5",y:"3",width:"5",height:"18",rx:"1",key:"1wsw3u"}]],Ve=te("pause",qe);const Je=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]],Ge=te("target",Je);function He(r,e){r.flatBoard||(r.flatBoard=Array(e*e).fill(null),r.used=Array(e*e+1).fill(!1),r.stack=[],r.filledCount=0,r.firstNumberPositions=[],r.firstPosIdx=-1);const{flatBoard:a,used:s,stack:x}=r,d=e*(e*e+1)/2;if(r.filledCount>=e*e)return{board:Y(a,e),isComplete:!0,desc:"Solution found!"};if(r.firstNumberPositions.length===0){if(e===3)r.firstNumberPositions=[0,1,4];else if(e===4)r.firstNumberPositions=[0,1,5];else for(let l=0;l<e*e;l++)r.firstNumberPositions.push(l);r.firstPosIdx=0}if(r.filledCount===0){const l=r.firstNumberPositions[r.firstPosIdx];return a[l]=1,s[1]=!0,r.filledCount=1,{board:Y(a,e),val:1,highlight:{r:Math.floor(l/e),c:l%e,type:"active"},desc:`Optimal start: 1 at ${l}`}}let n=x[r.filledCount];if(!n){const l=a.map((m,f)=>m===null?f:-1).filter(m=>m!==-1);if(l.length===0)return me(r,e);const p=l.map(m=>{let f=0;const b=Math.floor(m/e),P=m%e,v=[Array.from({length:e},(A,R)=>b*e+R),Array.from({length:e},(A,R)=>R*e+P)];return b===P&&v.push(Array.from({length:e},(A,R)=>R*e+R)),b+P===e-1&&v.push(Array.from({length:e},(A,R)=>R*e+(e-1-R))),v.forEach(A=>{f+=A.reduce((R,V)=>R+(a[V]!==null?1:0),0)}),{idx:m,score:f}}).sort((m,f)=>f.score-m.score)[0].idx;let h=null;const g=Math.floor(p/e),o=p%e,i=[Array.from({length:e},(m,f)=>g*e+f),Array.from({length:e},(m,f)=>f*e+o)];g===o&&i.push(Array.from({length:e},(m,f)=>f*e+f)),g+o===e-1&&i.push(Array.from({length:e},(m,f)=>f*e+(e-1-f)));for(let m of i){const f=m.filter(b=>a[b]!==null);if(f.length===e-1){h=d-f.reduce((b,P)=>b+a[P],0);break}}n={cellIdx:p,triedNum:0,forcedVal:h},x[r.filledCount]=n}let u=null;if(n.forcedVal!==null){if(n.triedNum===0){u=n.forcedVal,n.triedNum=999;const l=ue(u,n,r,e,!0);if(l)return l}}else{for(u=n.triedNum===0?2:n.triedNum+1;u<=e*e&&s[u];)u++;if(n.triedNum=u,u<=e*e){const l=ue(u,n,r,e,!1);if(l)return l}}return me(r,e)}function ue(r,e,a,s,x){if(r<1||r>s*s||a.used[r])return null;const{flatBoard:d,used:n}=a,u=s*(s*s+1)/2,l=Math.floor(e.cellIdx/s),c=e.cellIdx%s;d[e.cellIdx]=r,n[r]=!0;const p=[Array.from({length:s},(h,g)=>l*s+g),Array.from({length:s},(h,g)=>g*s+c)];l===c&&p.push(Array.from({length:s},(h,g)=>g*s+g)),l+c===s-1&&p.push(Array.from({length:s},(h,g)=>g*s+(s-1-g)));for(let h of p){const g=h.map(i=>d[i]).filter(i=>i!==null),o=g.reduce((i,m)=>i+m,0);if(o>u||g.length===s&&o!==u)return d[e.cellIdx]=null,n[r]=!1,{board:Y(d,s),highlight:{r:l,c,type:"backtrack"},desc:`Conflict! ${r} invalid.`}}return a.filledCount++,{board:Y(d,s),val:r,highlight:{r:l,c,type:x?"forced":"active"},desc:x?`Logic: ${r}`:`Trying ${r}...`}}function me(r,e){const{flatBoard:a,used:s,stack:x}=r;if(x[r.filledCount]=null,r.filledCount--,r.filledCount>0){const d=x[r.filledCount],n=a[d.cellIdx];return s[n]=!1,a[d.cellIdx]=null,{board:Y(a,e),highlight:{r:Math.floor(d.cellIdx/e),c:d.cellIdx%e,type:"backtrack"},desc:`Backtracking from ${n}`}}else{const d=r.firstNumberPositions[r.firstPosIdx];return a[d]=null,s[1]=!1,r.firstPosIdx++,r.firstPosIdx>=r.firstNumberPositions.length?{board:Y(a,e),isComplete:!0,desc:"No solution found."}:(r.filledCount=0,{board:Y(a,e),desc:"Restarting search..."})}}function Y(r,e){const a=[];for(let s=0;s<e;s++)a.push(r.slice(s*e,(s+1)*e));return a}function Ue(r,e){r.flatBoard||(r.flatBoard=Array(e*e).fill(null),r.used=Array(e*e+1).fill(!1),r.stack=[],r.filledCount=0,r.firstNumberPositions=[],r.firstPosIdx=-1);const{flatBoard:a,used:s,stack:x}=r,d=e*(e*e+1)/2;if(r.filledCount>=e*e)return{board:W(a,e),isComplete:!0,desc:"Solution found!"};if(r.firstNumberPositions.length===0){if(e===3)r.firstNumberPositions=[0,1,4];else if(e===4)r.firstNumberPositions=[0,1,5];else for(let l=0;l<e*e;l++)r.firstNumberPositions.push(l);r.firstPosIdx=0}if(r.filledCount===0){const l=r.firstNumberPositions[r.firstPosIdx];return a[l]=1,s[1]=!0,r.filledCount=1,{board:W(a,e),val:1,highlight:{r:Math.floor(l/e),c:l%e,type:"active"},desc:`Starting: Placing 1 at cell ${l}.`}}let n=x[r.filledCount];if(!n){const l=a.map((i,m)=>i===null?m:-1).filter(i=>i!==-1);if(l.length===0)return fe(r,e);const c=l[0];let p=null;const h=Math.floor(c/e),g=c%e,o=[Array.from({length:e},(i,m)=>h*e+m),Array.from({length:e},(i,m)=>m*e+g)];h===g&&o.push(Array.from({length:e},(i,m)=>m*e+m)),h+g===e-1&&o.push(Array.from({length:e},(i,m)=>m*e+(e-1-m)));for(let i of o){const m=i.filter(f=>a[f]!==null);if(m.length===e-1){p=d-m.reduce((f,b)=>f+a[b],0);break}}n={cellIdx:c,triedNum:0,forcedVal:p},x[r.filledCount]=n}let u=null;if(n.forcedVal!==null){if(n.triedNum===0){u=n.forcedVal,n.triedNum=999;const l=xe(u,n,r,e,!0);if(l)return l}}else{for(u=n.triedNum===0?2:n.triedNum+1;u<=e*e&&s[u];)u++;if(n.triedNum=u,u<=e*e){const l=xe(u,n,r,e,!1);if(l)return l}}return fe(r,e)}function xe(r,e,a,s,x){if(r<1||r>s*s||a.used[r])return null;const{flatBoard:d,used:n}=a,u=s*(s*s+1)/2,l=Math.floor(e.cellIdx/s),c=e.cellIdx%s;d[e.cellIdx]=r,n[r]=!0;const p=[Array.from({length:s},(h,g)=>l*s+g),Array.from({length:s},(h,g)=>g*s+c)];l===c&&p.push(Array.from({length:s},(h,g)=>g*s+g)),l+c===s-1&&p.push(Array.from({length:s},(h,g)=>g*s+(s-1-g)));for(let h of p){const g=h.map(i=>d[i]).filter(i=>i!==null),o=g.reduce((i,m)=>i+m,0);if(o>u||g.length===s&&o!==u)return d[e.cellIdx]=null,n[r]=!1,{board:W(d,s),highlight:{r:l,c,type:"backtrack"},desc:`Conflict! ${r} breaks magicsum.`}}return a.filledCount++,{board:W(d,s),val:r,highlight:{r:l,c,type:x?"forced":"active"},desc:x?`Forced: ${r}`:`Placing ${r}...`}}function fe(r,e){const{flatBoard:a,used:s,stack:x}=r;if(x[r.filledCount]=null,r.filledCount--,r.filledCount>0){const d=x[r.filledCount],n=a[d.cellIdx];return s[n]=!1,a[d.cellIdx]=null,{board:W(a,e),highlight:{r:Math.floor(d.cellIdx/e),c:d.cellIdx%e,type:"backtrack"},desc:`Backtracking from ${n}`}}else{const d=r.firstNumberPositions[r.firstPosIdx];return a[d]=null,s[1]=!1,r.firstPosIdx++,r.firstPosIdx>=r.firstNumberPositions.length?{board:W(a,e),isComplete:!0,desc:"No solution."}:(r.filledCount=0,{board:W(a,e),desc:"Restarting..."})}}function W(r,e){const a=[];for(let s=0;s<e;s++)a.push(r.slice(s*e,(s+1)*e));return a}function Ze(r,e,a){r.board||(r.board=Array(e*e).fill(null),r.used=Array(e*e+1).fill(!1),r.currentNum=1,r.stack=[]);const{board:s,used:x,stack:d}=r,n=e*(e*e+1)/2;if(r.currentNum>e*e)return Xe(s,e,n)?{board:re(s,e),isComplete:!0,desc:"Solution found!"}:pe(r,e,"Invalid arrangement. Backtracking...");let u=d[r.currentNum];if(!u){let o=[];for(let i=0;i<e*e;i++)s[i]===null&&o.push(i);if(a==="metric"){const i=(e-1)/2;o.sort((m,f)=>{const b=Math.floor(m/e),P=m%e,v=Math.floor(f/e),A=f%e;return Math.pow(b-i,2)+Math.pow(P-i,2)-(Math.pow(v-i,2)+Math.pow(A-i,2))})}else if(a==="backtrack")for(let i=o.length-1;i>0;i--){const m=Math.floor(Math.random()*(i+1));[o[i],o[m]]=[o[m],o[i]]}u={candidates:o,triedIndex:-1},d[r.currentNum]=u}const l=s.indexOf(r.currentNum);if(l!==-1&&(s[l]=null),x[r.currentNum]=!1,u.triedIndex++,u.triedIndex>=u.candidates.length)return pe(r,e,`Backtracking: No positions left for ${r.currentNum}`);const c=u.candidates[u.triedIndex],p=Math.floor(c/e),h=c%e;s[c]=r.currentNum,x[r.currentNum]=!0;let g=!0;if(a!=="brute"){const o=[Array.from({length:e},(i,m)=>p*e+m),Array.from({length:e},(i,m)=>m*e+h)];p===h&&o.push(Array.from({length:e},(i,m)=>m*e+m)),p+h===e-1&&o.push(Array.from({length:e},(i,m)=>m*e+(e-1-m)));for(let i of o){const m=i.map(b=>s[b]).filter(b=>b!==null),f=m.reduce((b,P)=>b+P,0);if(f>n||m.length===e&&f!==n){g=!1;break}}}if(g){const o=r.currentNum;return r.currentNum++,{board:re(s,e),val:o,highlight:{r:p,c:h,type:"active"},desc:`Placing ${o} at (${p}, ${h})...`}}else return s[c]=null,x[r.currentNum]=!1,{board:re(s,e),highlight:{r:p,c:h,type:"backtrack"},desc:`Conflict! ${r.currentNum} at (${p}, ${h}) invalidates sum.`}}function pe(r,e,a){const{board:s,used:x,stack:d}=r;if(d[r.currentNum]=null,r.currentNum--,r.currentNum<1)return r.currentNum=1,{board:re(s,e),isComplete:!0,desc:"Search exhausted."};const n=s.indexOf(r.currentNum);return{board:re(s,e),highlight:n!==-1?{r:Math.floor(n/e),c:n%e,type:"backtrack"}:null,desc:a}}function Xe(r,e,a){for(let d=0;d<e;d++){let n=0;for(let u=0;u<e;u++)n+=r[d*e+u];if(n!==a)return!1}for(let d=0;d<e;d++){let n=0;for(let u=0;u<e;u++)n+=r[u*e+d];if(n!==a)return!1}let s=0,x=0;for(let d=0;d<e;d++)s+=r[d*e+d],x+=r[d*e+(e-1-d)];return s===a&&x===a}function re(r,e){const a=[];for(let s=0;s<e;s++)a.push(r.slice(s*e,(s+1)*e));return a}const Qe=({size:r,mainMode:e,algoMode:a,steps:s,speed:x,triggerRun:d=0,triggerReset:n=0,onComplete:u})=>{const l=e==="simulation"?a==="formula"||a==="swing"?"learn":a==="dynamic"?"dynamic":"brute":"practice",[c,p]=k.useState(0),[h,g]=k.useState(!1),[o,i]=k.useState(!1),[m,f]=k.useState([]),[b,P]=k.useState(1),[v,A]=k.useState({r:0,c:0}),[R,V]=k.useState(null),[E,J]=k.useState(!0),N=k.useRef(null),L=Math.max(50,1050-x),[D,B]=k.useState({attempts:0,time:0}),[G,j]=k.useState(""),[y,S]=k.useState(null),w=k.useRef(0),I=k.useRef(null),T=k.useCallback((O=!1)=>{let M=Array.from({length:r},()=>Array(r).fill(null));if(i(!1),g(O===!0),a==="swing"&&(r===4||r===8)){for(let _=0;_<r;_++)for(let F=0;F<r;F++)_%2===0?M[_][F]=_*r+F+1:M[_][F]=_*r+(r-1-F)+1;P(r*r+1)}else P(1);f(M),B({attempts:0,time:0}),p(0),j(""),S(null),I.current=null,w.current=0,O===!0&&q.init()},[r,a]);k.useEffect(()=>{g(!1),T()},[r,e,a,T]);const H=k.useRef(0);k.useEffect(()=>{d>H.current&&(H.current=d,g(!0),q.init())},[d]);const U=k.useRef(0);return k.useEffect(()=>{n>U.current&&(U.current=n,g(!1),T())},[n,T]),k.useEffect(()=>{let O;return h&&!o&&(O=setInterval(()=>{if(w.current>0){const M=Math.floor(performance.now()-w.current);B(_=>({..._,time:M}))}},100)),()=>{O&&clearInterval(O)}},[h,o]),k.useEffect(()=>{let O=!0;if(!h){N.current&&(clearTimeout(N.current),N.current=null);return}if(I.current||(w.current=performance.now(),a==="heuristic"?I.current={flatBoard:Array(r*r).fill(null),used:Array(r*r+1).fill(!1),stack:[],filledCount:0,firstNumberPositions:[],firstPosIdx:-1}:l==="brute"||a==="backtrack"||a==="metric"?I.current={board:Array(r*r).fill(null),used:Array(r*r+1).fill(!1),currentNum:1,stack:[]}:l==="dynamic"?I.current={flatBoard:Array(r*r).fill(null),used:Array(r*r+1).fill(!1),stack:[],filledCount:0,firstNumberPositions:[],firstPosIdx:-1}:I.current={type:"learn"}),l==="learn")(async()=>{w.current===0&&(w.current=performance.now());let _=c;for(;_<s.length-1&&O&&h;){const F=s[_];let X=L;if(r===8&&F.type==="setup"&&(X=Math.max(30,L/4)),F.type==="highlight_targets"&&(X=1500),F.type==="swing_rotating"&&(X=4e3),await new Promise($=>{N.current=setTimeout($,X)}),!O||!h)break;if(_++,p(_),B($=>({...$,attempts:_})),E){const $=s[_];$?.val?q.playNote($.val):$?.type==="highlight_targets"||$?.type==="swing_rotating"?q.playNote(r*r):$?.type==="complete"&&q.playSuccess()}if(_===s.length-1||s[_].type==="complete"){const $=performance.now()-w.current;g(!1),i(!0),B(K=>({...K,time:$})),u&&u({attempts:_,time:$});break}}})();else{const M=()=>{if(!O||!h)return;let _;if(a==="heuristic"?_=Ue(I.current,r):l==="brute"||a==="backtrack"||a==="metric"?_=Ze(I.current,r,a):l==="dynamic"&&(_=He(I.current,r)),_&&O)if(f(_.board),j(_.desc||""),S(_.highlight||null),E&&_.val&&q.playNote(_.val),_.isComplete){const F=performance.now()-w.current;g(!1),i(!0),B(X=>({attempts:D.attempts+1,time:F})),E&&q.playSuccess(),u&&u({attempts:D.attempts+1,time:F})}else B(F=>({...F,attempts:F.attempts+1})),N.current=setTimeout(M,L)};N.current=setTimeout(M,L)}return()=>{O=!1,N.current&&clearTimeout(N.current)}},[h,c,s,L,l,a,r,u,E]),{practiceBoard:m,targetNum:b,lastCorrectPos:v,feedback:R,setFeedback:V,isSoundEnabled:E,setIsSoundEnabled:J,stats:D,currentStepIndex:c,isPlaying:h,setIsPlaying:g,isComplete:o,resetPractice:T,handlePracticeClick:(O,M,_,F)=>{if(m[O][M]!==null)return;const X=s.find($=>$.highlight&&$.highlight.r===O&&$.highlight.c===M&&$.val===b);if(X){const $=[...m];if($[O]=[...$[O]],$[O][M]=b,f($),P(K=>K+1),A({r:O,c:M}),E&&q.playNote(b),_(X),b===r*r){const K=performance.now()-w.current;i(!0),B(_e=>({..._e,time:K})),E&&q.playSuccess(),u&&u({attempts:D.attempts,time:K})}}else B($=>({...$,attempts:$.attempts+1})),F()},dynamicDesc:G,dynamicHighlight:y,setCurrentStepIndex:p}},Ye=({v:r,r:e,c:a,size:s,algoMode:x,mainMode:d,isComplete:n,isPlaying:u,currentStep:l,highlight:c,dynamicHighlight:p,onClick:h,cellClasses:g,getFormulaColor:o})=>{const i=u&&x==="dynamic"&&p?.r===e&&p?.c===a,m=u&&(x==="formula"||x==="swing")&&c?.r===e&&c?.c===a,f=x==="dynamic"?p?.type:null,b=x==="formula"||x==="swing";let P={};const v=(l?.type==="swap_highlight"||l?.type==="swap")&&(c?.r===e&&c?.c===a||c?.targets?.[0]?.r===e&&c?.targets?.[0]?.c===a);if(r&&x==="formula"&&!v){const N=o(r,e,a,n);P={backgroundColor:N,borderColor:`hsla(${140-Math.pow((e+a)/((s-1)*2),.6)*120}, 95%, 65%, 0.75)`,color:"#fff",textShadow:"0 1px 4px rgba(0,0,0,0.6)",boxShadow:m?`0 0 30px ${N}`:"inset 0 0 10px rgba(0,0,0,0.2)"}}let A={};const R=x==="swing"&&s===4&&(a===1||a===2),V=x==="swing"&&s===8&&(a===1||a===2||a===5||a===6);if(R&&(l?.type==="highlight_targets"||l?.type==="swing_rotating"||n)){const D=(1.5-a)*64,B=(1.5-e)*64,G=(56/2+D)/56*100,j=(56/2+B)/56*100;A={backgroundColor:"rgba(245, 158, 11, 0.6)",borderColor:"rgb(245, 158, 11)",boxShadow:"0 0 40px rgba(245, 158, 11, 0.4)",color:"#fff",zIndex:40,...l?.type==="swing_rotating"?{transformOrigin:`${G}% ${j}%`,transform:"rotate(180deg)",transition:"transform 3.6s cubic-bezier(0.4, 0, 0.2, 1)"}:{transform:"none",transition:n?"none":"background-color 1s ease-in-out, border-color 1s ease-in-out, box-shadow 1s ease-in-out"}}}if(V&&(l?.type==="highlight_targets"||l?.type==="swing_rotating"||n)){const D=(3.5-a)*36,B=(3.5-e)*36,G=(32/2+D)/32*100,j=(32/2+B)/32*100;A={backgroundColor:"rgba(245, 158, 11, 0.6)",borderColor:"rgb(245, 158, 11)",boxShadow:"0 0 40px rgba(245, 158, 11, 0.4)",color:"#fff",zIndex:40,...l?.type==="swing_rotating"?{transformOrigin:`${G}% ${j}%`,transform:"rotate(180deg)",transition:"transform 3.8s cubic-bezier(0.34, 1.56, 0.64, 1)"}:{transform:"none",transition:n?"none":"background-color 1s ease-in-out, border-color 1s ease-in-out, box-shadow 1s ease-in-out"}}}let E="",J="";if(n&&x!=="formula"){const N=(e===0||e===s-1)&&(a===0||a===s-1),Z=e===Math.floor(s/2)&&a===Math.floor(s/2);N||Z?(J="border-2 border-amber-400/80",E="text-white"):a===Math.floor(s/2)?(E="text-pink-300 bg-pink-900/20",J="border border-pink-500/30"):(E="text-sky-300 bg-sky-900/40",J="border border-sky-500/30")}return t.jsxs("div",{onClick:h,style:{...P,...A},className:C("flex items-center justify-center rounded-md font-black transition-all relative overflow-hidden",g,r&&+r>0?n?"":"text-emerald-50":"text-transparent",b?"border-2":!n&&r?"bg-emerald-900/40 border border-emerald-500/20":!n&&"bg-slate-800/50 border border-slate-700/30",b&&!r&&!n&&"bg-slate-900/60 border-emerald-500/10 border-dashed",n&&!b&&E,n&&!b?J||"border border-transparent":"",m&&d==="simulation"&&"ring-2 ring-white z-20 shadow-[0_0_30px_rgba(255,255,255,0.4)] animate-in zoom-in duration-200",b&&l?.type==="scan"&&(e%4===a%4||e%4+a%4===3?"bg-emerald-500/20 border-emerald-500/50 text-emerald-200":"bg-slate-700/50 border-slate-600/50 text-slate-400"),b&&(l?.type==="pop_prepare"||l?.type==="mass_invert")&&c?.targets?.some(N=>N.r===e&&N.c===a)&&C("z-30 transition-all duration-700 ease-in-out",l?.type==="pop_prepare"?C("scale-110 shadow-2xl",(c?.group==="top_bottom"?e===0:a===0)?"bg-rose-500/40 border-rose-400 text-rose-100 shadow-rose-500/30":"bg-blue-500/40 border-blue-400 text-blue-100 shadow-blue-500/30"):"",l?.type==="mass_invert"?"scale-100 rotate-y-180 bg-purple-500/50 border-purple-400 text-white shadow-purple-500/40 ring-1 ring-purple-300":""),x==="swing"&&(l?.type==="swing_prepare"||l?.type==="swing_done")&&c?.targets?.some(N=>N.r===e&&N.c===a)&&C("z-40 transition-all duration-1000 ease-in-out",l?.type==="swing_prepare"?"scale-110 shadow-[0_0_30px_rgba(56,189,248,0.6)] border-sky-400 bg-sky-500/40 text-white animate-cyber-pulse":"",l?.type==="swing_done"?"scale-100 rotate-y-180 bg-indigo-500/70 border-indigo-300 text-white shadow-[0_0_40px_rgba(99,102,241,0.7)] ring-2 ring-indigo-400/50":""),x==="swing"&&l?.type==="scan_swing"&&(c?.targets?.some(N=>N.r===e&&N.c===a)?"ring-2 ring-sky-400/50 shadow-[0_0_25px_rgba(34,211,238,0.4)] bg-sky-900/80 text-cyan-300 z-10 border-cyan-500/50":"opacity-30 grayscale-[0.8]"),x==="swing"&&l?.type==="highlight_targets"&&c?.targets?.some(N=>N.r===e&&N.c===a)&&"bg-blue-600/80 text-white z-10 shadow-[0_0_30px_rgba(37,99,235,0.6)] border-blue-400 animate-cyber-pulse ring-2 ring-blue-300",x==="swing"&&s===6&&l?.type==="highlight_quadrant"&&c?.targets?.some(N=>N.r===e&&N.c===a)&&"bg-blue-500/20 border-blue-400/50 ring-1 ring-blue-400/30 z-10",b&&l?.type==="invert"&&m&&"bg-purple-500/40 border-purple-400 ring-1 ring-purple-400 animate-pulse text-white",l?.type==="swap_highlight"&&(c?.r===e&&c?.c===a?"text-amber-400 !bg-emerald-900 border-amber-400 shadow-[0_0_15px_rgba(251,191,36,0.5)] scale-110 z-50 ring-2 ring-amber-400":c?.targets?.[0]?.r===e&&c?.targets?.[0]?.c===a?"text-cyan-400 !bg-emerald-900 border-cyan-400 shadow-[0_0_15px_rgba(34,211,238,0.5)] scale-110 z-50 ring-2 ring-cyan-400":""),l?.type==="swap"&&(c?.r===e&&c?.c===a?"text-cyan-400 !bg-emerald-900 border-cyan-400 scale-100 z-50 transition-all duration-700":c?.targets?.[0]?.r===e&&c?.targets?.[0]?.c===a?"text-amber-400 !bg-emerald-900 border-amber-400 scale-100 z-50 transition-all duration-700":""),i&&f==="active"&&"ring-2 ring-amber-400 bg-amber-900/40 z-10 scale-105",i&&f==="forced"&&"ring-2 ring-purple-400 bg-purple-900/60 z-10 scale-110 shadow-lg shadow-purple-500/40",i&&f==="backtrack"&&"ring-2 ring-rose-500 bg-rose-500/30 z-10 animate-pulse"),children:[r,i&&f==="forced"&&t.jsx("div",{className:"absolute top-0.5 right-0.5 w-1.5 h-1.5 bg-purple-400 rounded-full animate-ping"}),i&&f==="backtrack"&&t.jsx("div",{className:"absolute inset-0 bg-rose-500/20 animate-pulse"})]})},We=({size:r,mainMode:e,algoMode:a,steps:s=[],speed:x=500,triggerRun:d=0,triggerReset:n=0})=>{const{currentStepIndex:u,isPlaying:l,setIsPlaying:c,isComplete:p,practiceBoard:h,setFeedback:g,isSoundEnabled:o,resetPractice:i,handlePracticeClick:m,stats:f,dynamicDesc:b,dynamicHighlight:P}=Qe({size:r,mainMode:e,algoMode:a,steps:s,speed:x,triggerRun:d,triggerReset:n}),v=s[u]||{board:[],desc:""},A=e==="simulation"&&(a==="formula"||a==="swing")?v?.type==="complete":p,R=r*(r*r+1)/2,[V,E]=k.useState(!1);k.useEffect(()=>{if(A){const y=setTimeout(()=>E(!0),1e3),S=setTimeout(()=>E(!1),3e3);return()=>{clearTimeout(y),clearTimeout(S)}}else E(!1)},[A]);const{highlight:J}=v,N=e==="simulation"&&(a==="formula"||a==="swing")&&(l||A||u>0)&&v?.board?.length>0?v.board:h,Z=k.useMemo(()=>{const y=Array(r).fill(0),S=Array(r).fill(0);return N.forEach(w=>{w&&w.forEach((I,T)=>{I!==null&&(y[T]+=I,S[T]++)})}),y.map((w,I)=>({sum:w,isComplete:w===R&&S[I]===r}))},[N,r,R]),L=k.useMemo(()=>{if(A)return"100.0";if(e==="simulation"&&(a==="swing"||a==="formula"&&r%2===0)&&s.length>0){const w=s[u]?.type;if(w==="complete")return"100.0";if(a==="swing")return w==="swing_rotating"?"80.0":w==="highlight_targets"?"50.0":"0.0";if(a==="formula")return w==="setup"?"0.0":w==="scan"||w==="pop_prepare"?"50.0":w==="mass_invert"?"85.0":"90.0"}if(e==="simulation"&&s.length>0)return((u+1)/s.length*100).toFixed(1);let y=0;N.forEach(w=>{w&&w.forEach(I=>{I!==null&&I>0&&I<=r*r&&y++})});const S=y/(r*r)*100;return S>=100&&!A?"99.9":S.toFixed(1)},[N,r,A,u,s,a,e]),D=()=>r<=3?"w-16 h-16 text-2xl":r<=4?"w-12 h-12 text-xl":r<=6?"w-10 h-10 text-lg":r<=8?"w-8 h-8 text-base":"w-7 h-7 text-sm",B=()=>r<=4?"gap-2":r<=6?"gap-1.5":"gap-1",G=(y,S)=>{m(y,S,w=>{o&&q.playNote(w.val)},()=>{g({type:"error",msg:"Wrong",icon:Ge}),setTimeout(()=>g(null),1e3)})},j=(y,S,w,I)=>{if(!y)return null;const T=(S+w)/((r-1)*2);return`hsla(${140-Math.pow(T,.6)*120}, ${I?"85%":"95%"}, ${I?"45%":"50%"}, ${I?.75:.9})`};return t.jsxs("div",{className:C("glass-panel rounded-2xl p-3 flex flex-col shadow-2xl transition-all group overflow-hidden relative",A?"border-emerald-500/30 bg-emerald-500/5 shadow-[0_0_30px_rgba(16,185,129,0.1)]":"border-slate-700/50"),children:[t.jsx("div",{className:"absolute inset-0 bg-blueprint opacity-[0.03] pointer-events-none"}),t.jsxs("div",{className:"flex justify-between items-center mb-1.5 min-h-[28px]",children:[t.jsxs("div",{className:"flex items-center gap-3",children:[a==="dynamic"?t.jsx(le,{size:18,className:"text-emerald-400"}):t.jsx(ee,{size:18,className:"text-emerald-400"}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsxs("span",{className:"text-sm font-black text-white bg-emerald-500/30 px-2 py-0.5 rounded-lg border border-emerald-500/40 shadow-[0_0_10px_rgba(16,185,129,0.2)]",children:[r,"x",r]}),t.jsx("h3",{className:"text-sm font-black uppercase tracking-[0.25em] text-white/90 drop-shadow-md",children:e==="simulation"?`${a} ENGINE`:"PRACTICE"})]})]}),t.jsx("div",{className:"flex items-center gap-2",children:e==="simulation"&&t.jsxs(t.Fragment,{children:[t.jsx("button",{onClick:i,className:"p-1.5 rounded-lg bg-slate-800/60 text-slate-500 hover:text-emerald-400 border border-white/5 transition-all active:scale-95 group/btn",title:"Reset",children:t.jsx(Re,{size:14,className:"group-hover/btn:rotate-180 transition-transform duration-500"})}),l?t.jsx("button",{onClick:()=>c(!1),className:"p-1.5 rounded-lg bg-rose-500/10 text-rose-400 hover:bg-rose-500/20 transition-all active:scale-95 border border-rose-500/20 shadow-lg shadow-rose-500/10",children:t.jsx(Ve,{size:14,fill:"currentColor"})}):t.jsx("button",{onClick:()=>{A?i(!0):c(!0)},className:"p-1.5 rounded-lg bg-emerald-500/10 text-emerald-400 hover:bg-emerald-500/20 border border-emerald-500/20 transition-all active:scale-95 shadow-lg shadow-emerald-500/10",children:t.jsx(ce,{size:14,fill:"currentColor"})})]})})]}),t.jsxs("div",{className:C("flex flex-col items-center justify-center relative px-2 flex-1 transition-all duration-500",r>7?"py-6":"py-3"),children:[t.jsxs("div",{className:"relative",children:[t.jsx(ge,{children:V&&t.jsxs(z.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.8,ease:"easeInOut"},className:"absolute inset-[-8px] z-30 flex items-center justify-center cursor-pointer overflow-hidden rounded-xl",onClick:()=>E(!1),children:[t.jsx(z.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"absolute inset-0 bg-slate-950/85 backdrop-blur-[6px] border border-emerald-500/30"}),t.jsxs(z.div,{initial:{scale:.8,opacity:0,y:15},animate:{scale:1,opacity:1,y:0},exit:{scale:.85,opacity:0,y:-10},transition:{duration:.6,delay:.1},className:"relative flex flex-col items-center gap-3 p-4 w-full",children:[t.jsx(z.div,{animate:{y:[0,-5,0]},transition:{duration:2,repeat:1/0,ease:"easeInOut"},className:"bg-gradient-to-br from-amber-400 to-orange-600 p-3 rounded-2xl shadow-[0_0_20px_rgba(245,158,11,0.5)]",children:t.jsx(ne,{size:r>6?40:32,className:"text-white",fill:"rgba(255,255,255,0.2)"})}),t.jsxs("div",{className:"space-y-1 text-center",children:[t.jsx("h4",{className:"text-lg font-black text-white tracking-[0.2em] leading-none uppercase drop-shadow-lg",children:"COMPLETE"}),t.jsxs("p",{className:"text-[10px] font-bold text-emerald-400 uppercase tracking-[0.3em] opacity-80",children:["SUM: ",R]})]}),t.jsxs("div",{className:"flex gap-4 mt-1",children:[t.jsxs("div",{className:"text-center",children:[t.jsx("p",{className:"text-[8px] font-bold text-slate-500 uppercase tracking-tighter",children:"Time"}),t.jsxs("p",{className:"text-sm font-mono font-black text-emerald-300",children:[(f?.time/1e3||0).toFixed(2),"s"]})]}),t.jsxs("div",{className:"text-center",children:[t.jsx("p",{className:"text-[8px] font-bold text-slate-500 uppercase tracking-tighter",children:"Steps"}),t.jsx("p",{className:"text-sm font-mono font-black text-emerald-300",children:f?.attempts||0})]})]})]})]})}),t.jsx("div",{className:"flex flex-col gap-1",children:N.map((y,S)=>{const w=y?y.reduce((H,U)=>H+(U||0),0):0,I=w===R&&y&&y.every(H=>H!==null),T=D();return t.jsxs("div",{className:C("flex items-center",B()),children:[t.jsx("div",{className:"w-5 h-5 mr-1 opacity-0"}),y&&y.map((H,U)=>t.jsx(Ye,{v:H,r:S,c:U,size:r,algoMode:a,mainMode:e,isComplete:A,isPlaying:l,currentStep:v,dynamicHighlight:P,onClick:()=>e==="practice"&&G(S,U),cellClasses:T,getFormulaColor:j},`${S}-${U}`)),t.jsx("div",{className:C("flex items-center justify-center font-mono font-bold w-5 h-5 ml-1 text-[8px]",I?"text-sky-400":"text-slate-600",A?"opacity-100":"opacity-0"),children:w>0?w:""})]},`row-${S}`)})})]}),t.jsxs("div",{className:C("flex items-center mt-1",B()),children:[t.jsx("div",{className:"w-5 h-5 mr-1 opacity-0"}),Z.map((y,S)=>t.jsx("div",{className:C("flex items-center justify-center font-mono font-bold transition-all duration-700",D(),"text-[8px] h-5",y.isComplete?"text-sky-400":"text-slate-600",A?"opacity-100":"opacity-0"),children:y.sum>0?y.sum:""},`colsum-${S}`)),t.jsx("div",{className:C("flex items-center justify-center font-mono font-bold w-5 h-5 ml-1 text-[8px] transition-all duration-700",N.reduce((y,S,w)=>y+(S&&S[w]?S[w]:0),0)===R&&N.every((y,S)=>y&&y[S])?"text-sky-400":"text-slate-600",A?"opacity-100":"opacity-0"),children:(()=>{const y=N.reduce((S,w,I)=>S+(w&&w[I]?w[I]:0),0);return y>0?y:""})()})]})]}),e==="simulation"&&t.jsxs("div",{className:"flex flex-col mt-3 gap-2 relative z-10",children:[t.jsxs("div",{className:"h-12 flex items-center justify-center px-4 bg-slate-950/60 rounded-xl border border-white/5 shadow-inner overflow-hidden relative",children:[t.jsx("div",{className:"absolute inset-0 bg-blue-500/5 transition-colors duration-500 group-hover:bg-blue-500/10"}),t.jsx("span",{className:"text-[11px] font-black uppercase tracking-widest text-center text-slate-300 relative z-10 leading-snug",children:a!=="formula"&&a!=="swing"?b||"Ready for Simulation":v?.desc||(A?"Analysis Finished":"Processing Logic...")})]}),t.jsxs("div",{className:"grid grid-cols-4 gap-1 p-2 bg-slate-900/40 rounded-xl border border-white/5",children:[t.jsxs("div",{className:"flex flex-col items-center justify-center py-1 rounded-lg hover:bg-white/5 transition-colors cursor-help group/stat",children:[t.jsx(we,{size:12,className:"text-slate-500 group-hover/stat:text-rose-400 mb-1 transition-colors"}),t.jsx("span",{className:"text-[10px] font-mono font-bold text-slate-300",children:f?.attempts||0})]}),t.jsxs("div",{className:"flex flex-col items-center justify-center py-1 rounded-lg hover:bg-white/5 transition-colors cursor-help group/stat",children:[t.jsx(ne,{size:12,className:"text-slate-500 group-hover/stat:text-emerald-400 mb-1 transition-colors"}),t.jsxs("span",{className:"text-[10px] font-mono font-bold text-emerald-400",children:[L,"%"]})]}),t.jsxs("div",{className:"flex flex-col items-center justify-center py-1 rounded-lg hover:bg-white/5 transition-colors cursor-help group/stat",children:[t.jsx(Ae,{size:12,className:"text-slate-500 group-hover/stat:text-amber-400 mb-1 transition-colors"}),t.jsx("span",{className:"text-[10px] font-mono font-bold text-slate-300",children:R})]}),t.jsxs("div",{className:"flex flex-col items-center justify-center py-1 rounded-lg hover:bg-white/5 transition-colors cursor-help group/stat",children:[t.jsx(Ne,{size:12,className:"text-slate-500 group-hover/stat:text-sky-400 mb-1 transition-colors"}),t.jsxs("span",{className:"text-[10px] font-mono font-bold text-slate-300",children:[(f?.time/1e3||0).toFixed(2),"s"]})]})]})]})]})};class Ke{static getZigZagPositions(e){const a=[];for(let s=0;s<e;s++)if(s%2===0)for(let x=0;x<e;x++)a.push({r:s,c:x});else for(let x=e-1;x>=0;x--)a.push({r:s,c:x});return a}static generateSteps(e){if(e!==4&&e!==8&&e!==6)return[];const a=Array.from({length:e},()=>Array(e).fill(null)),s=[],x=(c,p,h,g,o)=>{s.push({board:JSON.parse(JSON.stringify(c)),val:p,highlight:h,desc:g,type:o})};if(x(a,null,null,"Ready to Fill","setup"),e===6){const p=[{r:0,c:0,start:1,name:"A (Top-Left)"},{r:3,c:3,start:10,name:"B (Bottom-Right)"},{r:0,c:3,start:19,name:"C (Top-Right)"},{r:3,c:0,start:28,name:"D (Bottom-Left)"}];for(const h of p){const g=[];for(let o=0;o<3;o++)for(let i=0;i<3;i++)g.push({r:h.r+o,c:h.c+i});x(a,null,{targets:g},`Fill Sub-square ${h.name}`,"highlight_quadrant");for(let o=0;o<9;o++){const i=h.r+Math.floor(o/3),m=h.c+o%3;a[i][m]=h.start+o,x(a,a[i][m],{r:i,c:m},`Filling ${h.name}...`,"setup")}}return x(a,null,null,"4 Sub-squares Ready","complete"),s}const d=this.getZigZagPositions(e);for(let c=0;c<d.length;c++){const{r:p,c:h}=d[c];a[p][h]=c+1,x(a,c+1,{r:p,c:h},"ZigZag Filling","setup")}const n=e===4?[1,2]:[1,2,5,6],u=[];for(let c=0;c<e;c++)for(let p of n)u.push({r:c,c:p});x(a,null,{targets:u},"Select Swing Cells","highlight_targets"),x(a,null,{targets:u},"Swing!","swing_rotating");const l=JSON.parse(JSON.stringify(a));for(const{r:c,c:p}of u)l[e-1-c][e-1-p]=a[c][p];return x(l,null,null,"That's it","complete"),s}}class Se{static generateSteps(e){const a=Array.from({length:e},()=>Array(e).fill(null)),s=[],x=(u,l,c,p,h)=>{a[l][c]=u,s.push({board:JSON.parse(JSON.stringify(a)),val:u,highlight:{r:l,c},desc:p,type:h})};let d=0,n=Math.floor(e/2);x(1,d,n,"Start: Top Center (Siamese Method)","place_start");for(let u=2;u<=e*e;u++){let l=(d-1+e)%e,c=(n+1)%e;a[l][c]!==null?(d=(d+1)%e,x(u,d,n,`Collision at (${l},${c}) -> Move Down`,"move_collision")):(d=l,n=c,x(u,d,n,"Move Diagonally Up-Right ↗","move_normal"))}return s.length>0&&(s[s.length-1].type="complete",s[s.length-1].desc="Magic Square Complete!"),s}}class ze{static generateSteps(e){const a=Array.from({length:e},()=>Array(e).fill(null)),s=[],x=(l,c,p,h,g)=>{s.push({board:JSON.parse(JSON.stringify(l)),val:c,highlight:p,desc:h,type:g})};for(let l=0;l<e;l++)for(let c=0;c<e;c++){const p=l*e+c+1;a[l][c]=p,x(a,p,{r:l,c},`Sequential Fill: ${p}`,"setup")}x(a,null,null,"Diagonals: Safe (Green) | Others: Targets (Grey)","scan");const d=[],n=[],u=(l,c)=>l%4===c%4||l%4+c%4===3;for(let l=0;l<e;l++)for(let c=0;c<e;c++)u(l,c)||(l===0||l===e-1||c===0||c===e-1?d.push({r:l,c}):n.push({r:l,c}));if(d.length>0){x(a,null,{targets:d,group:"top_bottom"},"Invert Outer Edges!","pop_prepare");for(let l=0;l<d.length;l++){const{r:c,c:p}=d[l];a[c][p]=e*e+1-a[c][p]}x(a,null,{targets:d,group:"top_bottom"},"Outer Edges Inverted!","mass_invert")}if(n.length>0){x(a,null,{targets:n,group:"left_right"},"Invert Inner Center!","pop_prepare");for(let l=0;l<n.length;l++){const{r:c,c:p}=n[l];a[c][p]=e*e+1-a[c][p]}x(a,null,{targets:n,group:"left_right"},"Inner Center Inverted!","mass_invert")}return s.length>0&&(s[s.length-1].type="complete",s[s.length-1].desc="Magic Square Complete!"),s}}function et(r){const e=r/2,a=e*e,s=Se.generateSteps(e),x=s[s.length-1].board,d=Array.from({length:r},()=>Array(r).fill(null)),n=[],u=(o,i,m,f,b,P)=>{d[i][m]=o,n.push({board:JSON.parse(JSON.stringify(d)),val:o,highlight:{r:i,c:m},desc:f,type:b})},l=new Map;for(let o=0;o<e;o++)for(let i=0;i<e;i++)l.set(x[o][i],{r:o,c:i});for(let o=1;o<=a;o++){const i=l.get(o);u(o,i.r,i.c,`Filling Quadrant A (1-${a}): ${o}`,"place_q1")}for(let o=1;o<=a;o++){const i=o+a,m=l.get(o);u(i,m.r+e,m.c+e,`Filling Quadrant D (${a+1}-${2*a}): ${i}`,"place_q4")}for(let o=1;o<=a;o++){const i=o+2*a,m=l.get(o);u(i,m.r,m.c+e,`Filling Quadrant B (${2*a+1}-${3*a}): ${i}`,"place_q2")}for(let o=1;o<=a;o++){const i=o+3*a,m=l.get(o);u(i,m.r+e,m.c,`Filling Quadrant C (${3*a+1}-${4*a}): ${i}`,"place_q3")}const c=Math.floor((r-2)/4),p=(o,i,m,f,b)=>{const P=d[o][i],v=d[m][f];n.push({board:JSON.parse(JSON.stringify(d)),type:"swap_highlight",desc:`Ready to Swap: (${o},${i}) ↔ (${m},${f})`,highlight:{r:o,c:i,targets:[{r:m,c:f}]}}),d[o][i]=v,d[m][f]=P,n.push({board:JSON.parse(JSON.stringify(d)),desc:b||`Swapped (${o},${i}) ↔ (${m},${f})`,type:"swap",highlight:{r:o,c:i,targets:[{r:m,c:f}]}})};for(let o=0;o<e;o++)for(let i=0;i<c;i++)p(o,i,o+e,i,"Swapping Left Columns (Left Side)");const h=Math.floor(e/2);p(h,0,h+e,0,"Adjusting Middle Row: Undo First Col Swap"),p(h,c,h+e,c,"Adjusting Middle Row: Swap Center Col");const g=c-1;if(g>0)for(let o=0;o<e;o++)for(let i=0;i<g;i++){const m=e-1-i;p(o,m+e,o+e,m+e,"Swapping Right Columns (Right Side)")}return n.push({board:JSON.parse(JSON.stringify(d)),type:"complete",desc:`Singly Even (${r}x${r}) Complete! Sum Verified.`}),n}function Q(r,e="formula"){return e==="swing"&&(r===4||r===8)?Ke.generateSteps(r):r%2!==0?Se.generateSteps(r):r%4===0?ze.generateSteps(r):et(r)}const tt=({selectedSize:r,setSelectedSize:e,selectedAlgos:a,toggleAlgo:s,toggleAllAlgos:x,onRunAll:d,onResetAll:n,isRunningAny:u,mainMode:l,setMainMode:c,setShowAlgoTable:p})=>{const[h,g]=k.useState(!1),[o,i]=k.useState(q.enabled),m=()=>{const v=!o;i(v),q.setEnabled(v)},f=[3,4,5,6,7,8,9,10],b=[{id:"formula",label:"Direct Formula",icon:oe},{id:"dynamic",label:"Heuristic CSP",icon:le},{id:"heuristic",label:"Smart Backtrack",icon:ie},{id:"metric",label:"Metric Backtrack",icon:se},{id:"backtrack",label:"Recursive Backtrack",icon:be},{id:"brute",label:"Pure Brute Force",icon:ee}],P=a.size===b.length;return a.size,t.jsx("div",{className:"lg:hidden fixed bottom-6 left-0 right-0 z-[60] px-6 pointer-events-none",children:t.jsxs("div",{className:"max-w-7xl mx-auto flex flex-col gap-2 pointer-events-auto",children:[h&&t.jsxs("div",{className:"bg-slate-800/95 backdrop-blur-2xl border border-white/10 rounded-2xl p-4 shadow-2xl mb-2 animate-in slide-in-from-bottom-5 duration-300",children:[t.jsxs("div",{className:"flex items-center justify-between mb-4 pb-3 border-b border-white/5",children:[t.jsxs("div",{className:"flex bg-slate-900/50 p-1 rounded-lg border border-white/5",children:[t.jsx("button",{onClick:()=>c("practice"),className:C("px-3 py-1 rounded-md text-[10px] font-black uppercase tracking-widest transition-all",l==="practice"?"bg-emerald-400/20 border border-emerald-400/30 text-emerald-300":"text-slate-500"),children:"Practice"}),t.jsx("button",{onClick:()=>c("simulation"),className:C("px-3 py-1 rounded-md text-[10px] font-black uppercase tracking-widest transition-all",l==="simulation"?"bg-emerald-400/20 border border-emerald-400/30 text-emerald-300":"text-slate-500"),children:"Simulation"})]}),t.jsx("button",{onClick:m,className:C("p-2 rounded-lg transition-all border",o?"bg-emerald-400/20 border-emerald-400/30 text-emerald-300":"bg-slate-700/50 border-white/5 text-slate-500"),children:o?t.jsx(Ie,{size:16}):t.jsx(Pe,{size:16})})]}),t.jsxs("div",{className:"mb-4",children:[t.jsx("span",{className:"text-[10px] font-black text-slate-500 uppercase tracking-widest mb-2 block",children:"Grid Size"}),t.jsx("div",{className:"flex gap-1 overflow-x-auto pb-2 no-scrollbar",children:f.map(v=>t.jsx("button",{onClick:()=>e(v),className:C("flex-shrink-0 w-10 h-10 rounded-lg border text-xs font-black transition-all",r===v?"bg-emerald-500 border-emerald-400 text-white":"bg-slate-900/50 border-white/5 text-slate-500"),children:v},v))})]}),l==="simulation"&&t.jsxs("div",{children:[t.jsxs("div",{className:"flex justify-between items-center mb-2",children:[t.jsx("span",{className:"text-[10px] font-black text-slate-500 uppercase tracking-widest",children:"Algorithms"}),t.jsx("button",{onClick:x,className:"text-[9px] font-black text-emerald-400 uppercase tracking-tighter",children:P?"Deselect All":"Select All"})]}),t.jsx("div",{className:"grid grid-cols-2 gap-2",children:b.map(v=>t.jsxs("button",{onClick:()=>s(v.id),className:C("flex items-center gap-2 p-2 rounded-xl border transition-all text-left",a.has(v.id)?"bg-emerald-600/20 border-emerald-500/50 text-white":"bg-slate-900/40 border-white/5 text-slate-500"),children:[t.jsx("div",{className:C("w-4 h-4 rounded flex items-center justify-center border",a.has(v.id)?"bg-emerald-500 border-emerald-400":"border-slate-700 bg-slate-800"),children:a.has(v.id)&&t.jsx(ke,{size:10,className:"text-white"})}),t.jsx("span",{className:"text-[10px] font-bold truncate uppercase",children:v.label})]},v.id))})]})]}),t.jsxs("div",{className:"h-16 bg-slate-800/90 backdrop-blur-xl border border-white/10 rounded-2xl shadow-2xl flex items-center justify-between p-2 relative overflow-hidden",children:[t.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-emerald-500/5 to-transparent pointer-events-none"}),t.jsxs("div",{className:"flex items-center gap-1.5 z-10",children:[t.jsx("button",{onClick:()=>g(!h),className:C("w-12 h-12 flex items-center justify-center rounded-xl transition-all active:scale-95",h?"bg-emerald-500 text-white shadow-lg shadow-emerald-500/20":"bg-slate-700/50 text-slate-400"),children:h?t.jsx(Be,{size:20}):t.jsx(Ee,{size:20})}),t.jsx("button",{onClick:()=>p(!0),className:"w-12 h-12 flex items-center justify-center rounded-xl bg-emerald-500/10 border border-emerald-500/20 text-emerald-400 hover:text-emerald-300 active:scale-95 transition-all",children:t.jsx(oe,{size:18})}),t.jsx("button",{onClick:n,className:"w-12 h-12 flex items-center justify-center rounded-xl bg-slate-700/30 text-slate-400 hover:text-white active:scale-95 transition-all",children:t.jsx(ae,{size:18})})]}),t.jsx("div",{className:"flex-1 pl-3 z-10",children:u?t.jsxs("button",{onClick:n,className:"w-full h-12 flex items-center justify-center gap-2 bg-slate-700/50 text-slate-300 border border-white/10 rounded-xl font-black text-xs uppercase tracking-widest active:scale-95 transition-all",children:[t.jsx("div",{className:"w-2.5 h-2.5 bg-slate-400 rounded-sm"})," HOLD ALL"]}):t.jsxs("button",{onClick:d,className:"w-full h-12 flex items-center justify-center gap-2 bg-emerald-500 hover:bg-emerald-400 text-white rounded-xl font-black text-xs uppercase tracking-widest shadow-lg shadow-emerald-500/40 active:scale-95 transition-all",children:[t.jsx(ce,{size:16,fill:"currentColor"})," RUN ",l==="simulation"?"LAB":"PRACTICE"]})})]})]})})},rt=({results:r,onClose:e})=>{if(!r||r.length===0)return null;const a=[...r].sort((n,u)=>n.time-u.time),s=Math.max(...r.map(n=>n.time),1),x=n=>n===1?"text-emerald-400":n===2?"text-teal-400":n===3?"text-lime-400":"text-slate-500",d=n=>n===1?"bg-gradient-to-r from-emerald-500 to-emerald-400":n===2?"bg-gradient-to-r from-teal-500 to-teal-400":n===3?"bg-gradient-to-r from-lime-500 to-lime-400":"bg-gradient-to-r from-slate-600 to-slate-500";return t.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center p-4 bg-black/80 backdrop-blur-md animate-in fade-in duration-300",children:t.jsxs("div",{className:"bg-slate-900/90 border border-white/10 rounded-3xl shadow-2xl w-full max-w-2xl max-h-[90vh] overflow-auto animate-in zoom-in-95 duration-300",children:[t.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-white/5",children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx(ne,{className:"text-emerald-400",size:28}),t.jsx("h2",{className:"text-2xl font-black text-white uppercase tracking-widest",children:"Lab Scoreboard"})]}),t.jsx("button",{onClick:e,className:"p-2 rounded-xl hover:bg-white/5 text-slate-400 hover:text-white transition-all active:scale-90",children:t.jsx(je,{size:24})})]}),t.jsxs("div",{className:"p-6 border-b border-white/5",children:[t.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[t.jsx(Ne,{size:16,className:"text-emerald-400"}),t.jsx("span",{className:"text-xs font-black text-slate-500 uppercase tracking-widest",children:"Time Comparison (Seconds)"})]}),t.jsx("div",{className:"space-y-3",children:a.map((n,u)=>{const l=a[0]?.time||1,c=Math.round(n.time/l*100);return t.jsxs("div",{className:"flex items-center gap-4",children:[t.jsx("span",{className:C("w-6 text-center font-black text-sm",x(u+1)),children:u+1}),t.jsx("div",{className:"w-32 flex flex-col",children:t.jsx("span",{className:C("text-xs font-black truncate uppercase tracking-tighter",x(u+1)),children:n.name})}),t.jsxs("div",{className:"flex-1 h-8 bg-slate-800/50 rounded-xl overflow-hidden relative border border-white/5",children:[t.jsx("div",{className:C("h-full rounded-xl transition-all duration-1000 ease-out",d(u+1)),style:{width:`${n.time/s*100}%`}}),t.jsxs("span",{className:"absolute inset-0 flex items-center justify-center gap-2 text-[11px] font-black text-white drop-shadow-md uppercase tracking-tight",children:[(n.time/1e3).toFixed(3),"s",t.jsxs("span",{className:C("font-black opacity-80",u===0?"text-white":"text-white/60"),children:["(",c,"%)"]})]})]})]},n.id)})})]}),t.jsxs("div",{className:"p-6",children:[t.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[t.jsx(we,{size:16,className:"text-emerald-400"}),t.jsx("span",{className:"text-xs font-black text-slate-500 uppercase tracking-widest",children:"Detailed Statistics"})]}),t.jsx("div",{className:"overflow-x-auto",children:t.jsxs("table",{className:"w-full text-left",children:[t.jsx("thead",{children:t.jsxs("tr",{className:"text-[10px] font-black text-slate-500 uppercase tracking-widest border-b border-white/5",children:[t.jsx("th",{className:"pb-3 px-2",children:"Rank / Engine"}),t.jsx("th",{className:"pb-3 text-center",children:"Steps"}),t.jsx("th",{className:"pb-3 text-center",children:"Time"}),t.jsx("th",{className:"pb-3 text-center",children:"% (Speed)"}),t.jsx("th",{className:"pb-3 text-center",children:"Complexity"})]})}),t.jsx("tbody",{className:"divide-y divide-white/5",children:a.map((n,u)=>{const l=a[0]?.time||1,c=Math.round(n.time/l*100);return t.jsxs("tr",{className:"group hover:bg-white/5 transition-colors",children:[t.jsx("td",{className:"py-4 px-2",children:t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsxs("span",{className:C("font-black text-sm w-4",x(u+1)),children:[u+1,"."]}),t.jsxs("div",{className:"flex flex-col",children:[t.jsx("span",{className:C("text-xs font-black uppercase tracking-tight",x(u+1)),children:n.name}),t.jsx("span",{className:"text-[9px] text-slate-500 font-bold uppercase",children:n.desc?.split(" ")[0]})]})]})}),t.jsx("td",{className:"py-4 text-center font-mono text-xs text-white/80",children:n.attempts.toLocaleString()}),t.jsxs("td",{className:"py-4 text-center font-mono text-xs text-emerald-400",children:[(n.time/1e3).toFixed(3),"s"]}),t.jsxs("td",{className:C("py-4 text-center text-[10px] font-black tracking-widest",u===0?"text-emerald-400":"text-slate-500"),children:[c,"%"]}),t.jsx("td",{className:"py-4 text-center font-mono text-[10px] text-slate-500",children:n.complexity||"O(Exp)"})]},n.id)})})]})})]}),t.jsx("div",{className:"p-6 border-t border-white/5 flex justify-center bg-slate-900/50 rounded-b-3xl",children:t.jsx("button",{onClick:e,className:"w-full max-w-xs py-3 bg-emerald-500 hover:bg-emerald-400 text-white rounded-xl font-black text-sm uppercase tracking-widest shadow-lg shadow-emerald-500/20 active:scale-95 transition-all",children:"Close Results"})})]})})},at=({onClose:r})=>{const e=[{id:"dynamic",name:"Heuristic CSP",icon:t.jsx(le,{size:16}),strategy:"Constraint Satisfaction",complexity:"O(Exp)",suitability:"Universal Solver",desc:"Avoids conflicts by predicting constraint violations."},{id:"heuristic",name:"Smart Backtrack",icon:t.jsx(ie,{size:16}),strategy:"Cell Priority DFS",complexity:"O(Exp)",suitability:"Densely Constrained",desc:'Uses "forced-cell" logic to populate squares first.'},{id:"metric",name:"Metric Backtrack",icon:t.jsx(se,{size:16}),strategy:"Distance-Weighted DFS",complexity:"O(Exp)",suitability:"Optimized Search",desc:"Prunes via global sum distance evaluation."},{id:"backtrack",name:"Recursive Backtrack",icon:t.jsx(be,{size:16}),strategy:"Depth-First Search",complexity:"O(N!)",suitability:"3x3 Visualisation",desc:"Standard exhaustive search. State-space heavy."},{id:"brute",name:"Pure Brute Force",icon:t.jsx(Le,{size:16}),strategy:"Naive Iteration",complexity:"O(N^N)",suitability:"Small Data Only",desc:"Naive permutation without pruning."},{id:"formula",name:"Direct Formula",icon:t.jsx(ee,{size:16}),strategy:"Mathematical Construction",complexity:"O(N²)",suitability:"Instant Execution",desc:"Fixed patterns like Siamese or Strachey methods."}];return t.jsxs("div",{className:"fixed inset-0 z-[100] flex items-center justify-center p-4",children:[t.jsx(z.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:r,className:"absolute inset-0 bg-slate-950/80 backdrop-blur-sm"}),t.jsxs(z.div,{initial:{opacity:0,scale:.9,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.9,y:20},className:"relative w-full max-w-4xl bg-slate-900 border border-emerald-500/30 rounded-3xl shadow-[0_0_50px_rgba(16,185,129,0.1)] overflow-hidden flex flex-col max-h-[90vh]",children:[t.jsxs("div",{className:"bg-emerald-500/10 px-6 py-5 border-b border-emerald-500/20 flex items-center justify-between",children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("div",{className:"p-2 bg-emerald-500/20 rounded-lg text-emerald-400",children:t.jsx(ve,{size:20})}),t.jsx("h4",{className:"text-sm font-black text-emerald-300 uppercase tracking-widest",children:"Global Algorithm Performance Matrix"})]}),t.jsx("button",{onClick:r,className:"p-2 hover:bg-white/10 rounded-full transition-colors text-slate-400 hover:text-white",children:t.jsx(je,{size:20})})]}),t.jsx("div",{className:"overflow-auto flex-1 p-6",children:t.jsx("div",{className:"overflow-x-auto",children:t.jsxs("table",{className:"w-full text-left text-[13px]",children:[t.jsx("thead",{children:t.jsxs("tr",{className:"text-[11px] font-black text-slate-400 uppercase tracking-widest border-b border-white/10 bg-white/5",children:[t.jsx("th",{className:"py-5 px-6",children:"Algorithm Engine"}),t.jsx("th",{className:"py-5 px-6",children:"Strategy"}),t.jsx("th",{className:"py-5 px-6",children:"Suitability"})]})}),t.jsx("tbody",{className:"divide-y divide-white/10",children:e.map(a=>t.jsxs("tr",{className:"group hover:bg-emerald-500/10 transition-colors",children:[t.jsx("td",{className:"py-5 px-6",children:t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("div",{className:"p-2.5 bg-slate-800 rounded-xl text-emerald-400 border border-white/5 group-hover:border-emerald-500/30 transition-all shrink-0",children:a.icon}),t.jsxs("div",{className:"flex flex-col",children:[t.jsx("span",{className:"font-black text-white uppercase tracking-tight text-sm leading-none",children:a.name}),t.jsx("span",{className:"text-[10px] text-slate-500 font-bold uppercase mt-1.5 leading-tight",children:a.desc})]})]})}),t.jsx("td",{className:"py-5 px-6 font-semibold text-slate-300 leading-tight",children:a.strategy}),t.jsx("td",{className:"py-5 px-6 whitespace-nowrap",children:t.jsx("span",{className:"px-3 py-1.5 rounded-lg bg-emerald-500/20 text-emerald-300 font-black text-[10px] uppercase tracking-wider border border-emerald-500/30",children:a.suitability})})]},a.id))})]})})})]})]})},st=({selectedSize:r,setSelectedSize:e,selectedAlgos:a,toggleAlgo:s,toggleAllAlgos:x,mainMode:d,setMainMode:n,onRunAll:u,onResetAll:l,isRunningAny:c,showAlgoTable:p,setShowAlgoTable:h,simulationAlgos:g,ALL_SIZES:o})=>{const i=a.size===g.length,m=a.size===0;return t.jsxs("div",{className:"glass-panel rounded-2xl p-4 flex flex-col gap-4 shadow-2xl relative overflow-hidden group h-full",children:[t.jsx("div",{className:"absolute inset-0 bg-blueprint opacity-[0.03] pointer-events-none"}),t.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-blue-500/5 to-transparent pointer-events-none"}),t.jsxs("div",{className:"flex items-center gap-2.5 mb-1 relative z-10",children:[t.jsx("div",{className:"p-1.5 bg-amber-500/20 rounded-lg text-amber-400",children:t.jsx(ee,{size:14,className:"fill-amber-400/20"})}),t.jsx("h3",{className:"text-[10px] font-black text-slate-300 uppercase tracking-[0.2em]",children:"Lab Control"})]}),t.jsx("div",{className:"grid grid-cols-2 gap-1.5 p-1 bg-slate-900/60 rounded-xl border border-white/5 relative z-10",children:[{id:"simulation",label:"SIMULATION",icon:ee},{id:"practice",label:"PRACTICE",icon:ye}].map(f=>t.jsxs("button",{onClick:()=>n(f.id),className:C("flex items-center justify-center gap-2 py-2.5 rounded-lg text-[9px] font-black tracking-[0.2em] transition-all",d===f.id?"bg-emerald-500/20 border border-emerald-500/30 text-emerald-300 shadow-xl shadow-emerald-500/10":"bg-transparent text-slate-500 hover:text-slate-400 hover:bg-white/5"),children:[t.jsx(f.icon,{size:12})," ",f.label]},f.id))}),t.jsxs("div",{className:"flex gap-2",children:[t.jsxs("button",{onClick:l,className:"flex-1 flex items-center justify-center gap-2 py-2.5 bg-slate-700/50 hover:bg-slate-700 text-slate-300 rounded-xl font-bold text-[10px] border border-slate-600/50 transition-all active:scale-95",children:[t.jsx(ae,{size:12})," RESET"]}),c?t.jsxs("button",{onClick:l,className:"flex-[1.5] flex items-center justify-center gap-2 py-2.5 bg-slate-700/50 hover:bg-slate-700/80 text-slate-300 rounded-xl font-bold text-[10px] border border-white/10 transition-all active:scale-95",children:[t.jsx($e,{size:12,fill:"currentColor"})," HOLD"]}):t.jsxs("button",{onClick:u,disabled:d==="practice",className:C("flex-[1.5] flex items-center justify-center gap-2 py-2.5 rounded-xl font-bold text-[10px] shadow-xl transition-all active:scale-95",d==="practice"?"bg-slate-800 text-slate-600 cursor-not-allowed":"bg-emerald-400/90 hover:bg-emerald-400 text-white shadow-emerald-400/20 font-black tracking-widest"),children:[t.jsx(ce,{size:12,fill:"currentColor"})," RUN SELECTED"]})]}),d==="simulation"&&t.jsxs("div",{className:"flex flex-col gap-2",children:[t.jsxs("button",{onClick:x,className:C("flex items-center justify-center gap-2 px-3 py-2 rounded-lg bg-slate-900/40 border transition-all hover:bg-emerald-500/10",m?"border-slate-700 text-slate-500":"border-emerald-500/20 text-emerald-300"),children:[t.jsxs("div",{className:C("w-4 h-4 rounded flex items-center justify-center transition-all shrink-0",i?"bg-emerald-400":m?"border border-slate-700 bg-slate-800/50":"border border-emerald-400/30 bg-emerald-400/10"),children:[i&&t.jsx("div",{className:"w-1.5 h-1.5 bg-white rounded-full"}),!i&&!m&&t.jsx("div",{className:"w-1.5 h-1.5 bg-emerald-400/80 rounded-sm"})]}),t.jsxs("span",{className:"text-[11px] font-black uppercase tracking-widest",children:[i?"Unselect":m?"Select All":"Reset Selection"," (",a.size,"/",g.length,")"]})]}),t.jsx("div",{className:"grid grid-cols-2 gap-1.5",children:g.map(f=>t.jsxs("label",{className:C("flex items-center gap-2 px-2 py-1.5 rounded-lg border transition-all cursor-pointer group",a.has(f.id)?"bg-emerald-600/10 border-emerald-500/30 text-white":"bg-slate-900/20 border-white/5 text-slate-500 hover:text-slate-400 hover:border-white/10"),children:[t.jsx("input",{type:"checkbox",className:"hidden",checked:a.has(f.id),onChange:()=>s(f.id)}),t.jsx("div",{className:C("w-3 h-3 rounded flex items-center justify-center transition-all",a.has(f.id)?"bg-emerald-400 shadow-[0_0_4px_rgba(52,211,153,0.3)]":"border border-slate-700 bg-slate-800/50 group-hover:border-slate-600"),children:a.has(f.id)&&t.jsx("div",{className:"w-1 h-1 bg-white rounded-full"})}),t.jsx(f.icon,{size:11,className:a.has(f.id)?"text-emerald-400":"text-slate-600"}),t.jsx("span",{className:"text-[10px] font-black uppercase tracking-tighter whitespace-nowrap",children:f.label})]},f.id))})]}),t.jsxs("div",{className:"mt-auto pt-3 border-t border-slate-700/50",children:[t.jsxs("div",{className:"flex justify-between items-center mb-2 px-1",children:[t.jsx("span",{className:"text-[9px] font-bold text-slate-500 uppercase tracking-widest",children:"Select Order (N x N)"}),t.jsxs("button",{onClick:()=>h(!p),className:C("flex items-center gap-1.5 px-2 py-1 rounded-md text-[9px] font-black uppercase tracking-tighter transition-all border",p?"bg-slate-700 border-white/20 text-slate-300":"bg-emerald-500/30 border-emerald-400/50 text-emerald-300 hover:bg-emerald-500/50"),children:[t.jsx(ve,{size:10}),p?"Hide Matrix":"Engine Matrix"]})]}),t.jsx("div",{className:"grid grid-cols-4 gap-1.5",children:o.map(f=>t.jsxs("button",{onClick:()=>e(f),className:C("py-2 rounded-lg font-bold text-xs transition-all border",r===f?"bg-emerald-400/30 border-emerald-400/40 text-emerald-200 shadow-md shadow-emerald-500/10":"bg-slate-900/30 border-transparent text-slate-500 hover:text-slate-400"),children:[f,"x",f]},f))})]})]})},lt=({algoId:r,size:e,triggerRun:a,triggerReset:s,speed:x,steps:d,onComplete:n})=>{const[u,l]=k.useState({attempts:0,time:0}),[c,p]=k.useState(!1),[h,g]=k.useState(!1),i={dynamic:{name:"Heuristic CSP",desc:"Constraint satisfaction algorithm",color:"text-emerald-400",bg:"bg-emerald-400"},heuristic:{name:"Smart Backtrack",desc:"Forced-assignment backtracking",color:"text-teal-400",bg:"bg-teal-400"},metric:{name:"Metric Backtrack",desc:"Distance-based pruning",color:"text-lime-400",bg:"bg-lime-400"},backtrack:{name:"Recursive Backtrack",desc:"Classic recursive search",color:"text-rose-400",bg:"bg-rose-500"},brute:{name:"Pure Brute Force",desc:"Exhaustive permutation search",color:"text-slate-400",bg:"bg-slate-500"},formula:{name:"Direct Formula",desc:"Static magic square construction",color:"text-yellow-400",bg:"bg-yellow-500"},swing:{name:"Formula Swing",desc:"Dynamic Matrix Rotation",color:"text-sky-400",bg:"bg-sky-500"}}[r]||{name:r,desc:"",color:"text-white",bg:"bg-white"};return t.jsxs("div",{className:C("p-5 rounded-2xl border transition-all duration-500",h?"bg-slate-700/30 border-indigo-500/30 scale-105":"bg-slate-900/40 border-white/5"),children:[t.jsxs("div",{className:"flex justify-between items-start mb-6",children:[t.jsxs("div",{className:"flex items-start gap-3",children:[t.jsx("div",{className:C("w-1 h-8 rounded-full",i.bg)}),t.jsxs("div",{children:[t.jsx("h5",{className:C("text-[10px] font-black uppercase tracking-[0.25em] mb-1.5",i.color),children:i.name}),t.jsx("p",{className:"text-[10px] text-slate-500 font-bold leading-tight",children:i.desc})]})]}),c&&t.jsx(ke,{size:14,className:"text-emerald-500 bg-emerald-500/10 rounded-full p-0.5"})]}),t.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[t.jsxs("div",{className:"flex flex-col",children:[t.jsx("span",{className:"text-[10px] text-slate-500 uppercase font-black tracking-tighter mb-1",children:"Total Steps"}),t.jsxs("span",{className:"text-xl font-mono text-white flex items-baseline gap-1",children:[c?u.attempts.toLocaleString():"0",t.jsx("span",{className:"text-[10px] text-slate-500 font-bold tracking-normal",children:"steps"})]})]}),t.jsxs("div",{className:"flex flex-col",children:[t.jsx("span",{className:"text-[10px] text-slate-500 uppercase font-black tracking-tighter mb-1",children:"Elapsed Time"}),t.jsxs("span",{className:"text-xl font-mono text-white flex items-baseline gap-1",children:[c?(u.time/1e3).toFixed(3):"0.000",t.jsx("span",{className:"text-[10px] text-slate-500 font-bold tracking-normal",children:"sec"})]})]})]}),t.jsx("div",{className:"mt-4 h-1 bg-slate-800 rounded-full overflow-hidden",children:t.jsx("div",{style:{width:c?"100%":"0%"},className:C("h-full transition-all duration-1000 ease-out",i.bg)})})]})},nt=[3,4,5,6,7,8,9,10],he=[{id:"formula",label:"Formula",icon:Fe},{id:"swing",label:"Swing",icon:ae},{id:"dynamic",label:"CSP Solver",icon:le},{id:"heuristic",label:"Smart BT",icon:ie},{id:"metric",label:"Metric BT",icon:ee},{id:"backtrack",label:"Recursive",icon:ae},{id:"brute",label:"Brute Force",icon:se}];function ut({speed:r}){const[e,a]=k.useState(8),[s,x]=k.useState(new Set(["swing"])),[d,n]=k.useState("simulation"),[u,l]=k.useState(0),[c,p]=k.useState(0),[h,g]=k.useState(new Set),[o,i]=k.useState(!1),[m,f]=k.useState([]),b=de.useRef({}),P=de.useRef(new Set),[v,A]=k.useState(!1),R=j=>{x(y=>{const S=new Set(y);return S.has(j)?S.delete(j):S.add(j),S})},V=()=>{const j=he.map(y=>y.id);s.size===j.length?x(new Set):x(new Set(j))},E=k.useMemo(()=>({dynamic:Q(e,"dynamic"),heuristic:Q(e,"heuristic"),metric:Q(e,"metric"),backtrack:Q(e,"backtrack"),brute:Q(e,"brute"),formula:Q(e,"formula"),swing:Q(e,"swing")}),[e]),J=()=>{b.current={},P.current=new Set(s),g(new Set(s)),i(!1),l(j=>j+1)},N=()=>{P.current=new Set,g(new Set),i(!1),p(j=>j+1)},Z=(j,y)=>{if(d!=="simulation")return;const S={dynamic:{name:"Heuristic CSP"},heuristic:{name:"Smart Backtrack"},metric:{name:"Metric Backtrack"},backtrack:{name:"Recursive Backtrack"},brute:{name:"Pure Brute Force"},formula:{name:"Direct Formula"},swing:{name:"Formula Swing"}};P.current.has(j)&&(b.current[j]={id:j,name:S[j]?.name||j,attempts:y.attempts,time:y.time,complexity:S[j]?.complexity},P.current.delete(j),g(w=>{const I=new Set(w);return I.delete(j),I}),P.current.size===0&&Object.keys(b.current).length>0&&f(Object.values(b.current)))},L=["formula","dynamic","heuristic","metric","backtrack","brute","swing"],D=[...s].sort((j,y)=>L.indexOf(j)-L.indexOf(y)),B=[];d==="simulation"?D.forEach(j=>{B.push({type:"board",algoId:j})}):B.push({type:"board",algoId:"formula"});const G=Math.min(2,B.length);return B.splice(G,0,{type:"control"}),t.jsxs("div",{className:"max-w-7xl mx-auto px-6 pt-0 pb-28 lg:pb-8",children:[t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:B.map((j,y)=>j.type==="control"?t.jsx("div",{className:"hidden lg:block",children:t.jsx(st,{selectedSize:e,setSelectedSize:a,selectedAlgos:s,toggleAlgo:R,toggleAllAlgos:V,mainMode:d,setMainMode:n,onRunAll:J,onResetAll:N,isRunningAny:h.size>0,showAlgoTable:v,setShowAlgoTable:A,simulationAlgos:he,ALL_SIZES:nt})},"control-wrapper"):t.jsx(We,{size:e,mainMode:d,algoMode:j.algoId,steps:E[j.algoId]||[],speed:r,triggerRun:u,triggerReset:c},`${e}-${j.algoId}-${c}-${y}`))}),d==="simulation"&&D.length>0&&t.jsxs("div",{className:"hidden md:block mt-8 overflow-hidden bg-slate-800/40 backdrop-blur-xl border border-white/5 rounded-3xl shadow-2xl",children:[t.jsxs("div",{className:"bg-slate-900/50 px-4 py-3 border-b border-white/5 flex items-center justify-between",children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("div",{className:"p-2 bg-emerald-500/20 rounded-lg text-emerald-400",children:t.jsx(se,{size:20})}),t.jsx("h4",{className:"text-sm font-black text-white uppercase tracking-widest",children:"Real-time Performance Analysis"})]}),t.jsxs("div",{className:"flex items-center gap-2 text-[10px] font-bold text-slate-500 uppercase tracking-tighter",children:[t.jsx("span",{className:"w-2 h-2 rounded-full bg-emerald-500 animate-pulse"}),"LIVE RANKING"]})]}),t.jsx("div",{className:"p-4",children:t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:D.map(j=>t.jsx(lt,{algoId:j,size:e,triggerRun:u,triggerReset:c,speed:r,steps:E[j]||[],onComplete:y=>Z(j,y)},`score-${j}`))})})]}),d!=="simulation"&&t.jsx("div",{className:"mt-12 flex flex-col gap-6",children:t.jsxs("div",{className:"bg-emerald-950/20 border border-emerald-500/20 rounded-3xl p-8 flex flex-col md:flex-row items-center gap-8 shadow-2xl relative overflow-hidden group",children:[t.jsx("div",{className:"p-5 bg-emerald-500/20 rounded-2xl text-emerald-300 shadow-xl shadow-emerald-500/10",children:t.jsx(ye,{size:40})}),t.jsxs("div",{className:"text-center md:text-left flex-1",children:[t.jsx("h4",{className:"text-emerald-300 font-black text-xl mb-2 uppercase tracking-widest",children:"Algorithm Comparison Lab"}),t.jsxs("p",{className:"text-emerald-100/60 text-sm leading-relaxed max-w-2xl font-semibold",children:["In LAB mode, observe how various logic engines operate within the same ",t.jsxs("span",{className:"text-emerald-400",children:[e,"x",e]})," environment.",t.jsx("br",{className:"hidden md:block"}),"Compare the efficiency of each algorithm in real-time, from the intuitive Direct Formula to complex Backtracking."]})]})]})}),t.jsx(ge,{children:v&&t.jsx(at,{onClose:()=>A(!1)})}),t.jsx(tt,{selectedSize:e,setSelectedSize:a,selectedAlgos:s,toggleAlgo:R,toggleAllAlgos:V,onRunAll:J,onResetAll:N,isRunningAny:h.size>0,mainMode:d,setMainMode:n,showAlgoTable:v,setShowAlgoTable:A}),o&&t.jsx(rt,{results:m,onClose:()=>i(!1)})]})}export{ut as default};
