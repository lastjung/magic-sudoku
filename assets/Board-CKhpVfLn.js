import{c as B,j as e,L as me,d as _,a as o,b as M,H as fe,f as pe,R as be}from"./index-R2r5xH3J.js";import{R as Q,Z as V,S as he,P as te,A as ge,T as ye,C as je}from"./zap-B1CBxO5b.js";import{B as se,G as ke,R as X}from"./refresh-cw-BTTTSMtT.js";const ve=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],Ne=B("circle-alert",ve);const we=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],Se=B("circle-check",we);const Ce=[["path",{d:"M21 21H8a2 2 0 0 1-1.42-.587l-3.994-3.999a2 2 0 0 1 0-2.828l10-10a2 2 0 0 1 2.829 0l5.999 6a2 2 0 0 1 0 2.828L12.834 21",key:"g5wo59"}],["path",{d:"m5.082 11.09 8.828 8.828",key:"1wx5vj"}]],_e=B("eraser",Ce);const Re=[["path",{d:"M13 21h8",key:"1jsn5i"}],["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]],z=B("pen-line",Re);const Ae=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],Ee=B("triangle-alert",Ae),I=0;function ee(t="easy",s=9){const r=Math.sqrt(s);let a,l=!1,c=0;for(;!l&&c<10;)a=Array.from({length:s},()=>Array(s).fill(I)),Ie(a,s,r),le(a,s,r)&&(l=!0),c++;l||(a=Array.from({length:s},()=>Array.from({length:s},(x,d)=>d%s+1)));const n=a.map(x=>[...x]);let u;return s===9?u={easy:30,medium:45,hard:55}[t]||30:u={easy:4,medium:8,hard:10}[t]||4,Te(a,u,s),{initial:a,solution:n,size:s}}function Ie(t,s,r){for(let a=0;a<s;a=a+r)Le(t,a,a,s,r)}function Le(t,s,r,a,l){let c;for(let n=0;n<l;n++)for(let u=0;u<l;u++){do c=Math.floor(Math.random()*a)+1;while(!re(t,s,r,c,l));t[s+n][r+u]=c}}function re(t,s,r,a,l){for(let c=0;c<l;c++)for(let n=0;n<l;n++)if(t[s+c][r+n]===a)return!1;return!0}function ae(t,s,r,a,l,c){for(let x=0;x<l;x++)if(t[s][x]===a)return!1;for(let x=0;x<l;x++)if(t[x][r]===a)return!1;const n=s-s%c,u=r-r%c;return re(t,n,u,a,c)}function le(t,s,r){let a=-1,l=-1,c=!1;for(let n=0;n<s;n++){for(let u=0;u<s;u++)if(t[n][u]===I){a=n,l=u,c=!0;break}if(c)break}if(!c)return!0;for(let n=1;n<=s;n++)if(ae(t,a,l,n,s,r)){if(t[a][l]=n,le(t,s,r))return!0;t[a][l]=I}return!1}function J(t,s,r,a,l){const c=[];for(let n=1;n<=a;n++)ae(t,s,r,n,a,l)&&c.push(n);return c}function*Pe(t,s=9,r=new Set(["backtrack"])){const a=Math.sqrt(s),l=t.map(c=>[...c]);yield*ne(l,s,a,r)}function*ne(t,s,r,a){const l=[];if(a.has("naked")){let x=!0;for(;x;){x=!1;for(let d=0;d<s;d++)for(let b=0;b<s;b++)if(t[d][b]===I){const g=J(t,d,b,s,r);if(g.length===0){for(const{r:y,c:k}of l)t[y][k]=I;return!1}if(g.length===1){const y=g[0];t[d][b]=y,l.push({r:d,c:b}),x=!0,yield{type:"try",r:d,c:b,val:y,board:t.map(k=>[...k]),method:"naked"}}}}}let c=-1,n=-1,u=[];if(a.has("dynamic")){let x=s+1;for(let d=0;d<s;d++)for(let b=0;b<s;b++)if(t[d][b]===I){const g=J(t,d,b,s,r);if(g.length===0){for(const{r:y,c:k}of l)t[y][k]=I;return!1}g.length<x&&(x=g.length,c=d,n=b,u=g)}}else{let x=!1;for(let d=0;d<s;d++){for(let b=0;b<s;b++)if(t[d][b]===I){c=d,n=b,u=J(t,d,b,s,r),x=!0;break}if(x)break}}if(c===-1)return!0;for(const x of u){if(t[c][n]=x,yield{type:"try",r:c,c:n,val:x,board:t.map(d=>[...d]),method:"backtrack"},yield*ne(t,s,r,a))return!0;t[c][n]=I,yield{type:"backtrack",r:c,c:n,val:0,board:t.map(d=>[...d])}}for(const{r:x,c:d}of l)t[x][d]=I;return!1}function Te(t,s,r){let a=s*2,l=0;for(;l<s&&a>0;){let c=Math.floor(Math.random()*(r*r)),n=Math.floor(c/r),u=c%r;t[n][u]!==I&&(t[n][u]=I,l++),a--}}const $e=({selectedSize:t,setSelectedSize:s,difficulty:r,setDifficulty:a,selectedAlgos:l,toggleAlgo:c,toggleAllAlgos:n,mainMode:u,setMainMode:x,onRun:d,onReset:b,onNewGame:g,isRunning:y})=>{const k=[4,9],v=[{id:"backtrack",label:"Backtrack",icon:Q},{id:"naked",label:"Naked Single",icon:V},{id:"dynamic",label:"CSP Solver",icon:se}],$=l.size===v.length,N=l.size===0;return e.jsxs("div",{className:"bg-slate-800/60 backdrop-blur-xl border border-amber-500/30 rounded-xl p-4 flex flex-col gap-3 shadow-2xl relative overflow-hidden group h-full",children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-amber-500/5 to-transparent pointer-events-none"}),e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx(me,{size:16,className:"text-amber-400 fill-amber-400/20"}),e.jsx("h3",{className:"text-xs font-bold text-white uppercase tracking-widest",children:"Lab Control"})]}),e.jsx("div",{className:"grid grid-cols-2 gap-1 p-1 bg-slate-900/50 rounded-lg border border-white/5",children:[{id:"simulation",label:"SIMULATION",icon:V},{id:"practice",label:"PRACTICE",icon:ke}].map(i=>e.jsxs("button",{onClick:()=>x(i.id),className:_("flex items-center justify-center gap-1.5 py-2 rounded-md text-[9px] font-bold tracking-widest transition-all",u===i.id?"bg-amber-400/20 border border-amber-400/30 text-amber-300 shadow-lg shadow-amber-500/10":"bg-transparent text-slate-500 hover:text-slate-400 hover:bg-white/5"),children:[e.jsx(i.icon,{size:11})," ",i.label]},i.id))}),e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("button",{onClick:b,className:"flex-1 flex items-center justify-center gap-2 py-2.5 bg-slate-700/50 hover:bg-slate-700 text-slate-300 rounded-xl font-bold text-[10px] border border-slate-600/50 transition-all active:scale-95",title:"Reset All Progress",children:[e.jsx(Q,{size:12})," RESET"]}),e.jsxs("button",{onClick:g,className:"flex-1 flex items-center justify-center gap-2 py-2.5 bg-emerald-500/10 hover:bg-emerald-500/20 text-emerald-400 rounded-xl font-bold text-[10px] border border-emerald-500/20 transition-all active:scale-95",title:"Generate Global New Puzzle",children:[e.jsx(X,{size:12})," NEW PUZZLE"]})]}),y?e.jsxs("button",{disabled:!0,className:"w-full flex items-center justify-center gap-2 py-3 bg-slate-700/50 text-slate-300 rounded-xl font-bold text-[10px] border border-white/10",children:[e.jsx(he,{size:12,fill:"currentColor"})," HOLDING LAB..."]}):e.jsxs("button",{onClick:d,disabled:u==="practice",className:_("w-full flex items-center justify-center gap-2 py-3 rounded-xl font-bold text-[11px] shadow-xl transition-all active:scale-95",u==="practice"?"bg-slate-800 text-slate-600 cursor-not-allowed":"bg-amber-500 hover:bg-amber-400 text-white shadow-amber-500/20 tracking-[0.2em]"),children:[e.jsx(te,{size:13,fill:"currentColor"})," RUN ALL LABS"]})]}),u==="simulation"&&e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx("label",{className:"text-[9px] font-bold text-slate-500 uppercase tracking-widest pl-1",children:"Logic Engines"}),e.jsxs("button",{onClick:n,className:_("flex items-center justify-center gap-2 px-3 py-2 rounded-lg bg-slate-900/40 border transition-all hover:bg-amber-500/10",N?"border-slate-700 text-slate-500":"border-amber-500/20 text-amber-300"),children:[e.jsxs("div",{className:_("w-4 h-4 rounded flex items-center justify-center transition-all shrink-0",$?"bg-amber-400":N?"border border-slate-700 bg-slate-800/50":"border border-amber-400/30 bg-amber-400/10"),children:[$&&e.jsx("div",{className:"w-1.5 h-1.5 bg-white rounded-full"}),!$&&!N&&e.jsx("div",{className:"w-1.5 h-1.5 bg-amber-400/80 rounded-sm"})]}),e.jsx("span",{className:"text-[11px] font-bold uppercase tracking-widest",children:$?"Unselect":N?"Select All":"Reset Selection"})]}),e.jsx("div",{className:"grid grid-cols-1 gap-1.5",children:v.map(i=>e.jsxs("label",{className:_("flex items-center gap-2 px-2 py-2 rounded-lg border transition-all cursor-pointer group",l.has(i.id)?"bg-amber-600/10 border-amber-500/30 text-white":"bg-slate-900/20 border-white/5 text-slate-500 hover:text-slate-400 hover:border-white/10"),children:[e.jsx("input",{type:"checkbox",className:"hidden",checked:l.has(i.id),onChange:()=>c(i.id)}),e.jsx("div",{className:_("w-3 h-3 rounded flex items-center justify-center transition-all",l.has(i.id)?"bg-amber-400 shadow-[0_0_4px_rgba(251,191,36,0.3)]":"border border-slate-700 bg-slate-800/50 group-hover:border-slate-600"),children:l.has(i.id)&&e.jsx("div",{className:"w-1 h-1 bg-white rounded-full"})}),e.jsx(i.icon,{size:11,className:l.has(i.id)?"text-amber-400":"text-slate-600"}),e.jsx("span",{className:"text-[10px] font-bold uppercase tracking-tighter whitespace-nowrap",children:i.label})]},i.id))})]}),e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx("label",{className:"text-[9px] font-bold text-slate-500 uppercase tracking-widest pl-1",children:"Difficulty"}),e.jsx("div",{className:"grid grid-cols-3 gap-1.5",children:["easy","medium","hard"].map(i=>e.jsx("button",{onClick:()=>a(i),className:_("py-2 rounded-lg border transition-all text-[10px] font-bold uppercase tracking-widest",r===i?"bg-amber-500 border-amber-400 text-white shadow-lg shadow-amber-500/20 scale-105 z-10":"bg-slate-900/20 border-white/5 text-slate-500 hover:text-slate-400"),children:i},i))})]}),e.jsxs("div",{className:"mt-auto pt-3 border-t border-slate-700/50",children:[e.jsx("div",{className:"flex justify-between items-center mb-2 px-1",children:e.jsx("span",{className:"text-[9px] font-bold text-slate-500 uppercase tracking-widest",children:"Select Order (N x N)"})}),e.jsx("div",{className:"grid grid-cols-2 gap-1.5",children:k.map(i=>e.jsxs("button",{onClick:()=>s(i),className:_("py-2 rounded-lg font-bold text-xs transition-all border",t===i?"bg-amber-400/30 border-amber-400/40 text-amber-200 shadow-md shadow-amber-500/10":"bg-slate-900/30 border-transparent text-slate-500 hover:text-slate-400"),children:[i,"x",i]},i))})]})]})},De=({initialBoard:t,size:s,speed:r=200,selectedAlgos:a,onComplete:l,triggerRun:c=0,triggerReset:n=0})=>{const[u,x]=o.useState(t),[d,b]=o.useState(!1),[g,y]=o.useState({steps:0,time:0}),[k,v]=o.useState(null),[$,N]=o.useState("Ready..."),i=o.useRef(null),A=o.useRef(null),L=o.useRef(0),E=o.useRef(u),D=o.useRef(s),p=o.useRef(a),C=o.useRef(0),S=o.useRef(0);o.useEffect(()=>{E.current=u},[u]),o.useEffect(()=>{D.current=s},[s]),o.useEffect(()=>{p.current=a},[a]);const P=o.useCallback(()=>{b(!1),v(null),A.current&&(clearInterval(A.current),A.current=null)},[]),F=o.useCallback(()=>{d||i.current&&!A.current||(i.current||(i.current=Pe(E.current,D.current,p.current),L.current=performance.now(),M.init()),b(!0),A.current=setInterval(()=>{const R=i.current.next();if(R.done){A.current&&(clearInterval(A.current),A.current=null),b(!1),v(null),N("Puzzle Completed!"),M.playSuccess(),i.current=null,l&&l(!0);return}const w=R.value;x(w.board),y(K=>({steps:K.steps+1,time:performance.now()-L.current})),v({r:w.r,c:w.c,val:w.val,type:w.type,method:w.method}),w.type==="backtrack"?N(`Backtracking at (${w.r}, ${w.c})...`):w.method==="naked"?(N(`Inference: Found Naked Single ${w.val}`),M.playNote(w.val+10)):(N(`Trying ${w.val} at (${w.r}, ${w.c})`),M.playNote(w.val))},r))},[r,d,l]);o.useEffect(()=>{Array.isArray(t)&&x(t.map(R=>Array.isArray(R)?[...R]:[])),y({steps:0,time:0}),N("Ready..."),i.current=null,P()},[t,P]),o.useEffect(()=>{c>0&&c!==C.current&&(C.current=c,F())},[c,F]),o.useEffect(()=>{n>0&&n!==S.current&&(S.current=n,P(),x(t.map(R=>[...R])),y({steps:0,time:0}),v(null),N("Ready..."),i.current=null)},[n,P,t]);const Z=o.useCallback(()=>{P(),Array.isArray(t)&&x(t.map(R=>Array.isArray(R)?[...R]:[])),y({steps:0,time:0}),v(null),N("Ready..."),i.current=null},[P,t]);return{board:u,isPlaying:d,stats:g,activeCell:k,dynamicDesc:$,runSimulation:F,stop:P,reset:Z}},Ge=({size:t,mainMode:s,initialBoard:r=[],solution:a,algoId:l,speed:c,triggerRun:n,triggerReset:u,onReset:x})=>{const d=Math.sqrt(t),b=o.useMemo(()=>new Set([l]),[l]),[g,y]=o.useState([]),[k,v]=o.useState(null),[$,N]=o.useState(0),[i,A]=o.useState(!1),[L,E]=o.useState(!1);o.useEffect(()=>{r&&r.length>0&&(y(r.map(m=>[...m])),N(0),E(!1),v(null))},[r]);const{board:D,isPlaying:p,stats:C,activeCell:S,dynamicDesc:P,runSimulation:F,stop:Z,reset:R}=De({initialBoard:r&&r.length>0?r:Array(t).fill().map(()=>Array(t).fill(0)),size:t,speed:c,onComplete:m=>{E(m),m&&M.playSuccess()},selectedAlgos:b,triggerRun:n,triggerReset:u}),w=o.useCallback(()=>{s==="simulation"?(R(),E(!1)):(y(r.map(m=>[...m])),N(0),E(!1),v(null))},[s,R,r]),K=o.useMemo(()=>{const m=s==="simulation"?D:g;return!m||m.length===0?"0.0":(m.reduce((h,j)=>h+j.filter(T=>T!==0).length,0)/(t*t)*100).toFixed(1)},[D,g,s,t]),ce=(m,f)=>{s!=="simulation"&&(r?.[m]?.[f]!==0&&r?.[m]?.[f]!==void 0||v(h=>h?.r===m&&h?.c===f?null:{r:m,c:f}))},O=o.useCallback(m=>{if(!k||s!=="practice"||L)return;const{r:f,c:h}=k;if(r?.[f]?.[h]!==0&&r?.[f]?.[h]!==void 0)return;const j=g.map(T=>[...T]);if(m===0){j[f][h]=0,y(j);return}j[f][h]!==m&&(j[f][h]=m,y(j),a&&a[f][h]===m?j.every((T,W)=>T.every((q,U)=>q===a[W][U]))&&(E(!0),M.playSuccess()):N(T=>T+1))},[k,s,L,r,g,a]);o.useEffect(()=>{const m=f=>{if(!(s!=="practice"||!k))if(f.key>="1"&&f.key<="9"){const h=parseInt(f.key);h<=t&&O(h)}else(f.key==="Backspace"||f.key==="Delete"||f.key==="0")&&O(0)};return window.addEventListener("keydown",m),()=>window.removeEventListener("keydown",m)},[k,s,O,t]);const G=s==="simulation"?D:g,oe=o.useMemo(()=>{if(!G)return 0;let m=0;return G.forEach(f=>f.forEach(h=>{h===0&&m++})),m},[G]),ie=()=>t<=4?"w-16 h-16 text-2xl":t<=9?"w-10 h-10 text-xl":"w-8 h-8 text-xs",de=G&&G.length>0?G:Array(t).fill().map(()=>Array(t).fill(0));return e.jsxs("div",{className:_("bg-slate-800/40 backdrop-blur-md border rounded-xl p-1.5 flex flex-col shadow-xl transition-all group overflow-hidden h-full",L?"border-amber-500/50 bg-amber-500/10 shadow-[0_0_30px_rgba(245,158,11,0.15)]":"border-slate-700/50"),children:[e.jsxs("div",{className:"flex justify-between items-center mb-1.5 min-h-[30px] px-1",children:[e.jsx("div",{className:"flex items-center gap-2",children:(()=>{const m={backtrack:{label:"Backtrack Solver",icon:X,color:"text-amber-400"},naked:{label:"Naked Single Lab",icon:V,color:"text-purple-400"},dynamic:{label:"CSP Heuristic Lab",icon:se,color:"text-amber-400"},practice:{label:"Practice Mode",icon:z,color:"text-sky-400"}},h=m[s==="simulation"?l:"practice"]||m.backtrack,j=h.icon;return e.jsxs(e.Fragment,{children:[e.jsx(j,{size:14,className:_("opacity-70",h.color)}),e.jsx("h3",{className:_("text-[10px] font-bold uppercase tracking-widest",h.color,"opacity-70"),children:h.label})]})})()}),e.jsxs("div",{className:"flex items-center gap-1.5",children:[e.jsx("button",{onClick:w,className:"p-1.5 rounded-lg bg-slate-700/30 text-slate-500 hover:text-amber-400 border border-white/5 transition-all active:scale-95 mr-1",title:"Reset Current Board",children:e.jsx(Q,{size:13})}),s==="simulation"&&e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:x,className:"p-1.5 rounded-lg bg-slate-700/30 text-slate-500 hover:text-emerald-400 border border-white/5 transition-all active:scale-95 mr-1",title:"Generate Global New Puzzle",children:e.jsx(X,{size:13})}),e.jsx("div",{className:"flex items-center",children:p?e.jsx("button",{onClick:Z,className:"p-1.5 rounded-lg bg-rose-500/20 text-rose-400 hover:bg-rose-500/30 transition-all active:scale-95 border border-rose-500/20 shadow-[0_0_15px_rgba(244,63,94,0.2)]",children:e.jsx("div",{className:"w-3 h-3 bg-current rounded-sm shadow-inner"})}):e.jsx("button",{onClick:()=>F(),className:"p-1.5 rounded-lg bg-amber-400/10 text-amber-400/60 hover:bg-amber-400/20 border border-amber-500/10 transition-all active:scale-95",children:e.jsx(te,{size:14,fill:"currentColor"})})})]})]})]}),s==="simulation"&&e.jsxs("div",{className:"flex justify-between px-4 py-2.5 border-b border-slate-700/30 bg-slate-900/40 mb-2 rounded-t-lg",children:[e.jsxs("div",{className:"flex items-center gap-1.5",children:[e.jsx("div",{className:"w-2 h-2 rounded-full bg-amber-400 shadow-[0_0_8px_rgba(251,191,36,0.6)] animate-pulse"}),e.jsx("span",{className:"text-[9px] text-slate-400 font-bold uppercase tracking-widest",children:"Active"})]}),e.jsxs("div",{className:"flex items-center gap-1.5",children:[e.jsx("div",{className:"w-2 h-2 rounded-full bg-purple-400 shadow-[0_0_8px_rgba(168,85,247,0.6)]"}),e.jsx("span",{className:"text-[9px] text-slate-400 font-bold uppercase tracking-widest",children:"Forced"})]}),e.jsxs("div",{className:"flex items-center gap-1.5",children:[e.jsx("div",{className:"w-2 h-2 rounded-full bg-rose-500 shadow-[0_0_8px_rgba(244,63,94,0.6)]"}),e.jsx("span",{className:"text-[9px] text-slate-400 font-bold uppercase tracking-widest",children:"Backtrack"})]}),e.jsxs("div",{className:"flex items-center gap-1.5",children:[e.jsx("div",{className:"w-2 h-2 rounded-full bg-emerald-400 shadow-[0_0_8px_rgba(16,185,129,0.6)]"}),e.jsx("span",{className:"text-[9px] text-slate-400 font-bold uppercase tracking-widest",children:"Success"})]})]}),e.jsx("div",{className:"flex flex-col items-center justify-center relative p-2 flex-1",children:e.jsx("div",{className:"grid gap-1.5 bg-slate-900/40 p-1.5 rounded-xl border border-slate-700/50 shadow-inner",style:{gridTemplateColumns:`repeat(${t}, minmax(0, 1fr))`},children:de.flatMap((m,f)=>m.map((h,j)=>{const T=r?.[f]?.[j]!==0&&r?.[f]?.[j]!==void 0,W=k?.r===f&&k?.c===j,q=s==="simulation"&&S?.r===f&&S?.c===j,U=q&&S?.type==="backtrack",H=q&&S?.type==="try"&&S?.method==="naked",Y=q&&S?.type==="try"&&!H,ue=(j+1)%d===0&&j!==t-1,xe=(f+1)%d===0&&f!==t-1;return e.jsxs("div",{onClick:()=>ce(f,j),className:_("flex items-center justify-center rounded-lg font-semibold transition-all relative overflow-hidden select-none cursor-pointer",ie(),T?"bg-slate-700/40 text-slate-300 border-2 border-slate-600/30 shadow-none":"bg-slate-800/80 text-emerald-300 border border-slate-700/50 shadow-inner",ue&&"mr-1",xe&&"mb-1",H&&"bg-purple-500/30 text-purple-200 ring-2 ring-purple-400 shadow-[0_0_20px_rgba(168,85,247,0.5)] z-20 scale-110",Y&&"bg-amber-500/30 text-amber-100 ring-2 ring-amber-400 shadow-[0_0_20px_rgba(251,191,36,0.5)] z-20 scale-110",U&&"bg-rose-500/40 text-white ring-2 ring-rose-500 shadow-[0_0_25px_rgba(244,63,94,0.6)] z-20 animate-pulse",L&&!T&&"bg-emerald-500/30 text-emerald-100 ring-1 ring-emerald-500 shadow-[0_0_15px_rgba(16,185,129,0.3)] scale-100",W&&"ring-2 ring-amber-500 bg-amber-500/20 z-10 scale-105",s==="practice"&&!T&&h!==0&&a?.[f]?.[j]!==h&&"bg-rose-900/40 text-rose-400 ring-2 ring-rose-500 animate-bounce"),children:[h!==0?h:"",(Y||H||U)&&e.jsx("div",{className:_("absolute inset-0 opacity-20 animate-pulse",U?"bg-rose-500":H?"bg-purple-400":"bg-amber-400")})]},`cell-${f}-${j}`)}))})}),s==="simulation"?e.jsxs("div",{className:"flex flex-col mt-2",children:[e.jsx("div",{className:"h-10 flex items-center justify-center mb-2 px-4 bg-slate-900/80 rounded-xl border border-amber-500/20 shadow-inner group-hover:border-amber-500/40 transition-all",children:e.jsx("span",{className:"text-[11px] font-bold uppercase tracking-[0.15em] text-center text-amber-400 drop-shadow-[0_0_8px_rgba(251,191,36,0.3)]",children:P||"Ready for Simulation"})}),e.jsxs("div",{className:"grid grid-cols-4 gap-2 py-3 border-t border-slate-700/50 bg-slate-900/30 rounded-b-xl",children:[e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx(ge,{size:14,className:"text-rose-400 mb-1"}),e.jsx("span",{className:"text-[9px] text-slate-500 font-bold uppercase",children:"Steps"}),e.jsx("span",{className:"text-xs font-mono text-slate-200",children:C?.steps?.toLocaleString()||0})]}),e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx(ye,{size:14,className:"text-amber-500 mb-1"}),e.jsx("span",{className:"text-[9px] text-slate-500 font-bold uppercase",children:"Progress"}),e.jsxs("span",{className:"text-xs font-mono text-amber-200",children:[K,"%"]})]}),e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx(fe,{size:14,className:"text-cyan-400 mb-1"}),e.jsx("span",{className:"text-[9px] text-slate-500 font-bold uppercase",children:"Solving"}),e.jsxs("span",{className:"text-xs font-mono text-slate-200",children:[oe," Left"]})]}),e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx(je,{size:14,className:"text-sky-400 mb-1"}),e.jsx("span",{className:"text-[9px] text-slate-500 font-bold uppercase",children:"Time"}),e.jsxs("span",{className:"text-xs font-mono text-slate-200",children:[(C?.time/1e3).toFixed(2)||"0.00","s"]})]})]})]}):e.jsxs("div",{className:"mt-4 flex flex-col items-center gap-3 border-t border-slate-700/50 pt-4 px-2",children:[e.jsxs("div",{className:"w-full flex justify-between items-center",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ne,{size:12,className:"text-rose-400"}),e.jsxs("div",{className:"text-rose-400 text-[10px] font-bold uppercase tracking-wider",children:["Mistakes: ",$]})]}),L&&e.jsxs("div",{className:"flex items-center gap-1.5 px-2 py-0.5 bg-amber-500/20 rounded-full border border-amber-500/30",children:[e.jsx(Se,{size:10,className:"text-amber-400"}),e.jsx("span",{className:"text-amber-400 text-[10px] font-bold uppercase animate-pulse",children:"Perfect!"})]})]}),e.jsxs("div",{className:"grid grid-cols-6 gap-2 w-full pb-2",children:[e.jsx("button",{onClick:()=>A(!i),className:_("col-span-1 rounded-lg flex items-center justify-center transition-all h-9 border",i?"bg-amber-500/20 border-amber-500 text-amber-400":"bg-slate-700/30 border-white/5 text-slate-500 hover:text-slate-300"),children:e.jsx(z,{size:16})}),e.jsx("button",{onClick:()=>O(0),className:"col-span-1 bg-slate-700/30 border border-white/5 text-slate-500 rounded-lg flex items-center justify-center hover:bg-slate-700 hover:text-rose-400 h-9 transition-all",children:e.jsx(_e,{size:16})}),e.jsx("div",{className:"col-span-4 flex gap-1.5 overflow-x-auto no-scrollbar",children:Array.from({length:t>9?9:t},(m,f)=>f+1).map(m=>e.jsx("button",{onClick:()=>O(m),className:"bg-amber-600/20 border border-amber-500/30 text-amber-100 font-bold w-9 h-9 rounded-lg hover:bg-amber-600/40 hover:scale-105 active:scale-95 flex-shrink-0 transition-all shadow-lg",children:m},m))})]})]})]})};class Me extends pe.Component{constructor(s){super(s),this.state={hasError:!1,error:null,errorInfo:null}}static getDerivedStateFromError(s){return{hasError:!0,error:s}}componentDidCatch(s,r){console.error("Uncaught error:",s,r),this.setState({errorInfo:r})}handleRetry=()=>{this.setState({hasError:!1,error:null,errorInfo:null}),this.props.onReset&&this.props.onReset()};render(){return this.state.hasError?this.props.fallback?this.props.fallback:e.jsxs("div",{className:"w-full h-full min-h-[300px] flex flex-col items-center justify-center p-6 bg-slate-900/50 rounded-2xl border border-red-500/30 text-center",children:[e.jsx("div",{className:"p-3 bg-red-500/10 rounded-full mb-4",children:e.jsx(Ee,{size:32,className:"text-red-400"})}),e.jsx("h3",{className:"text-lg font-bold text-white mb-2",children:"Something went wrong"}),e.jsxs("p",{className:"text-sm text-slate-400 mb-6 max-w-xs",children:["The component encountered an error.",this.state.error&&e.jsx("span",{className:"block mt-1 text-xs font-mono bg-black/30 p-1 rounded text-red-300 truncate max-w-[250px] mx-auto",children:this.state.error.toString()})]}),e.jsxs("button",{onClick:this.handleRetry,className:"flex items-center gap-2 px-4 py-2 bg-slate-800 hover:bg-slate-700 text-white rounded-lg text-sm font-bold border border-white/10 transition-colors",children:[e.jsx(be,{size:14})," Try Again"]})]}):this.props.children}}function Ue(){const[t,s]=o.useState(9),[r,a]=o.useState("hard"),[l,c]=o.useState("simulation"),[n,u]=o.useState(new Set(["backtrack","naked","dynamic"])),[x,d]=o.useState(0),[b,g]=o.useState(0),[y,k]=o.useState(()=>ee("hard",9)),v=o.useCallback(()=>{const p=ee(r,t);k(p),g(C=>C+1)},[r,t]);o.useEffect(()=>{v()},[v]);const $=p=>{u(C=>{const S=new Set(C);return S.has(p)?S.delete(p):S.add(p),S})},N=()=>{const p=["backtrack","naked","dynamic"];n.size===p.length?u(new Set):u(new Set(p))},i=()=>{d(p=>p+1)},A=()=>{g(p=>p+1)},L=["dynamic","naked","backtrack"],E=o.useMemo(()=>Array.from(n).sort((p,C)=>L.indexOf(p)-L.indexOf(C)),[n]),D=o.useMemo(()=>{const p=[];l==="simulation"?(E.length>0?E:["backtrack"]).forEach(P=>{p.push({type:"board",algoId:P})}):p.push({type:"board",algoId:"practice"});const C=Math.min(2,p.length);return p.splice(C,0,{type:"control"}),p},[l,E]);return e.jsx("div",{className:"max-w-7xl mx-auto px-6 py-8",children:e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8 items-start",children:D.map((p,C)=>{if(p.type==="board"){const S=p.algoId==="practice";return e.jsx(Me,{onReset:v,children:e.jsx(Ge,{size:t,mainMode:l,initialBoard:y.initial,solution:y.solution,algoId:S?"backtrack":p.algoId,speed:100,triggerRun:x,triggerReset:b,onReset:v,onComplete:()=>{}})},`board-${p.algoId}-${C}`)}return p.type==="control"?e.jsx("div",{className:"h-full",children:e.jsx($e,{selectedSize:t,setSelectedSize:s,difficulty:r,setDifficulty:a,mainMode:l,setMainMode:c,selectedAlgos:n,toggleAlgo:$,toggleAllAlgos:N,onRun:i,onReset:A,onNewGame:v,isRunning:!1})},"lab-control-panel"):null})})})}export{Ue as default};
