import{c as K,a as N,b as T,j as t,d as j,H as Ce,G as ie,L as se,S as te,R as pe,V as _e,e as Ae,m as ce,f as oe,A as Pe}from"./index-BBYPTQ97.js";import{B as re,R as Ie,G as ge}from"./refresh-cw-DHPiGMy1.js";import{Z as W,P as le,A as be,T as ye,C as we,R as ee,S as $e}from"./zap-B76jphNB.js";import{C as Re,S as Be,X as Ne}from"./x-BJX7OrsJ.js";const Oe=[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]],Fe=K("book-open",Oe);const Ee=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],je=K("check",Ee);const De=[["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M17 20v2",key:"1rnc9c"}],["path",{d:"M17 2v2",key:"11trls"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M2 17h2",key:"7oei6x"}],["path",{d:"M2 7h2",key:"asdhe0"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"M20 17h2",key:"1fpfkl"}],["path",{d:"M20 7h2",key:"1o8tra"}],["path",{d:"M7 20v2",key:"4gnj0m"}],["path",{d:"M7 2v2",key:"1i4yhu"}],["rect",{x:"4",y:"4",width:"16",height:"16",rx:"2",key:"1vbyd7"}],["rect",{x:"8",y:"8",width:"8",height:"8",rx:"1",key:"z9xiuo"}]],Le=K("cpu",De);const Me=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],ke=K("info",Me);const qe=[["rect",{x:"14",y:"3",width:"5",height:"18",rx:"1",key:"kaeet6"}],["rect",{x:"5",y:"3",width:"5",height:"18",rx:"1",key:"1wsw3u"}]],Ve=K("pause",qe);const Je=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]],Te=K("target",Je);function Ge(r,e){r.flatBoard||(r.flatBoard=Array(e*e).fill(null),r.used=Array(e*e+1).fill(!1),r.stack=[],r.filledCount=0,r.firstNumberPositions=[],r.firstPosIdx=-1);const{flatBoard:a,used:s,stack:x}=r,d=e*(e*e+1)/2;if(r.filledCount>=e*e)return{board:X(a,e),isComplete:!0,desc:"Solution found!"};if(r.firstNumberPositions.length===0){if(e===3)r.firstNumberPositions=[0,1,4];else if(e===4)r.firstNumberPositions=[0,1,5];else for(let l=0;l<e*e;l++)r.firstNumberPositions.push(l);r.firstPosIdx=0}if(r.filledCount===0){const l=r.firstNumberPositions[r.firstPosIdx];return a[l]=1,s[1]=!0,r.filledCount=1,{board:X(a,e),val:1,highlight:{r:Math.floor(l/e),c:l%e,type:"active"},desc:`Optimal start: 1 at ${l}`}}let n=x[r.filledCount];if(!n){const l=a.map((m,f)=>m===null?f:-1).filter(m=>m!==-1);if(l.length===0)return ue(r,e);const h=l.map(m=>{let f=0;const w=Math.floor(m/e),A=m%e,k=[Array.from({length:e},(F,_)=>w*e+_),Array.from({length:e},(F,_)=>_*e+A)];return w===A&&k.push(Array.from({length:e},(F,_)=>_*e+_)),w+A===e-1&&k.push(Array.from({length:e},(F,_)=>_*e+(e-1-_))),k.forEach(F=>{f+=F.reduce((_,L)=>_+(a[L]!==null?1:0),0)}),{idx:m,score:f}}).sort((m,f)=>f.score-m.score)[0].idx;let p=null;const g=Math.floor(h/e),o=h%e,i=[Array.from({length:e},(m,f)=>g*e+f),Array.from({length:e},(m,f)=>f*e+o)];g===o&&i.push(Array.from({length:e},(m,f)=>f*e+f)),g+o===e-1&&i.push(Array.from({length:e},(m,f)=>f*e+(e-1-f)));for(let m of i){const f=m.filter(w=>a[w]!==null);if(f.length===e-1){p=d-f.reduce((w,A)=>w+a[A],0);break}}n={cellIdx:h,triedNum:0,forcedVal:p},x[r.filledCount]=n}let u=null;if(n.forcedVal!==null){if(n.triedNum===0){u=n.forcedVal,n.triedNum=999;const l=de(u,n,r,e,!0);if(l)return l}}else{for(u=n.triedNum===0?2:n.triedNum+1;u<=e*e&&s[u];)u++;if(n.triedNum=u,u<=e*e){const l=de(u,n,r,e,!1);if(l)return l}}return ue(r,e)}function de(r,e,a,s,x){if(r<1||r>s*s||a.used[r])return null;const{flatBoard:d,used:n}=a,u=s*(s*s+1)/2,l=Math.floor(e.cellIdx/s),c=e.cellIdx%s;d[e.cellIdx]=r,n[r]=!0;const h=[Array.from({length:s},(p,g)=>l*s+g),Array.from({length:s},(p,g)=>g*s+c)];l===c&&h.push(Array.from({length:s},(p,g)=>g*s+g)),l+c===s-1&&h.push(Array.from({length:s},(p,g)=>g*s+(s-1-g)));for(let p of h){const g=p.map(i=>d[i]).filter(i=>i!==null),o=g.reduce((i,m)=>i+m,0);if(o>u||g.length===s&&o!==u)return d[e.cellIdx]=null,n[r]=!1,{board:X(d,s),highlight:{r:l,c,type:"backtrack"},desc:`Conflict! ${r} invalid.`}}return a.filledCount++,{board:X(d,s),val:r,highlight:{r:l,c,type:x?"forced":"active"},desc:x?`Logic: ${r}`:`Trying ${r}...`}}function ue(r,e){const{flatBoard:a,used:s,stack:x}=r;if(x[r.filledCount]=null,r.filledCount--,r.filledCount>0){const d=x[r.filledCount],n=a[d.cellIdx];return s[n]=!1,a[d.cellIdx]=null,{board:X(a,e),highlight:{r:Math.floor(d.cellIdx/e),c:d.cellIdx%e,type:"backtrack"},desc:`Backtracking from ${n}`}}else{const d=r.firstNumberPositions[r.firstPosIdx];return a[d]=null,s[1]=!1,r.firstPosIdx++,r.firstPosIdx>=r.firstNumberPositions.length?{board:X(a,e),isComplete:!0,desc:"No solution found."}:(r.filledCount=0,{board:X(a,e),desc:"Restarting search..."})}}function X(r,e){const a=[];for(let s=0;s<e;s++)a.push(r.slice(s*e,(s+1)*e));return a}function He(r,e){r.flatBoard||(r.flatBoard=Array(e*e).fill(null),r.used=Array(e*e+1).fill(!1),r.stack=[],r.filledCount=0,r.firstNumberPositions=[],r.firstPosIdx=-1);const{flatBoard:a,used:s,stack:x}=r,d=e*(e*e+1)/2;if(r.filledCount>=e*e)return{board:Q(a,e),isComplete:!0,desc:"Solution found!"};if(r.firstNumberPositions.length===0){if(e===3)r.firstNumberPositions=[0,1,4];else if(e===4)r.firstNumberPositions=[0,1,5];else for(let l=0;l<e*e;l++)r.firstNumberPositions.push(l);r.firstPosIdx=0}if(r.filledCount===0){const l=r.firstNumberPositions[r.firstPosIdx];return a[l]=1,s[1]=!0,r.filledCount=1,{board:Q(a,e),val:1,highlight:{r:Math.floor(l/e),c:l%e,type:"active"},desc:`Starting: Placing 1 at cell ${l}.`}}let n=x[r.filledCount];if(!n){const l=a.map((i,m)=>i===null?m:-1).filter(i=>i!==-1);if(l.length===0)return xe(r,e);const c=l[0];let h=null;const p=Math.floor(c/e),g=c%e,o=[Array.from({length:e},(i,m)=>p*e+m),Array.from({length:e},(i,m)=>m*e+g)];p===g&&o.push(Array.from({length:e},(i,m)=>m*e+m)),p+g===e-1&&o.push(Array.from({length:e},(i,m)=>m*e+(e-1-m)));for(let i of o){const m=i.filter(f=>a[f]!==null);if(m.length===e-1){h=d-m.reduce((f,w)=>f+a[w],0);break}}n={cellIdx:c,triedNum:0,forcedVal:h},x[r.filledCount]=n}let u=null;if(n.forcedVal!==null){if(n.triedNum===0){u=n.forcedVal,n.triedNum=999;const l=me(u,n,r,e,!0);if(l)return l}}else{for(u=n.triedNum===0?2:n.triedNum+1;u<=e*e&&s[u];)u++;if(n.triedNum=u,u<=e*e){const l=me(u,n,r,e,!1);if(l)return l}}return xe(r,e)}function me(r,e,a,s,x){if(r<1||r>s*s||a.used[r])return null;const{flatBoard:d,used:n}=a,u=s*(s*s+1)/2,l=Math.floor(e.cellIdx/s),c=e.cellIdx%s;d[e.cellIdx]=r,n[r]=!0;const h=[Array.from({length:s},(p,g)=>l*s+g),Array.from({length:s},(p,g)=>g*s+c)];l===c&&h.push(Array.from({length:s},(p,g)=>g*s+g)),l+c===s-1&&h.push(Array.from({length:s},(p,g)=>g*s+(s-1-g)));for(let p of h){const g=p.map(i=>d[i]).filter(i=>i!==null),o=g.reduce((i,m)=>i+m,0);if(o>u||g.length===s&&o!==u)return d[e.cellIdx]=null,n[r]=!1,{board:Q(d,s),highlight:{r:l,c,type:"backtrack"},desc:`Conflict! ${r} breaks magicsum.`}}return a.filledCount++,{board:Q(d,s),val:r,highlight:{r:l,c,type:x?"forced":"active"},desc:x?`Forced: ${r}`:`Placing ${r}...`}}function xe(r,e){const{flatBoard:a,used:s,stack:x}=r;if(x[r.filledCount]=null,r.filledCount--,r.filledCount>0){const d=x[r.filledCount],n=a[d.cellIdx];return s[n]=!1,a[d.cellIdx]=null,{board:Q(a,e),highlight:{r:Math.floor(d.cellIdx/e),c:d.cellIdx%e,type:"backtrack"},desc:`Backtracking from ${n}`}}else{const d=r.firstNumberPositions[r.firstPosIdx];return a[d]=null,s[1]=!1,r.firstPosIdx++,r.firstPosIdx>=r.firstNumberPositions.length?{board:Q(a,e),isComplete:!0,desc:"No solution."}:(r.filledCount=0,{board:Q(a,e),desc:"Restarting..."})}}function Q(r,e){const a=[];for(let s=0;s<e;s++)a.push(r.slice(s*e,(s+1)*e));return a}function Ze(r,e,a){r.board||(r.board=Array(e*e).fill(null),r.used=Array(e*e+1).fill(!1),r.currentNum=1,r.stack=[]);const{board:s,used:x,stack:d}=r,n=e*(e*e+1)/2;if(r.currentNum>e*e)return Ue(s,e,n)?{board:z(s,e),isComplete:!0,desc:"Solution found!"}:fe(r,e,"Invalid arrangement. Backtracking...");let u=d[r.currentNum];if(!u){let o=[];for(let i=0;i<e*e;i++)s[i]===null&&o.push(i);if(a==="metric"){const i=(e-1)/2;o.sort((m,f)=>{const w=Math.floor(m/e),A=m%e,k=Math.floor(f/e),F=f%e;return Math.pow(w-i,2)+Math.pow(A-i,2)-(Math.pow(k-i,2)+Math.pow(F-i,2))})}else if(a==="backtrack")for(let i=o.length-1;i>0;i--){const m=Math.floor(Math.random()*(i+1));[o[i],o[m]]=[o[m],o[i]]}u={candidates:o,triedIndex:-1},d[r.currentNum]=u}const l=s.indexOf(r.currentNum);if(l!==-1&&(s[l]=null),x[r.currentNum]=!1,u.triedIndex++,u.triedIndex>=u.candidates.length)return fe(r,e,`Backtracking: No positions left for ${r.currentNum}`);const c=u.candidates[u.triedIndex],h=Math.floor(c/e),p=c%e;s[c]=r.currentNum,x[r.currentNum]=!0;let g=!0;if(a!=="brute"){const o=[Array.from({length:e},(i,m)=>h*e+m),Array.from({length:e},(i,m)=>m*e+p)];h===p&&o.push(Array.from({length:e},(i,m)=>m*e+m)),h+p===e-1&&o.push(Array.from({length:e},(i,m)=>m*e+(e-1-m)));for(let i of o){const m=i.map(w=>s[w]).filter(w=>w!==null),f=m.reduce((w,A)=>w+A,0);if(f>n||m.length===e&&f!==n){g=!1;break}}}if(g){const o=r.currentNum;return r.currentNum++,{board:z(s,e),val:o,highlight:{r:h,c:p,type:"active"},desc:`Placing ${o} at (${h}, ${p})...`}}else return s[c]=null,x[r.currentNum]=!1,{board:z(s,e),highlight:{r:h,c:p,type:"backtrack"},desc:`Conflict! ${r.currentNum} at (${h}, ${p}) invalidates sum.`}}function fe(r,e,a){const{board:s,used:x,stack:d}=r;if(d[r.currentNum]=null,r.currentNum--,r.currentNum<1)return r.currentNum=1,{board:z(s,e),isComplete:!0,desc:"Search exhausted."};const n=s.indexOf(r.currentNum);return{board:z(s,e),highlight:n!==-1?{r:Math.floor(n/e),c:n%e,type:"backtrack"}:null,desc:a}}function Ue(r,e,a){for(let d=0;d<e;d++){let n=0;for(let u=0;u<e;u++)n+=r[d*e+u];if(n!==a)return!1}for(let d=0;d<e;d++){let n=0;for(let u=0;u<e;u++)n+=r[u*e+d];if(n!==a)return!1}let s=0,x=0;for(let d=0;d<e;d++)s+=r[d*e+d],x+=r[d*e+(e-1-d)];return s===a&&x===a}function z(r,e){const a=[];for(let s=0;s<e;s++)a.push(r.slice(s*e,(s+1)*e));return a}const Xe=({size:r,mainMode:e,algoMode:a,steps:s,speed:x,triggerRun:d=0,triggerReset:n=0,onComplete:u})=>{const l=e==="simulation"?a==="formula"||a==="swing"?"learn":a==="dynamic"?"dynamic":"brute":"practice",[c,h]=N.useState(0),[p,g]=N.useState(!1),[o,i]=N.useState(!1),[m,f]=N.useState([]),[w,A]=N.useState(1),[k,F]=N.useState({r:0,c:0}),[_,L]=N.useState(null),[$,G]=N.useState(!0),S=N.useRef(null),V=Math.max(50,1050-x),[M,R]=N.useState({attempts:0,time:0}),[v,b]=N.useState(""),[y,P]=N.useState(null),E=N.useRef(0),B=N.useRef(null),J=N.useCallback((O=!1)=>{let q=Array.from({length:r},()=>Array(r).fill(null));if(i(!1),g(O===!0),a==="swing"&&(r===4||r===8)){for(let C=0;C<r;C++)for(let D=0;D<r;D++)C%2===0?q[C][D]=C*r+D+1:q[C][D]=C*r+(r-1-D)+1;A(r*r+1)}else A(1);f(q),R({attempts:0,time:0}),h(0),b(""),P(null),B.current=null,E.current=0,O===!0&&T.init()},[r,a]);N.useEffect(()=>{g(!1),J()},[r,e,a,J]);const ae=N.useRef(0);N.useEffect(()=>{d>ae.current&&(ae.current=d,g(!0),T.init())},[d]);const ne=N.useRef(0);return N.useEffect(()=>{n>ne.current&&(ne.current=n,g(!1),J())},[n,J]),N.useEffect(()=>{let O;return p&&!o&&(O=setInterval(()=>{if(E.current>0){const q=Math.floor(performance.now()-E.current);R(C=>({...C,time:q}))}},100)),()=>{O&&clearInterval(O)}},[p,o]),N.useEffect(()=>{let O=!0;if(!p){S.current&&(clearTimeout(S.current),S.current=null);return}if(B.current||(E.current=performance.now(),a==="heuristic"?B.current={flatBoard:Array(r*r).fill(null),used:Array(r*r+1).fill(!1),stack:[],filledCount:0,firstNumberPositions:[],firstPosIdx:-1}:l==="brute"||a==="backtrack"||a==="metric"?B.current={board:Array(r*r).fill(null),used:Array(r*r+1).fill(!1),currentNum:1,stack:[]}:l==="dynamic"?B.current={flatBoard:Array(r*r).fill(null),used:Array(r*r+1).fill(!1),stack:[],filledCount:0,firstNumberPositions:[],firstPosIdx:-1}:B.current={type:"learn"}),l==="learn")(async()=>{E.current===0&&(E.current=performance.now());let C=c;for(;C<s.length-1&&O&&p;){const D=s[C];let Z=V;if(r===8&&D.type==="setup"&&(Z=Math.max(30,V/4)),D.type==="highlight_targets"&&(Z=1500),D.type==="swing_rotating"&&(Z=4e3),await new Promise(I=>{S.current=setTimeout(I,Z)}),!O||!p)break;if(C++,h(C),R(I=>({...I,attempts:C})),$){const I=s[C];I?.val?T.playNote(I.val):I?.type==="highlight_targets"||I?.type==="swing_rotating"?T.playNote(r*r):I?.type==="complete"&&T.playSuccess()}if(C===s.length-1||s[C].type==="complete"){const I=performance.now()-E.current;g(!1),i(!0),R(Y=>({...Y,time:I})),u&&u({attempts:C,time:I});break}}})();else{const q=()=>{if(!O||!p)return;let C;if(a==="heuristic"?C=He(B.current,r):l==="brute"||a==="backtrack"||a==="metric"?C=Ze(B.current,r,a):l==="dynamic"&&(C=Ge(B.current,r)),C&&O)if(f(C.board),b(C.desc||""),P(C.highlight||null),$&&C.val&&T.playNote(C.val),C.isComplete){const D=performance.now()-E.current;g(!1),i(!0),R(Z=>({attempts:M.attempts+1,time:D})),$&&T.playSuccess(),u&&u({attempts:M.attempts+1,time:D})}else R(D=>({...D,attempts:D.attempts+1})),S.current=setTimeout(q,V)};S.current=setTimeout(q,V)}return()=>{O=!1,S.current&&clearTimeout(S.current)}},[p,c,s,V,l,a,r,u,$]),{practiceBoard:m,targetNum:w,lastCorrectPos:k,feedback:_,setFeedback:L,isSoundEnabled:$,setIsSoundEnabled:G,stats:M,currentStepIndex:c,isPlaying:p,setIsPlaying:g,isComplete:o,resetPractice:J,handlePracticeClick:(O,q,C,D)=>{if(m[O][q]!==null)return;const Z=s.find(I=>I.highlight&&I.highlight.r===O&&I.highlight.c===q&&I.val===w);if(Z){const I=[...m];if(I[O]=[...I[O]],I[O][q]=w,f(I),A(Y=>Y+1),F({r:O,c:q}),$&&T.playNote(w),C(Z),w===r*r){const Y=performance.now()-E.current;i(!0),R(Se=>({...Se,time:Y})),$&&T.playSuccess(),u&&u({attempts:M.attempts,time:Y})}}else R(I=>({...I,attempts:I.attempts+1})),D()},dynamicDesc:v,dynamicHighlight:y,setCurrentStepIndex:h}},Qe=({v:r,r:e,c:a,size:s,algoMode:x,mainMode:d,isComplete:n,isPlaying:u,currentStep:l,highlight:c,dynamicHighlight:h,onClick:p,cellClasses:g,getFormulaColor:o})=>{const i=u&&x==="dynamic"&&h?.r===e&&h?.c===a,m=u&&(x==="formula"||x==="swing")&&c?.r===e&&c?.c===a,f=x==="dynamic"?h?.type:null,w=x==="formula"||x==="swing";let A={};const k=(l?.type==="swap_highlight"||l?.type==="swap")&&(c?.r===e&&c?.c===a||c?.targets?.[0]?.r===e&&c?.targets?.[0]?.c===a);if(r&&x==="formula"&&!k){const S=o(r,e,a,n);A={backgroundColor:S,borderColor:`hsla(${140-Math.pow((e+a)/((s-1)*2),.6)*120}, 95%, 65%, 0.75)`,color:"#fff",textShadow:"0 1px 4px rgba(0,0,0,0.6)",boxShadow:m?`0 0 30px ${S}`:"inset 0 0 10px rgba(0,0,0,0.2)"}}let F={};const _=x==="swing"&&s===4&&(a===1||a===2),L=x==="swing"&&s===8&&(a===1||a===2||a===5||a===6);if(_&&(l?.type==="highlight_targets"||l?.type==="swing_rotating"||n)){const M=(1.5-a)*64,R=(1.5-e)*64,v=(56/2+M)/56*100,b=(56/2+R)/56*100;F={backgroundColor:"rgba(245, 158, 11, 0.6)",borderColor:"rgb(245, 158, 11)",boxShadow:"0 0 40px rgba(245, 158, 11, 0.4)",color:"#fff",zIndex:40,...l?.type==="swing_rotating"?{transformOrigin:`${v}% ${b}%`,transform:"rotate(180deg)",transition:"transform 3.6s cubic-bezier(0.4, 0, 0.2, 1)"}:{transform:"none",transition:n?"none":"background-color 1s ease-in-out, border-color 1s ease-in-out, box-shadow 1s ease-in-out"}}}if(L&&(l?.type==="highlight_targets"||l?.type==="swing_rotating"||n)){const M=(3.5-a)*36,R=(3.5-e)*36,v=(32/2+M)/32*100,b=(32/2+R)/32*100;F={backgroundColor:"rgba(245, 158, 11, 0.6)",borderColor:"rgb(245, 158, 11)",boxShadow:"0 0 40px rgba(245, 158, 11, 0.4)",color:"#fff",zIndex:40,...l?.type==="swing_rotating"?{transformOrigin:`${v}% ${b}%`,transform:"rotate(180deg)",transition:"transform 3.8s cubic-bezier(0.34, 1.56, 0.64, 1)"}:{transform:"none",transition:n?"none":"background-color 1s ease-in-out, border-color 1s ease-in-out, box-shadow 1s ease-in-out"}}}let $="",G="";if(n&&x!=="formula"){const S=(e===0||e===s-1)&&(a===0||a===s-1),H=e===Math.floor(s/2)&&a===Math.floor(s/2);S||H?(G="border-2 border-amber-400/80",$="text-white"):a===Math.floor(s/2)?($="text-pink-300 bg-pink-900/20",G="border border-pink-500/30"):($="text-sky-300 bg-sky-900/40",G="border border-sky-500/30")}return t.jsxs("div",{onClick:p,style:{...A,...F},className:j("flex items-center justify-center rounded-md font-black transition-all relative overflow-hidden",g,r&&+r>0?n?"":"text-emerald-50":"text-transparent",w?"border-2":!n&&r?"bg-emerald-900/40 border border-emerald-500/20":!n&&"bg-slate-800/50 border border-slate-700/30",w&&!r&&!n&&"bg-slate-900/60 border-emerald-500/10 border-dashed",n&&!w&&$,n&&!w?G||"border border-transparent":"",m&&d==="simulation"&&"ring-2 ring-white z-20 shadow-[0_0_30px_rgba(255,255,255,0.4)] animate-in zoom-in duration-200",w&&l?.type==="scan"&&(e%4===a%4||e%4+a%4===3?"bg-emerald-500/20 border-emerald-500/50 text-emerald-200":"bg-slate-700/50 border-slate-600/50 text-slate-400"),w&&(l?.type==="pop_prepare"||l?.type==="mass_invert")&&c?.targets?.some(S=>S.r===e&&S.c===a)&&j("z-30 transition-all duration-700 ease-in-out",l?.type==="pop_prepare"?j("scale-110 shadow-2xl",(c?.group==="top_bottom"?e===0:a===0)?"bg-rose-500/40 border-rose-400 text-rose-100 shadow-rose-500/30":"bg-blue-500/40 border-blue-400 text-blue-100 shadow-blue-500/30"):"",l?.type==="mass_invert"?"scale-100 rotate-y-180 bg-purple-500/50 border-purple-400 text-white shadow-purple-500/40 ring-1 ring-purple-300":""),x==="swing"&&(l?.type==="swing_prepare"||l?.type==="swing_done")&&c?.targets?.some(S=>S.r===e&&S.c===a)&&j("z-40 transition-all duration-1000 ease-in-out",l?.type==="swing_prepare"?"scale-110 shadow-[0_0_30px_rgba(56,189,248,0.6)] border-sky-400 bg-sky-500/40 text-white animate-cyber-pulse":"",l?.type==="swing_done"?"scale-100 rotate-y-180 bg-indigo-500/70 border-indigo-300 text-white shadow-[0_0_40px_rgba(99,102,241,0.7)] ring-2 ring-indigo-400/50":""),x==="swing"&&l?.type==="scan_swing"&&(c?.targets?.some(S=>S.r===e&&S.c===a)?"ring-2 ring-sky-400/50 shadow-[0_0_25px_rgba(34,211,238,0.4)] bg-sky-900/80 text-cyan-300 z-10 border-cyan-500/50":"opacity-30 grayscale-[0.8]"),x==="swing"&&l?.type==="highlight_targets"&&c?.targets?.some(S=>S.r===e&&S.c===a)&&"bg-blue-600/80 text-white z-10 shadow-[0_0_30px_rgba(37,99,235,0.6)] border-blue-400 animate-cyber-pulse ring-2 ring-blue-300",x==="swing"&&s===6&&l?.type==="highlight_quadrant"&&c?.targets?.some(S=>S.r===e&&S.c===a)&&"bg-blue-500/20 border-blue-400/50 ring-1 ring-blue-400/30 z-10",w&&l?.type==="invert"&&m&&"bg-purple-500/40 border-purple-400 ring-1 ring-purple-400 animate-pulse text-white",l?.type==="swap_highlight"&&(c?.r===e&&c?.c===a?"text-amber-400 !bg-emerald-900 border-amber-400 shadow-[0_0_15px_rgba(251,191,36,0.5)] scale-110 z-50 ring-2 ring-amber-400":c?.targets?.[0]?.r===e&&c?.targets?.[0]?.c===a?"text-cyan-400 !bg-emerald-900 border-cyan-400 shadow-[0_0_15px_rgba(34,211,238,0.5)] scale-110 z-50 ring-2 ring-cyan-400":""),l?.type==="swap"&&(c?.r===e&&c?.c===a?"text-cyan-400 !bg-emerald-900 border-cyan-400 scale-100 z-50 transition-all duration-700":c?.targets?.[0]?.r===e&&c?.targets?.[0]?.c===a?"text-amber-400 !bg-emerald-900 border-amber-400 scale-100 z-50 transition-all duration-700":""),i&&f==="active"&&"ring-2 ring-amber-400 bg-amber-900/40 z-10 scale-105",i&&f==="forced"&&"ring-2 ring-purple-400 bg-purple-900/60 z-10 scale-110 shadow-lg shadow-purple-500/40",i&&f==="backtrack"&&"ring-2 ring-rose-500 bg-rose-500/30 z-10 animate-pulse"),children:[r,i&&f==="forced"&&t.jsx("div",{className:"absolute top-0.5 right-0.5 w-1.5 h-1.5 bg-purple-400 rounded-full animate-ping"}),i&&f==="backtrack"&&t.jsx("div",{className:"absolute inset-0 bg-rose-500/20 animate-pulse"})]})},Ye=({size:r,mainMode:e,algoMode:a,steps:s=[],speed:x=500,triggerRun:d=0,triggerReset:n=0})=>{const{currentStepIndex:u,isPlaying:l,setIsPlaying:c,isComplete:h,practiceBoard:p,setFeedback:g,isSoundEnabled:o,resetPractice:i,handlePracticeClick:m,stats:f,dynamicDesc:w,dynamicHighlight:A}=Xe({size:r,mainMode:e,algoMode:a,steps:s,speed:x,triggerRun:d,triggerReset:n}),k=s[u]||{board:[],desc:""},{highlight:F}=k,_=e==="simulation"&&(a==="formula"||a==="swing")?k?.type==="complete":h,L=r*(r*r+1)/2,$=e==="simulation"&&(a==="formula"||a==="swing")&&(l||_||u>0)&&k?.board?.length>0?k.board:p,G=N.useMemo(()=>{const v=Array(r).fill(0),b=Array(r).fill(0);return $.forEach(y=>{y&&y.forEach((P,E)=>{P!==null&&(v[E]+=P,b[E]++)})}),v.map((y,P)=>({sum:y,isComplete:y===L&&b[P]===r}))},[$,r,L]),S=N.useMemo(()=>{if(_)return"100.0";if(e==="simulation"&&(a==="swing"||a==="formula"&&r%2===0)&&s.length>0){const y=s[u]?.type;if(y==="complete")return"100.0";if(a==="swing")return y==="swing_rotating"?"80.0":y==="highlight_targets"?"50.0":"0.0";if(a==="formula")return y==="setup"?"0.0":y==="scan"||y==="pop_prepare"?"50.0":y==="mass_invert"?"85.0":"90.0"}if(e==="simulation"&&s.length>0)return((u+1)/s.length*100).toFixed(1);let v=0;$.forEach(y=>{y&&y.forEach(P=>{P!==null&&P>0&&P<=r*r&&v++})});const b=v/(r*r)*100;return b>=100&&!_?"99.9":b.toFixed(1)},[$,r,_,u,s,a,e]),H=()=>r<=3?"w-16 h-16 text-2xl":r<=4?"w-12 h-12 text-xl":r<=6?"w-10 h-10 text-lg":r<=8?"w-8 h-8 text-base":"w-7 h-7 text-sm",V=()=>r<=4?"gap-2":r<=6?"gap-1.5":"gap-1",M=(v,b)=>{m(v,b,y=>{o&&T.playNote(y.val)},()=>{g({type:"error",msg:"Wrong",icon:Te}),setTimeout(()=>g(null),1e3)})},R=(v,b,y,P)=>{if(!v)return null;const E=(b+y)/((r-1)*2);return`hsla(${140-Math.pow(E,.6)*120}, ${P?"85%":"95%"}, ${P?"45%":"50%"}, ${P?.75:.9})`};return t.jsxs("div",{className:j("glass-panel rounded-2xl p-3 flex flex-col shadow-2xl transition-all group overflow-hidden relative",_?"border-emerald-500/30 bg-emerald-500/5 shadow-[0_0_30px_rgba(16,185,129,0.1)]":"border-slate-700/50"),children:[t.jsx("div",{className:"absolute inset-0 bg-blueprint opacity-[0.03] pointer-events-none"}),t.jsxs("div",{className:"flex justify-between items-center mb-1.5 min-h-[28px]",children:[t.jsxs("div",{className:"flex items-center gap-2.5",children:[t.jsx("div",{className:j("p-1.5 rounded-lg",_?"bg-emerald-500/20 text-emerald-400":"bg-slate-700/40 text-slate-400"),children:a==="dynamic"?t.jsx(re,{size:14}):t.jsx(W,{size:14})}),t.jsx("h3",{className:"text-[10px] font-black uppercase tracking-[0.2em] text-slate-300",children:e==="simulation"?a:`${r}x${r} Practice`})]}),t.jsx("div",{className:"flex items-center gap-2",children:e==="simulation"&&t.jsxs(t.Fragment,{children:[t.jsx("button",{onClick:i,className:"p-1.5 rounded-lg bg-slate-800/60 text-slate-500 hover:text-emerald-400 border border-white/5 transition-all active:scale-95 group/btn",title:"Reset",children:t.jsx(Ie,{size:14,className:"group-hover/btn:rotate-180 transition-transform duration-500"})}),l?t.jsx("button",{onClick:()=>c(!1),className:"p-1.5 rounded-lg bg-rose-500/10 text-rose-400 hover:bg-rose-500/20 transition-all active:scale-95 border border-rose-500/20 shadow-lg shadow-rose-500/10",children:t.jsx(Ve,{size:14,fill:"currentColor"})}):t.jsx("button",{onClick:()=>{_?i(!0):c(!0)},className:"p-1.5 rounded-lg bg-emerald-500/10 text-emerald-400 hover:bg-emerald-500/20 border border-emerald-500/20 transition-all active:scale-95 shadow-lg shadow-emerald-500/10",children:t.jsx(le,{size:14,fill:"currentColor"})})]})})]}),t.jsxs("div",{className:j("flex flex-col items-center justify-center relative px-2 flex-1 transition-all duration-500",r>7?"py-6":"py-3"),children:[t.jsx("div",{className:"flex flex-col gap-1",children:$.map((v,b)=>{const y=v?v.reduce((B,J)=>B+(J||0),0):0,P=y===L&&v&&v.every(B=>B!==null),E=H();return t.jsxs("div",{className:j("flex items-center",V()),children:[t.jsx("div",{className:"w-5 h-5 mr-1 opacity-0"}),v&&v.map((B,J)=>t.jsx(Qe,{v:B,r:b,c:J,size:r,algoMode:a,mainMode:e,isComplete:_,isPlaying:l,currentStep:k,dynamicHighlight:A,onClick:()=>e==="practice"&&M(b,J),cellClasses:E,getFormulaColor:R},`${b}-${J}`)),t.jsx("div",{className:j("flex items-center justify-center font-mono font-bold w-5 h-5 ml-1 text-[8px]",P?"text-sky-400":"text-slate-600",_?"opacity-100":"opacity-0"),children:y>0?y:""})]},`row-${b}`)})}),t.jsxs("div",{className:j("flex items-center mt-1",V()),children:[t.jsx("div",{className:"w-5 h-5 mr-1 opacity-0"}),G.map((v,b)=>t.jsx("div",{className:j("flex items-center justify-center font-mono font-bold transition-all duration-700",H(),"text-[8px] h-5",v.isComplete?"text-sky-400":"text-slate-600",_?"opacity-100":"opacity-0"),children:v.sum>0?v.sum:""},`colsum-${b}`)),t.jsx("div",{className:j("flex items-center justify-center font-mono font-bold w-5 h-5 ml-1 text-[8px] transition-all duration-700",$.reduce((v,b,y)=>v+(b&&b[y]?b[y]:0),0)===L&&$.every((v,b)=>v&&v[b])?"text-sky-400":"text-slate-600",_?"opacity-100":"opacity-0"),children:(()=>{const v=$.reduce((b,y,P)=>b+(y&&y[P]?y[P]:0),0);return v>0?v:""})()})]})]}),e==="simulation"&&t.jsxs("div",{className:"flex flex-col mt-3 gap-2 relative z-10",children:[t.jsxs("div",{className:"h-12 flex items-center justify-center px-4 bg-slate-950/60 rounded-xl border border-white/5 shadow-inner overflow-hidden relative",children:[t.jsx("div",{className:"absolute inset-0 bg-blue-500/5 transition-colors duration-500 group-hover:bg-blue-500/10"}),t.jsx("span",{className:"text-[11px] font-black uppercase tracking-widest text-center text-slate-300 relative z-10 leading-snug",children:a!=="formula"&&a!=="swing"?w||"Ready for Simulation":k?.desc||(_?"Analysis Finished":"Processing Logic...")})]}),t.jsxs("div",{className:"grid grid-cols-4 gap-1 p-2 bg-slate-900/40 rounded-xl border border-white/5",children:[t.jsxs("div",{className:"flex flex-col items-center justify-center py-1 rounded-lg hover:bg-white/5 transition-colors cursor-help group/stat",children:[t.jsx(be,{size:12,className:"text-slate-500 group-hover/stat:text-rose-400 mb-1 transition-colors"}),t.jsx("span",{className:"text-[10px] font-mono font-bold text-slate-300",children:f?.attempts||0})]}),t.jsxs("div",{className:"flex flex-col items-center justify-center py-1 rounded-lg hover:bg-white/5 transition-colors cursor-help group/stat",children:[t.jsx(ye,{size:12,className:"text-slate-500 group-hover/stat:text-emerald-400 mb-1 transition-colors"}),t.jsxs("span",{className:"text-[10px] font-mono font-bold text-emerald-400",children:[S,"%"]})]}),t.jsxs("div",{className:"flex flex-col items-center justify-center py-1 rounded-lg hover:bg-white/5 transition-colors cursor-help group/stat",children:[t.jsx(Ce,{size:12,className:"text-slate-500 group-hover/stat:text-amber-400 mb-1 transition-colors"}),t.jsx("span",{className:"text-[10px] font-mono font-bold text-slate-300",children:L})]}),t.jsxs("div",{className:"flex flex-col items-center justify-center py-1 rounded-lg hover:bg-white/5 transition-colors cursor-help group/stat",children:[t.jsx(we,{size:12,className:"text-slate-500 group-hover/stat:text-sky-400 mb-1 transition-colors"}),t.jsxs("span",{className:"text-[10px] font-mono font-bold text-slate-300",children:[(f?.time/1e3||0).toFixed(2),"s"]})]})]})]})]})};class We{static getZigZagPositions(e){const a=[];for(let s=0;s<e;s++)if(s%2===0)for(let x=0;x<e;x++)a.push({r:s,c:x});else for(let x=e-1;x>=0;x--)a.push({r:s,c:x});return a}static generateSteps(e){if(e!==4&&e!==8&&e!==6)return[];const a=Array.from({length:e},()=>Array(e).fill(null)),s=[],x=(c,h,p,g,o)=>{s.push({board:JSON.parse(JSON.stringify(c)),val:h,highlight:p,desc:g,type:o})};if(x(a,null,null,"Ready to Fill","setup"),e===6){const h=[{r:0,c:0,start:1,name:"A (Top-Left)"},{r:3,c:3,start:10,name:"B (Bottom-Right)"},{r:0,c:3,start:19,name:"C (Top-Right)"},{r:3,c:0,start:28,name:"D (Bottom-Left)"}];for(const p of h){const g=[];for(let o=0;o<3;o++)for(let i=0;i<3;i++)g.push({r:p.r+o,c:p.c+i});x(a,null,{targets:g},`Fill Sub-square ${p.name}`,"highlight_quadrant");for(let o=0;o<9;o++){const i=p.r+Math.floor(o/3),m=p.c+o%3;a[i][m]=p.start+o,x(a,a[i][m],{r:i,c:m},`Filling ${p.name}...`,"setup")}}return x(a,null,null,"4 Sub-squares Ready","complete"),s}const d=this.getZigZagPositions(e);for(let c=0;c<d.length;c++){const{r:h,c:p}=d[c];a[h][p]=c+1,x(a,c+1,{r:h,c:p},"ZigZag Filling","setup")}const n=e===4?[1,2]:[1,2,5,6],u=[];for(let c=0;c<e;c++)for(let h of n)u.push({r:c,c:h});x(a,null,{targets:u},"Select Swing Cells","highlight_targets"),x(a,null,{targets:u},"Swing!","swing_rotating");const l=JSON.parse(JSON.stringify(a));for(const{r:c,c:h}of u)l[e-1-c][e-1-h]=a[c][h];return x(l,null,null,"That's it","complete"),s}}class ve{static generateSteps(e){const a=Array.from({length:e},()=>Array(e).fill(null)),s=[],x=(u,l,c,h,p)=>{a[l][c]=u,s.push({board:JSON.parse(JSON.stringify(a)),val:u,highlight:{r:l,c},desc:h,type:p})};let d=0,n=Math.floor(e/2);x(1,d,n,"Start: Top Center (Siamese Method)","place_start");for(let u=2;u<=e*e;u++){let l=(d-1+e)%e,c=(n+1)%e;a[l][c]!==null?(d=(d+1)%e,x(u,d,n,`Collision at (${l},${c}) -> Move Down`,"move_collision")):(d=l,n=c,x(u,d,n,"Move Diagonally Up-Right ↗","move_normal"))}return s.length>0&&(s[s.length-1].type="complete",s[s.length-1].desc="Magic Square Complete!"),s}}class Ke{static generateSteps(e){const a=Array.from({length:e},()=>Array(e).fill(null)),s=[],x=(l,c,h,p,g)=>{s.push({board:JSON.parse(JSON.stringify(l)),val:c,highlight:h,desc:p,type:g})};for(let l=0;l<e;l++)for(let c=0;c<e;c++){const h=l*e+c+1;a[l][c]=h,x(a,h,{r:l,c},`Sequential Fill: ${h}`,"setup")}x(a,null,null,"Diagonals: Safe (Green) | Others: Targets (Grey)","scan");const d=[],n=[],u=(l,c)=>l%4===c%4||l%4+c%4===3;for(let l=0;l<e;l++)for(let c=0;c<e;c++)u(l,c)||(l===0||l===e-1||c===0||c===e-1?d.push({r:l,c}):n.push({r:l,c}));if(d.length>0){x(a,null,{targets:d,group:"top_bottom"},"Invert Outer Edges!","pop_prepare");for(let l=0;l<d.length;l++){const{r:c,c:h}=d[l];a[c][h]=e*e+1-a[c][h]}x(a,null,{targets:d,group:"top_bottom"},"Outer Edges Inverted!","mass_invert")}if(n.length>0){x(a,null,{targets:n,group:"left_right"},"Invert Inner Center!","pop_prepare");for(let l=0;l<n.length;l++){const{r:c,c:h}=n[l];a[c][h]=e*e+1-a[c][h]}x(a,null,{targets:n,group:"left_right"},"Inner Center Inverted!","mass_invert")}return s.length>0&&(s[s.length-1].type="complete",s[s.length-1].desc="Magic Square Complete!"),s}}function ze(r){const e=r/2,a=e*e,s=ve.generateSteps(e),x=s[s.length-1].board,d=Array.from({length:r},()=>Array(r).fill(null)),n=[],u=(o,i,m,f,w,A)=>{d[i][m]=o,n.push({board:JSON.parse(JSON.stringify(d)),val:o,highlight:{r:i,c:m},desc:f,type:w})},l=new Map;for(let o=0;o<e;o++)for(let i=0;i<e;i++)l.set(x[o][i],{r:o,c:i});for(let o=1;o<=a;o++){const i=l.get(o);u(o,i.r,i.c,`Filling Quadrant A (1-${a}): ${o}`,"place_q1")}for(let o=1;o<=a;o++){const i=o+a,m=l.get(o);u(i,m.r+e,m.c+e,`Filling Quadrant D (${a+1}-${2*a}): ${i}`,"place_q4")}for(let o=1;o<=a;o++){const i=o+2*a,m=l.get(o);u(i,m.r,m.c+e,`Filling Quadrant B (${2*a+1}-${3*a}): ${i}`,"place_q2")}for(let o=1;o<=a;o++){const i=o+3*a,m=l.get(o);u(i,m.r+e,m.c,`Filling Quadrant C (${3*a+1}-${4*a}): ${i}`,"place_q3")}const c=Math.floor((r-2)/4),h=(o,i,m,f,w)=>{const A=d[o][i],k=d[m][f];n.push({board:JSON.parse(JSON.stringify(d)),type:"swap_highlight",desc:`Ready to Swap: (${o},${i}) ↔ (${m},${f})`,highlight:{r:o,c:i,targets:[{r:m,c:f}]}}),d[o][i]=k,d[m][f]=A,n.push({board:JSON.parse(JSON.stringify(d)),desc:w||`Swapped (${o},${i}) ↔ (${m},${f})`,type:"swap",highlight:{r:o,c:i,targets:[{r:m,c:f}]}})};for(let o=0;o<e;o++)for(let i=0;i<c;i++)h(o,i,o+e,i,"Swapping Left Columns (Left Side)");const p=Math.floor(e/2);h(p,0,p+e,0,"Adjusting Middle Row: Undo First Col Swap"),h(p,c,p+e,c,"Adjusting Middle Row: Swap Center Col");const g=c-1;if(g>0)for(let o=0;o<e;o++)for(let i=0;i<g;i++){const m=e-1-i;h(o,m+e,o+e,m+e,"Swapping Right Columns (Right Side)")}return n.push({board:JSON.parse(JSON.stringify(d)),type:"complete",desc:`Singly Even (${r}x${r}) Complete! Sum Verified.`}),n}function U(r,e="formula"){return e==="swing"&&(r===4||r===8)?We.generateSteps(r):r%2!==0?ve.generateSteps(r):r%4===0?Ke.generateSteps(r):ze(r)}const et=({selectedSize:r,setSelectedSize:e,selectedAlgos:a,toggleAlgo:s,toggleAllAlgos:x,onRunAll:d,onResetAll:n,isRunningAny:u,mainMode:l,setMainMode:c,setShowAlgoTable:h})=>{const[p,g]=N.useState(!1),[o,i]=N.useState(T.enabled),m=()=>{const k=!o;i(k),T.setEnabled(k)},f=[3,4,5,6,7,8,9,10],w=[{id:"formula",label:"Direct Formula",icon:ie},{id:"dynamic",label:"Heuristic CSP",icon:re},{id:"heuristic",label:"Smart Backtrack",icon:se},{id:"metric",label:"Metric Backtrack",icon:te},{id:"backtrack",label:"Recursive Backtrack",icon:pe},{id:"brute",label:"Pure Brute Force",icon:W}],A=a.size===w.length;return a.size,t.jsx("div",{className:"lg:hidden fixed bottom-6 left-0 right-0 z-[60] px-6 pointer-events-none",children:t.jsxs("div",{className:"max-w-7xl mx-auto flex flex-col gap-2 pointer-events-auto",children:[p&&t.jsxs("div",{className:"bg-slate-800/95 backdrop-blur-2xl border border-white/10 rounded-2xl p-4 shadow-2xl mb-2 animate-in slide-in-from-bottom-5 duration-300",children:[t.jsxs("div",{className:"flex items-center justify-between mb-4 pb-3 border-b border-white/5",children:[t.jsxs("div",{className:"flex bg-slate-900/50 p-1 rounded-lg border border-white/5",children:[t.jsx("button",{onClick:()=>c("practice"),className:j("px-3 py-1 rounded-md text-[10px] font-black uppercase tracking-widest transition-all",l==="practice"?"bg-emerald-400/20 border border-emerald-400/30 text-emerald-300":"text-slate-500"),children:"Practice"}),t.jsx("button",{onClick:()=>c("simulation"),className:j("px-3 py-1 rounded-md text-[10px] font-black uppercase tracking-widest transition-all",l==="simulation"?"bg-emerald-400/20 border border-emerald-400/30 text-emerald-300":"text-slate-500"),children:"Simulation"})]}),t.jsx("button",{onClick:m,className:j("p-2 rounded-lg transition-all border",o?"bg-emerald-400/20 border-emerald-400/30 text-emerald-300":"bg-slate-700/50 border-white/5 text-slate-500"),children:o?t.jsx(_e,{size:16}):t.jsx(Ae,{size:16})})]}),t.jsxs("div",{className:"mb-4",children:[t.jsx("span",{className:"text-[10px] font-black text-slate-500 uppercase tracking-widest mb-2 block",children:"Grid Size"}),t.jsx("div",{className:"flex gap-1 overflow-x-auto pb-2 no-scrollbar",children:f.map(k=>t.jsx("button",{onClick:()=>e(k),className:j("flex-shrink-0 w-10 h-10 rounded-lg border text-xs font-black transition-all",r===k?"bg-emerald-500 border-emerald-400 text-white":"bg-slate-900/50 border-white/5 text-slate-500"),children:k},k))})]}),l==="simulation"&&t.jsxs("div",{children:[t.jsxs("div",{className:"flex justify-between items-center mb-2",children:[t.jsx("span",{className:"text-[10px] font-black text-slate-500 uppercase tracking-widest",children:"Algorithms"}),t.jsx("button",{onClick:x,className:"text-[9px] font-black text-emerald-400 uppercase tracking-tighter",children:A?"Deselect All":"Select All"})]}),t.jsx("div",{className:"grid grid-cols-2 gap-2",children:w.map(k=>t.jsxs("button",{onClick:()=>s(k.id),className:j("flex items-center gap-2 p-2 rounded-xl border transition-all text-left",a.has(k.id)?"bg-emerald-600/20 border-emerald-500/50 text-white":"bg-slate-900/40 border-white/5 text-slate-500"),children:[t.jsx("div",{className:j("w-4 h-4 rounded flex items-center justify-center border",a.has(k.id)?"bg-emerald-500 border-emerald-400":"border-slate-700 bg-slate-800"),children:a.has(k.id)&&t.jsx(je,{size:10,className:"text-white"})}),t.jsx("span",{className:"text-[10px] font-bold truncate uppercase",children:k.label})]},k.id))})]})]}),t.jsxs("div",{className:"h-16 bg-slate-800/90 backdrop-blur-xl border border-white/10 rounded-2xl shadow-2xl flex items-center justify-between p-2 relative overflow-hidden",children:[t.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-emerald-500/5 to-transparent pointer-events-none"}),t.jsxs("div",{className:"flex items-center gap-1.5 z-10",children:[t.jsx("button",{onClick:()=>g(!p),className:j("w-12 h-12 flex items-center justify-center rounded-xl transition-all active:scale-95",p?"bg-emerald-500 text-white shadow-lg shadow-emerald-500/20":"bg-slate-700/50 text-slate-400"),children:p?t.jsx(Re,{size:20}):t.jsx(Be,{size:20})}),t.jsx("button",{onClick:()=>h(!0),className:"w-12 h-12 flex items-center justify-center rounded-xl bg-emerald-500/10 border border-emerald-500/20 text-emerald-400 hover:text-emerald-300 active:scale-95 transition-all",children:t.jsx(ie,{size:18})}),t.jsx("button",{onClick:n,className:"w-12 h-12 flex items-center justify-center rounded-xl bg-slate-700/30 text-slate-400 hover:text-white active:scale-95 transition-all",children:t.jsx(ee,{size:18})})]}),t.jsx("div",{className:"flex-1 pl-3 z-10",children:u?t.jsxs("button",{onClick:n,className:"w-full h-12 flex items-center justify-center gap-2 bg-slate-700/50 text-slate-300 border border-white/10 rounded-xl font-black text-xs uppercase tracking-widest active:scale-95 transition-all",children:[t.jsx("div",{className:"w-2.5 h-2.5 bg-slate-400 rounded-sm"})," HOLD ALL"]}):t.jsxs("button",{onClick:d,className:"w-full h-12 flex items-center justify-center gap-2 bg-emerald-500 hover:bg-emerald-400 text-white rounded-xl font-black text-xs uppercase tracking-widest shadow-lg shadow-emerald-500/40 active:scale-95 transition-all",children:[t.jsx(le,{size:16,fill:"currentColor"})," RUN ",l==="simulation"?"LAB":"PRACTICE"]})})]})]})})},tt=({results:r,onClose:e})=>{if(!r||r.length===0)return null;const a=[...r].sort((n,u)=>n.time-u.time),s=Math.max(...r.map(n=>n.time),1),x=n=>n===1?"text-emerald-400":n===2?"text-teal-400":n===3?"text-lime-400":"text-slate-500",d=n=>n===1?"bg-gradient-to-r from-emerald-500 to-emerald-400":n===2?"bg-gradient-to-r from-teal-500 to-teal-400":n===3?"bg-gradient-to-r from-lime-500 to-lime-400":"bg-gradient-to-r from-slate-600 to-slate-500";return t.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center p-4 bg-black/80 backdrop-blur-md animate-in fade-in duration-300",children:t.jsxs("div",{className:"bg-slate-900/90 border border-white/10 rounded-3xl shadow-2xl w-full max-w-2xl max-h-[90vh] overflow-auto animate-in zoom-in-95 duration-300",children:[t.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-white/5",children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx(ye,{className:"text-emerald-400",size:28}),t.jsx("h2",{className:"text-2xl font-black text-white uppercase tracking-widest",children:"Lab Scoreboard"})]}),t.jsx("button",{onClick:e,className:"p-2 rounded-xl hover:bg-white/5 text-slate-400 hover:text-white transition-all active:scale-90",children:t.jsx(Ne,{size:24})})]}),t.jsxs("div",{className:"p-6 border-b border-white/5",children:[t.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[t.jsx(we,{size:16,className:"text-emerald-400"}),t.jsx("span",{className:"text-xs font-black text-slate-500 uppercase tracking-widest",children:"Time Comparison (Seconds)"})]}),t.jsx("div",{className:"space-y-3",children:a.map((n,u)=>{const l=a[0]?.time||1,c=Math.round(n.time/l*100);return t.jsxs("div",{className:"flex items-center gap-4",children:[t.jsx("span",{className:j("w-6 text-center font-black text-sm",x(u+1)),children:u+1}),t.jsx("div",{className:"w-32 flex flex-col",children:t.jsx("span",{className:j("text-xs font-black truncate uppercase tracking-tighter",x(u+1)),children:n.name})}),t.jsxs("div",{className:"flex-1 h-8 bg-slate-800/50 rounded-xl overflow-hidden relative border border-white/5",children:[t.jsx("div",{className:j("h-full rounded-xl transition-all duration-1000 ease-out",d(u+1)),style:{width:`${n.time/s*100}%`}}),t.jsxs("span",{className:"absolute inset-0 flex items-center justify-center gap-2 text-[11px] font-black text-white drop-shadow-md uppercase tracking-tight",children:[(n.time/1e3).toFixed(3),"s",t.jsxs("span",{className:j("font-black opacity-80",u===0?"text-white":"text-white/60"),children:["(",c,"%)"]})]})]})]},n.id)})})]}),t.jsxs("div",{className:"p-6",children:[t.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[t.jsx(be,{size:16,className:"text-emerald-400"}),t.jsx("span",{className:"text-xs font-black text-slate-500 uppercase tracking-widest",children:"Detailed Statistics"})]}),t.jsx("div",{className:"overflow-x-auto",children:t.jsxs("table",{className:"w-full text-left",children:[t.jsx("thead",{children:t.jsxs("tr",{className:"text-[10px] font-black text-slate-500 uppercase tracking-widest border-b border-white/5",children:[t.jsx("th",{className:"pb-3 px-2",children:"Rank / Engine"}),t.jsx("th",{className:"pb-3 text-center",children:"Steps"}),t.jsx("th",{className:"pb-3 text-center",children:"Time"}),t.jsx("th",{className:"pb-3 text-center",children:"% (Speed)"}),t.jsx("th",{className:"pb-3 text-center",children:"Complexity"})]})}),t.jsx("tbody",{className:"divide-y divide-white/5",children:a.map((n,u)=>{const l=a[0]?.time||1,c=Math.round(n.time/l*100);return t.jsxs("tr",{className:"group hover:bg-white/5 transition-colors",children:[t.jsx("td",{className:"py-4 px-2",children:t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsxs("span",{className:j("font-black text-sm w-4",x(u+1)),children:[u+1,"."]}),t.jsxs("div",{className:"flex flex-col",children:[t.jsx("span",{className:j("text-xs font-black uppercase tracking-tight",x(u+1)),children:n.name}),t.jsx("span",{className:"text-[9px] text-slate-500 font-bold uppercase",children:n.desc?.split(" ")[0]})]})]})}),t.jsx("td",{className:"py-4 text-center font-mono text-xs text-white/80",children:n.attempts.toLocaleString()}),t.jsxs("td",{className:"py-4 text-center font-mono text-xs text-emerald-400",children:[(n.time/1e3).toFixed(3),"s"]}),t.jsxs("td",{className:j("py-4 text-center text-[10px] font-black tracking-widest",u===0?"text-emerald-400":"text-slate-500"),children:[c,"%"]}),t.jsx("td",{className:"py-4 text-center font-mono text-[10px] text-slate-500",children:n.complexity||"O(Exp)"})]},n.id)})})]})})]}),t.jsx("div",{className:"p-6 border-t border-white/5 flex justify-center bg-slate-900/50 rounded-b-3xl",children:t.jsx("button",{onClick:e,className:"w-full max-w-xs py-3 bg-emerald-500 hover:bg-emerald-400 text-white rounded-xl font-black text-sm uppercase tracking-widest shadow-lg shadow-emerald-500/20 active:scale-95 transition-all",children:"Close Results"})})]})})},rt=({onClose:r})=>{const e=[{id:"dynamic",name:"Heuristic CSP",icon:t.jsx(re,{size:16}),strategy:"Constraint Satisfaction",complexity:"O(Exp)",suitability:"Universal Solver",desc:"Avoids conflicts by predicting constraint violations."},{id:"heuristic",name:"Smart Backtrack",icon:t.jsx(se,{size:16}),strategy:"Cell Priority DFS",complexity:"O(Exp)",suitability:"Densely Constrained",desc:'Uses "forced-cell" logic to populate squares first.'},{id:"metric",name:"Metric Backtrack",icon:t.jsx(te,{size:16}),strategy:"Distance-Weighted DFS",complexity:"O(Exp)",suitability:"Optimized Search",desc:"Prunes via global sum distance evaluation."},{id:"backtrack",name:"Recursive Backtrack",icon:t.jsx(pe,{size:16}),strategy:"Depth-First Search",complexity:"O(N!)",suitability:"3x3 Visualisation",desc:"Standard exhaustive search. State-space heavy."},{id:"brute",name:"Pure Brute Force",icon:t.jsx(Le,{size:16}),strategy:"Naive Iteration",complexity:"O(N^N)",suitability:"Small Data Only",desc:"Naive permutation without pruning."},{id:"formula",name:"Direct Formula",icon:t.jsx(W,{size:16}),strategy:"Mathematical Construction",complexity:"O(N²)",suitability:"Instant Execution",desc:"Fixed patterns like Siamese or Strachey methods."}];return t.jsxs("div",{className:"fixed inset-0 z-[100] flex items-center justify-center p-4",children:[t.jsx(ce.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:r,className:"absolute inset-0 bg-slate-950/80 backdrop-blur-sm"}),t.jsxs(ce.div,{initial:{opacity:0,scale:.9,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.9,y:20},className:"relative w-full max-w-4xl bg-slate-900 border border-emerald-500/30 rounded-3xl shadow-[0_0_50px_rgba(16,185,129,0.1)] overflow-hidden flex flex-col max-h-[90vh]",children:[t.jsxs("div",{className:"bg-emerald-500/10 px-6 py-5 border-b border-emerald-500/20 flex items-center justify-between",children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("div",{className:"p-2 bg-emerald-500/20 rounded-lg text-emerald-400",children:t.jsx(ke,{size:20})}),t.jsx("h4",{className:"text-sm font-black text-emerald-300 uppercase tracking-widest",children:"Global Algorithm Performance Matrix"})]}),t.jsx("button",{onClick:r,className:"p-2 hover:bg-white/10 rounded-full transition-colors text-slate-400 hover:text-white",children:t.jsx(Ne,{size:20})})]}),t.jsx("div",{className:"overflow-auto flex-1 p-6",children:t.jsx("div",{className:"overflow-x-auto",children:t.jsxs("table",{className:"w-full text-left text-[13px]",children:[t.jsx("thead",{children:t.jsxs("tr",{className:"text-[11px] font-black text-slate-400 uppercase tracking-widest border-b border-white/10 bg-white/5",children:[t.jsx("th",{className:"py-5 px-6",children:"Algorithm Engine"}),t.jsx("th",{className:"py-5 px-6",children:"Strategy"}),t.jsx("th",{className:"py-5 px-6",children:"Suitability"})]})}),t.jsx("tbody",{className:"divide-y divide-white/10",children:e.map(a=>t.jsxs("tr",{className:"group hover:bg-emerald-500/10 transition-colors",children:[t.jsx("td",{className:"py-5 px-6",children:t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("div",{className:"p-2.5 bg-slate-800 rounded-xl text-emerald-400 border border-white/5 group-hover:border-emerald-500/30 transition-all shrink-0",children:a.icon}),t.jsxs("div",{className:"flex flex-col",children:[t.jsx("span",{className:"font-black text-white uppercase tracking-tight text-sm leading-none",children:a.name}),t.jsx("span",{className:"text-[10px] text-slate-500 font-bold uppercase mt-1.5 leading-tight",children:a.desc})]})]})}),t.jsx("td",{className:"py-5 px-6 font-semibold text-slate-300 leading-tight",children:a.strategy}),t.jsx("td",{className:"py-5 px-6 whitespace-nowrap",children:t.jsx("span",{className:"px-3 py-1.5 rounded-lg bg-emerald-500/20 text-emerald-300 font-black text-[10px] uppercase tracking-wider border border-emerald-500/30",children:a.suitability})})]},a.id))})]})})})]})]})},at=({selectedSize:r,setSelectedSize:e,selectedAlgos:a,toggleAlgo:s,toggleAllAlgos:x,mainMode:d,setMainMode:n,onRunAll:u,onResetAll:l,isRunningAny:c,showAlgoTable:h,setShowAlgoTable:p,simulationAlgos:g,ALL_SIZES:o})=>{const i=a.size===g.length,m=a.size===0;return t.jsxs("div",{className:"glass-panel rounded-2xl p-4 flex flex-col gap-4 shadow-2xl relative overflow-hidden group h-full",children:[t.jsx("div",{className:"absolute inset-0 bg-blueprint opacity-[0.03] pointer-events-none"}),t.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-blue-500/5 to-transparent pointer-events-none"}),t.jsxs("div",{className:"flex items-center gap-2.5 mb-1 relative z-10",children:[t.jsx("div",{className:"p-1.5 bg-amber-500/20 rounded-lg text-amber-400",children:t.jsx(W,{size:14,className:"fill-amber-400/20"})}),t.jsx("h3",{className:"text-[10px] font-black text-slate-300 uppercase tracking-[0.2em]",children:"Lab Control"})]}),t.jsx("div",{className:"grid grid-cols-2 gap-1.5 p-1 bg-slate-900/60 rounded-xl border border-white/5 relative z-10",children:[{id:"simulation",label:"SIMULATION",icon:W},{id:"practice",label:"PRACTICE",icon:ge}].map(f=>t.jsxs("button",{onClick:()=>n(f.id),className:j("flex items-center justify-center gap-2 py-2.5 rounded-lg text-[9px] font-black tracking-[0.2em] transition-all",d===f.id?"bg-emerald-500/20 border border-emerald-500/30 text-emerald-300 shadow-xl shadow-emerald-500/10":"bg-transparent text-slate-500 hover:text-slate-400 hover:bg-white/5"),children:[t.jsx(f.icon,{size:12})," ",f.label]},f.id))}),t.jsxs("div",{className:"flex gap-2",children:[t.jsxs("button",{onClick:l,className:"flex-1 flex items-center justify-center gap-2 py-2.5 bg-slate-700/50 hover:bg-slate-700 text-slate-300 rounded-xl font-bold text-[10px] border border-slate-600/50 transition-all active:scale-95",children:[t.jsx(ee,{size:12})," RESET"]}),c?t.jsxs("button",{onClick:l,className:"flex-[1.5] flex items-center justify-center gap-2 py-2.5 bg-slate-700/50 hover:bg-slate-700/80 text-slate-300 rounded-xl font-bold text-[10px] border border-white/10 transition-all active:scale-95",children:[t.jsx($e,{size:12,fill:"currentColor"})," HOLD"]}):t.jsxs("button",{onClick:u,disabled:d==="practice",className:j("flex-[1.5] flex items-center justify-center gap-2 py-2.5 rounded-xl font-bold text-[10px] shadow-xl transition-all active:scale-95",d==="practice"?"bg-slate-800 text-slate-600 cursor-not-allowed":"bg-emerald-400/90 hover:bg-emerald-400 text-white shadow-emerald-400/20 font-black tracking-widest"),children:[t.jsx(le,{size:12,fill:"currentColor"})," RUN SELECTED"]})]}),d==="simulation"&&t.jsxs("div",{className:"flex flex-col gap-2",children:[t.jsxs("button",{onClick:x,className:j("flex items-center justify-center gap-2 px-3 py-2 rounded-lg bg-slate-900/40 border transition-all hover:bg-emerald-500/10",m?"border-slate-700 text-slate-500":"border-emerald-500/20 text-emerald-300"),children:[t.jsxs("div",{className:j("w-4 h-4 rounded flex items-center justify-center transition-all shrink-0",i?"bg-emerald-400":m?"border border-slate-700 bg-slate-800/50":"border border-emerald-400/30 bg-emerald-400/10"),children:[i&&t.jsx("div",{className:"w-1.5 h-1.5 bg-white rounded-full"}),!i&&!m&&t.jsx("div",{className:"w-1.5 h-1.5 bg-emerald-400/80 rounded-sm"})]}),t.jsxs("span",{className:"text-[11px] font-black uppercase tracking-widest",children:[i?"Unselect":m?"Select All":"Reset Selection"," (",a.size,"/",g.length,")"]})]}),t.jsx("div",{className:"grid grid-cols-2 gap-1.5",children:g.map(f=>t.jsxs("label",{className:j("flex items-center gap-2 px-2 py-1.5 rounded-lg border transition-all cursor-pointer group",a.has(f.id)?"bg-emerald-600/10 border-emerald-500/30 text-white":"bg-slate-900/20 border-white/5 text-slate-500 hover:text-slate-400 hover:border-white/10"),children:[t.jsx("input",{type:"checkbox",className:"hidden",checked:a.has(f.id),onChange:()=>s(f.id)}),t.jsx("div",{className:j("w-3 h-3 rounded flex items-center justify-center transition-all",a.has(f.id)?"bg-emerald-400 shadow-[0_0_4px_rgba(52,211,153,0.3)]":"border border-slate-700 bg-slate-800/50 group-hover:border-slate-600"),children:a.has(f.id)&&t.jsx("div",{className:"w-1 h-1 bg-white rounded-full"})}),t.jsx(f.icon,{size:11,className:a.has(f.id)?"text-emerald-400":"text-slate-600"}),t.jsx("span",{className:"text-[10px] font-black uppercase tracking-tighter whitespace-nowrap",children:f.label})]},f.id))})]}),t.jsxs("div",{className:"mt-auto pt-3 border-t border-slate-700/50",children:[t.jsxs("div",{className:"flex justify-between items-center mb-2 px-1",children:[t.jsx("span",{className:"text-[9px] font-bold text-slate-500 uppercase tracking-widest",children:"Select Order (N x N)"}),t.jsxs("button",{onClick:()=>p(!h),className:j("flex items-center gap-1.5 px-2 py-1 rounded-md text-[9px] font-black uppercase tracking-tighter transition-all border",h?"bg-slate-700 border-white/20 text-slate-300":"bg-emerald-500/30 border-emerald-400/50 text-emerald-300 hover:bg-emerald-500/50"),children:[t.jsx(ke,{size:10}),h?"Hide Matrix":"Engine Matrix"]})]}),t.jsx("div",{className:"grid grid-cols-4 gap-1.5",children:o.map(f=>t.jsxs("button",{onClick:()=>e(f),className:j("py-2 rounded-lg font-bold text-xs transition-all border",r===f?"bg-emerald-400/30 border-emerald-400/40 text-emerald-200 shadow-md shadow-emerald-500/10":"bg-slate-900/30 border-transparent text-slate-500 hover:text-slate-400"),children:[f,"x",f]},f))})]})]})},st=({algoId:r,size:e,triggerRun:a,triggerReset:s,speed:x,steps:d,onComplete:n})=>{const[u,l]=N.useState({attempts:0,time:0}),[c,h]=N.useState(!1),[p,g]=N.useState(!1),i={dynamic:{name:"Heuristic CSP",desc:"Constraint satisfaction algorithm",color:"text-emerald-400",bg:"bg-emerald-400"},heuristic:{name:"Smart Backtrack",desc:"Forced-assignment backtracking",color:"text-teal-400",bg:"bg-teal-400"},metric:{name:"Metric Backtrack",desc:"Distance-based pruning",color:"text-lime-400",bg:"bg-lime-400"},backtrack:{name:"Recursive Backtrack",desc:"Classic recursive search",color:"text-rose-400",bg:"bg-rose-500"},brute:{name:"Pure Brute Force",desc:"Exhaustive permutation search",color:"text-slate-400",bg:"bg-slate-500"},formula:{name:"Direct Formula",desc:"Static magic square construction",color:"text-yellow-400",bg:"bg-yellow-500"},swing:{name:"Formula Swing",desc:"Dynamic Matrix Rotation",color:"text-sky-400",bg:"bg-sky-500"}}[r]||{name:r,desc:"",color:"text-white",bg:"bg-white"};return t.jsxs("div",{className:j("p-5 rounded-2xl border transition-all duration-500",p?"bg-slate-700/30 border-indigo-500/30 scale-105":"bg-slate-900/40 border-white/5"),children:[t.jsxs("div",{className:"flex justify-between items-start mb-6",children:[t.jsxs("div",{className:"flex items-start gap-3",children:[t.jsx("div",{className:j("w-1 h-8 rounded-full",i.bg)}),t.jsxs("div",{children:[t.jsx("h5",{className:j("text-[10px] font-black uppercase tracking-[0.25em] mb-1.5",i.color),children:i.name}),t.jsx("p",{className:"text-[10px] text-slate-500 font-bold leading-tight",children:i.desc})]})]}),c&&t.jsx(je,{size:14,className:"text-emerald-500 bg-emerald-500/10 rounded-full p-0.5"})]}),t.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[t.jsxs("div",{className:"flex flex-col",children:[t.jsx("span",{className:"text-[10px] text-slate-500 uppercase font-black tracking-tighter mb-1",children:"Total Steps"}),t.jsxs("span",{className:"text-xl font-mono text-white flex items-baseline gap-1",children:[c?u.attempts.toLocaleString():"0",t.jsx("span",{className:"text-[10px] text-slate-500 font-bold tracking-normal",children:"steps"})]})]}),t.jsxs("div",{className:"flex flex-col",children:[t.jsx("span",{className:"text-[10px] text-slate-500 uppercase font-black tracking-tighter mb-1",children:"Elapsed Time"}),t.jsxs("span",{className:"text-xl font-mono text-white flex items-baseline gap-1",children:[c?(u.time/1e3).toFixed(3):"0.000",t.jsx("span",{className:"text-[10px] text-slate-500 font-bold tracking-normal",children:"sec"})]})]})]}),t.jsx("div",{className:"mt-4 h-1 bg-slate-800 rounded-full overflow-hidden",children:t.jsx("div",{style:{width:c?"100%":"0%"},className:j("h-full transition-all duration-1000 ease-out",i.bg)})})]})},lt=[3,4,5,6,7,8,9,10],he=[{id:"formula",label:"Formula",icon:Fe},{id:"swing",label:"Swing",icon:ee},{id:"dynamic",label:"CSP Solver",icon:re},{id:"heuristic",label:"Smart BT",icon:se},{id:"metric",label:"Metric BT",icon:W},{id:"backtrack",label:"Recursive",icon:ee},{id:"brute",label:"Brute Force",icon:te}];function ut({speed:r}){const[e,a]=N.useState(8),[s,x]=N.useState(new Set(["swing"])),[d,n]=N.useState("simulation"),[u,l]=N.useState(0),[c,h]=N.useState(0),[p,g]=N.useState(new Set),[o,i]=N.useState(!1),[m,f]=N.useState([]),w=oe.useRef({}),A=oe.useRef(new Set),[k,F]=N.useState(!1),_=b=>{x(y=>{const P=new Set(y);return P.has(b)?P.delete(b):P.add(b),P})},L=()=>{const b=he.map(y=>y.id);s.size===b.length?x(new Set):x(new Set(b))},$=N.useMemo(()=>({dynamic:U(e,"dynamic"),heuristic:U(e,"heuristic"),metric:U(e,"metric"),backtrack:U(e,"backtrack"),brute:U(e,"brute"),formula:U(e,"formula"),swing:U(e,"swing")}),[e]),G=()=>{w.current={},A.current=new Set(s),g(new Set(s)),i(!1),l(b=>b+1)},S=()=>{A.current=new Set,g(new Set),i(!1),h(b=>b+1)},H=(b,y)=>{if(d!=="simulation")return;const P={dynamic:{name:"Heuristic CSP"},heuristic:{name:"Smart Backtrack"},metric:{name:"Metric Backtrack"},backtrack:{name:"Recursive Backtrack"},brute:{name:"Pure Brute Force"},formula:{name:"Direct Formula"},swing:{name:"Formula Swing"}};A.current.has(b)&&(w.current[b]={id:b,name:P[b]?.name||b,attempts:y.attempts,time:y.time,complexity:P[b]?.complexity},A.current.delete(b),g(E=>{const B=new Set(E);return B.delete(b),B}),A.current.size===0&&Object.keys(w.current).length>0&&f(Object.values(w.current)))},V=["formula","dynamic","heuristic","metric","backtrack","brute","swing"],M=[...s].sort((b,y)=>V.indexOf(b)-V.indexOf(y)),R=[];d==="simulation"?M.forEach(b=>{R.push({type:"board",algoId:b})}):R.push({type:"board",algoId:"formula"});const v=Math.min(2,R.length);return R.splice(v,0,{type:"control"}),t.jsxs("div",{className:"max-w-7xl mx-auto px-6 pt-0 pb-28 lg:pb-8",children:[t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:R.map((b,y)=>b.type==="control"?t.jsx("div",{className:"hidden lg:block",children:t.jsx(at,{selectedSize:e,setSelectedSize:a,selectedAlgos:s,toggleAlgo:_,toggleAllAlgos:L,mainMode:d,setMainMode:n,onRunAll:G,onResetAll:S,isRunningAny:p.size>0,showAlgoTable:k,setShowAlgoTable:F,simulationAlgos:he,ALL_SIZES:lt})},"control-wrapper"):t.jsx(Ye,{size:e,mainMode:d,algoMode:b.algoId,steps:$[b.algoId]||[],speed:r,triggerRun:u,triggerReset:c},`${e}-${b.algoId}-${c}-${y}`))}),d==="simulation"&&M.length>0&&t.jsxs("div",{className:"hidden md:block mt-8 overflow-hidden bg-slate-800/40 backdrop-blur-xl border border-white/5 rounded-3xl shadow-2xl",children:[t.jsxs("div",{className:"bg-slate-900/50 px-4 py-3 border-b border-white/5 flex items-center justify-between",children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("div",{className:"p-2 bg-emerald-500/20 rounded-lg text-emerald-400",children:t.jsx(te,{size:20})}),t.jsx("h4",{className:"text-sm font-black text-white uppercase tracking-widest",children:"Real-time Performance Analysis"})]}),t.jsxs("div",{className:"flex items-center gap-2 text-[10px] font-bold text-slate-500 uppercase tracking-tighter",children:[t.jsx("span",{className:"w-2 h-2 rounded-full bg-emerald-500 animate-pulse"}),"LIVE RANKING"]})]}),t.jsx("div",{className:"p-4",children:t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:M.map(b=>t.jsx(st,{algoId:b,size:e,triggerRun:u,triggerReset:c,speed:r,steps:$[b]||[],onComplete:y=>H(b,y)},`score-${b}`))})})]}),d!=="simulation"&&t.jsx("div",{className:"mt-12 flex flex-col gap-6",children:t.jsxs("div",{className:"bg-emerald-950/20 border border-emerald-500/20 rounded-3xl p-8 flex flex-col md:flex-row items-center gap-8 shadow-2xl relative overflow-hidden group",children:[t.jsx("div",{className:"p-5 bg-emerald-500/20 rounded-2xl text-emerald-300 shadow-xl shadow-emerald-500/10",children:t.jsx(ge,{size:40})}),t.jsxs("div",{className:"text-center md:text-left flex-1",children:[t.jsx("h4",{className:"text-emerald-300 font-black text-xl mb-2 uppercase tracking-widest",children:"Algorithm Comparison Lab"}),t.jsxs("p",{className:"text-emerald-100/60 text-sm leading-relaxed max-w-2xl font-semibold",children:["In LAB mode, observe how various logic engines operate within the same ",t.jsxs("span",{className:"text-emerald-400",children:[e,"x",e]})," environment.",t.jsx("br",{className:"hidden md:block"}),"Compare the efficiency of each algorithm in real-time, from the intuitive Direct Formula to complex Backtracking."]})]})]})}),t.jsx(Pe,{children:k&&t.jsx(rt,{onClose:()=>F(!1)})}),t.jsx(et,{selectedSize:e,setSelectedSize:a,selectedAlgos:s,toggleAlgo:_,toggleAllAlgos:L,onRunAll:G,onResetAll:S,isRunningAny:p.size>0,mainMode:d,setMainMode:n,showAlgoTable:k,setShowAlgoTable:F}),o&&t.jsx(tt,{results:m,onClose:()=>i(!1)})]})}export{ut as default};
