import{c as re,a as j,b as G,j as t,d as v,A as be,m as ee,H as Ae,G as de,L as ce,S as le,R as ye,V as Ie,e as Pe,f as ue}from"./index-Co7IcmFf.js";import{B as ne,R as Re,G as we}from"./refresh-cw-B44NcVFC.js";import{Z as te,P as oe,T as ie,A as Ne,C as je,R as se,S as $e}from"./zap-C-yp_QnM.js";import{C as Be,S as Ee,X as ke}from"./x-BuEJL2zF.js";const Oe=[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]],Fe=re("book-open",Oe);const De=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],ve=re("check",De);const Me=[["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M17 20v2",key:"1rnc9c"}],["path",{d:"M17 2v2",key:"11trls"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M2 17h2",key:"7oei6x"}],["path",{d:"M2 7h2",key:"asdhe0"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"M20 17h2",key:"1fpfkl"}],["path",{d:"M20 7h2",key:"1o8tra"}],["path",{d:"M7 20v2",key:"4gnj0m"}],["path",{d:"M7 2v2",key:"1i4yhu"}],["rect",{x:"4",y:"4",width:"16",height:"16",rx:"2",key:"1vbyd7"}],["rect",{x:"8",y:"8",width:"8",height:"8",rx:"1",key:"z9xiuo"}]],Le=re("cpu",Me);const Te=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],Se=re("info",Te);const qe=[["rect",{x:"14",y:"3",width:"5",height:"18",rx:"1",key:"kaeet6"}],["rect",{x:"5",y:"3",width:"5",height:"18",rx:"1",key:"1wsw3u"}]],Ve=re("pause",qe);const Je=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]],Ge=re("target",Je);function He(r,e){r.flatBoard||(r.flatBoard=Array(e*e).fill(null),r.used=Array(e*e+1).fill(!1),r.stack=[],r.filledCount=0,r.firstNumberPositions=[],r.firstPosIdx=-1);const{flatBoard:a,used:s,stack:x}=r,d=e*(e*e+1)/2;if(r.filledCount>=e*e)return{board:W(a,e),isComplete:!0,desc:"Solution found!"};if(r.firstNumberPositions.length===0){if(e===3)r.firstNumberPositions=[0,1,4];else if(e===4)r.firstNumberPositions=[0,1,5];else for(let l=0;l<e*e;l++)r.firstNumberPositions.push(l);r.firstPosIdx=0}if(r.filledCount===0){const l=r.firstNumberPositions[r.firstPosIdx];return a[l]=1,s[1]=!0,r.filledCount=1,{board:W(a,e),val:1,highlight:{r:Math.floor(l/e),c:l%e,type:"active"},desc:`Optimal start: 1 at ${l}`}}let n=x[r.filledCount];if(!n){const l=a.map((u,f)=>u===null?f:-1).filter(u=>u!==-1);if(l.length===0)return xe(r,e);const h=l.map(u=>{let f=0;const b=Math.floor(u/e),I=u%e,C=[Array.from({length:e},($,_)=>b*e+_),Array.from({length:e},($,_)=>_*e+I)];return b===I&&C.push(Array.from({length:e},($,_)=>_*e+_)),b+I===e-1&&C.push(Array.from({length:e},($,_)=>_*e+(e-1-_))),C.forEach($=>{f+=$.reduce((_,L)=>_+(a[L]!==null?1:0),0)}),{idx:u,score:f}}).sort((u,f)=>f.score-u.score)[0].idx;let p=null;const g=Math.floor(h/e),o=h%e,c=[Array.from({length:e},(u,f)=>g*e+f),Array.from({length:e},(u,f)=>f*e+o)];g===o&&c.push(Array.from({length:e},(u,f)=>f*e+f)),g+o===e-1&&c.push(Array.from({length:e},(u,f)=>f*e+(e-1-f)));for(let u of c){const f=u.filter(b=>a[b]!==null);if(f.length===e-1){p=d-f.reduce((b,I)=>b+a[I],0);break}}n={cellIdx:h,triedNum:0,forcedVal:p},x[r.filledCount]=n}let m=null;if(n.forcedVal!==null){if(n.triedNum===0){m=n.forcedVal,n.triedNum=999;const l=me(m,n,r,e,!0);if(l)return l}}else{for(m=n.triedNum===0?2:n.triedNum+1;m<=e*e&&s[m];)m++;if(n.triedNum=m,m<=e*e){const l=me(m,n,r,e,!1);if(l)return l}}return xe(r,e)}function me(r,e,a,s,x){if(r<1||r>s*s||a.used[r])return null;const{flatBoard:d,used:n}=a,m=s*(s*s+1)/2,l=Math.floor(e.cellIdx/s),i=e.cellIdx%s;d[e.cellIdx]=r,n[r]=!0;const h=[Array.from({length:s},(p,g)=>l*s+g),Array.from({length:s},(p,g)=>g*s+i)];l===i&&h.push(Array.from({length:s},(p,g)=>g*s+g)),l+i===s-1&&h.push(Array.from({length:s},(p,g)=>g*s+(s-1-g)));for(let p of h){const g=p.map(c=>d[c]).filter(c=>c!==null),o=g.reduce((c,u)=>c+u,0);if(o>m||g.length===s&&o!==m)return d[e.cellIdx]=null,n[r]=!1,{board:W(d,s),highlight:{r:l,c:i,type:"backtrack"},desc:`Conflict! ${r} invalid.`}}return a.filledCount++,{board:W(d,s),val:r,highlight:{r:l,c:i,type:x?"forced":"active"},desc:x?`Logic: ${r}`:`Trying ${r}...`}}function xe(r,e){const{flatBoard:a,used:s,stack:x}=r;if(x[r.filledCount]=null,r.filledCount--,r.filledCount>0){const d=x[r.filledCount],n=a[d.cellIdx];return s[n]=!1,a[d.cellIdx]=null,{board:W(a,e),highlight:{r:Math.floor(d.cellIdx/e),c:d.cellIdx%e,type:"backtrack"},desc:`Backtracking from ${n}`}}else{const d=r.firstNumberPositions[r.firstPosIdx];return a[d]=null,s[1]=!1,r.firstPosIdx++,r.firstPosIdx>=r.firstNumberPositions.length?{board:W(a,e),isComplete:!0,desc:"No solution found."}:(r.filledCount=0,{board:W(a,e),desc:"Restarting search..."})}}function W(r,e){const a=[];for(let s=0;s<e;s++)a.push(r.slice(s*e,(s+1)*e));return a}function Ue(r,e){r.flatBoard||(r.flatBoard=Array(e*e).fill(null),r.used=Array(e*e+1).fill(!1),r.stack=[],r.filledCount=0,r.firstNumberPositions=[],r.firstPosIdx=-1);const{flatBoard:a,used:s,stack:x}=r,d=e*(e*e+1)/2;if(r.filledCount>=e*e)return{board:K(a,e),isComplete:!0,desc:"Solution found!"};if(r.firstNumberPositions.length===0){if(e===3)r.firstNumberPositions=[0,1,4];else if(e===4)r.firstNumberPositions=[0,1,5];else for(let l=0;l<e*e;l++)r.firstNumberPositions.push(l);r.firstPosIdx=0}if(r.filledCount===0){const l=r.firstNumberPositions[r.firstPosIdx];return a[l]=1,s[1]=!0,r.filledCount=1,{board:K(a,e),val:1,highlight:{r:Math.floor(l/e),c:l%e,type:"active"},desc:`Starting: Placing 1 at cell ${l}.`}}let n=x[r.filledCount];if(!n){const l=a.map((c,u)=>c===null?u:-1).filter(c=>c!==-1);if(l.length===0)return pe(r,e);const i=l[0];let h=null;const p=Math.floor(i/e),g=i%e,o=[Array.from({length:e},(c,u)=>p*e+u),Array.from({length:e},(c,u)=>u*e+g)];p===g&&o.push(Array.from({length:e},(c,u)=>u*e+u)),p+g===e-1&&o.push(Array.from({length:e},(c,u)=>u*e+(e-1-u)));for(let c of o){const u=c.filter(f=>a[f]!==null);if(u.length===e-1){h=d-u.reduce((f,b)=>f+a[b],0);break}}n={cellIdx:i,triedNum:0,forcedVal:h},x[r.filledCount]=n}let m=null;if(n.forcedVal!==null){if(n.triedNum===0){m=n.forcedVal,n.triedNum=999;const l=fe(m,n,r,e,!0);if(l)return l}}else{for(m=n.triedNum===0?2:n.triedNum+1;m<=e*e&&s[m];)m++;if(n.triedNum=m,m<=e*e){const l=fe(m,n,r,e,!1);if(l)return l}}return pe(r,e)}function fe(r,e,a,s,x){if(r<1||r>s*s||a.used[r])return null;const{flatBoard:d,used:n}=a,m=s*(s*s+1)/2,l=Math.floor(e.cellIdx/s),i=e.cellIdx%s;d[e.cellIdx]=r,n[r]=!0;const h=[Array.from({length:s},(p,g)=>l*s+g),Array.from({length:s},(p,g)=>g*s+i)];l===i&&h.push(Array.from({length:s},(p,g)=>g*s+g)),l+i===s-1&&h.push(Array.from({length:s},(p,g)=>g*s+(s-1-g)));for(let p of h){const g=p.map(c=>d[c]).filter(c=>c!==null),o=g.reduce((c,u)=>c+u,0);if(o>m||g.length===s&&o!==m)return d[e.cellIdx]=null,n[r]=!1,{board:K(d,s),highlight:{r:l,c:i,type:"backtrack"},desc:`Conflict! ${r} breaks magicsum.`}}return a.filledCount++,{board:K(d,s),val:r,highlight:{r:l,c:i,type:x?"forced":"active"},desc:x?`Forced: ${r}`:`Placing ${r}...`}}function pe(r,e){const{flatBoard:a,used:s,stack:x}=r;if(x[r.filledCount]=null,r.filledCount--,r.filledCount>0){const d=x[r.filledCount],n=a[d.cellIdx];return s[n]=!1,a[d.cellIdx]=null,{board:K(a,e),highlight:{r:Math.floor(d.cellIdx/e),c:d.cellIdx%e,type:"backtrack"},desc:`Backtracking from ${n}`}}else{const d=r.firstNumberPositions[r.firstPosIdx];return a[d]=null,s[1]=!1,r.firstPosIdx++,r.firstPosIdx>=r.firstNumberPositions.length?{board:K(a,e),isComplete:!0,desc:"No solution."}:(r.filledCount=0,{board:K(a,e),desc:"Restarting..."})}}function K(r,e){const a=[];for(let s=0;s<e;s++)a.push(r.slice(s*e,(s+1)*e));return a}function Ze(r,e,a){r.board||(r.board=Array(e*e).fill(null),r.used=Array(e*e+1).fill(!1),r.currentNum=1,r.stack=[]);const{board:s,used:x,stack:d}=r,n=e*(e*e+1)/2;if(r.currentNum>e*e)return Xe(s,e,n)?{board:ae(s,e),isComplete:!0,desc:"Solution found!"}:he(r,e,"Invalid arrangement. Backtracking...");let m=d[r.currentNum];if(!m){let o=[];for(let c=0;c<e*e;c++)s[c]===null&&o.push(c);if(a==="metric"){const c=(e-1)/2;o.sort((u,f)=>{const b=Math.floor(u/e),I=u%e,C=Math.floor(f/e),$=f%e;return Math.pow(b-c,2)+Math.pow(I-c,2)-(Math.pow(C-c,2)+Math.pow($-c,2))})}else if(a==="backtrack")for(let c=o.length-1;c>0;c--){const u=Math.floor(Math.random()*(c+1));[o[c],o[u]]=[o[u],o[c]]}m={candidates:o,triedIndex:-1},d[r.currentNum]=m}const l=s.indexOf(r.currentNum);if(l!==-1&&(s[l]=null),x[r.currentNum]=!1,m.triedIndex++,m.triedIndex>=m.candidates.length)return he(r,e,`Backtracking: No positions left for ${r.currentNum}`);const i=m.candidates[m.triedIndex],h=Math.floor(i/e),p=i%e;s[i]=r.currentNum,x[r.currentNum]=!0;let g=!0;if(a!=="brute"){const o=[Array.from({length:e},(c,u)=>h*e+u),Array.from({length:e},(c,u)=>u*e+p)];h===p&&o.push(Array.from({length:e},(c,u)=>u*e+u)),h+p===e-1&&o.push(Array.from({length:e},(c,u)=>u*e+(e-1-u)));for(let c of o){const u=c.map(b=>s[b]).filter(b=>b!==null),f=u.reduce((b,I)=>b+I,0);if(f>n||u.length===e&&f!==n){g=!1;break}}}if(g){const o=r.currentNum;return r.currentNum++,{board:ae(s,e),val:o,highlight:{r:h,c:p,type:"active"},desc:`Placing ${o} at (${h}, ${p})...`}}else return s[i]=null,x[r.currentNum]=!1,{board:ae(s,e),highlight:{r:h,c:p,type:"backtrack"},desc:`Conflict! ${r.currentNum} at (${h}, ${p}) invalidates sum.`}}function he(r,e,a){const{board:s,used:x,stack:d}=r;if(d[r.currentNum]=null,r.currentNum--,r.currentNum<1)return r.currentNum=1,{board:ae(s,e),isComplete:!0,desc:"Search exhausted."};const n=s.indexOf(r.currentNum);return{board:ae(s,e),highlight:n!==-1?{r:Math.floor(n/e),c:n%e,type:"backtrack"}:null,desc:a}}function Xe(r,e,a){for(let d=0;d<e;d++){let n=0;for(let m=0;m<e;m++)n+=r[d*e+m];if(n!==a)return!1}for(let d=0;d<e;d++){let n=0;for(let m=0;m<e;m++)n+=r[m*e+d];if(n!==a)return!1}let s=0,x=0;for(let d=0;d<e;d++)s+=r[d*e+d],x+=r[d*e+(e-1-d)];return s===a&&x===a}function ae(r,e){const a=[];for(let s=0;s<e;s++)a.push(r.slice(s*e,(s+1)*e));return a}const Qe=({size:r,mainMode:e,algoMode:a,steps:s,speed:x,triggerRun:d=0,triggerReset:n=0,onComplete:m})=>{const l=e==="simulation"?a==="formula"||a==="swing"?"learn":a==="dynamic"?"dynamic":"brute":"practice",[i,h]=j.useState(0),[p,g]=j.useState(!1),[o,c]=j.useState(!1),[u,f]=j.useState([]),[b,I]=j.useState(1),[C,$]=j.useState({r:0,c:0}),[_,L]=j.useState(null),[F,T]=j.useState(!0),S=j.useRef(null),J=Math.max(50,1050-x),[q,B]=j.useState({attempts:0,time:0}),[H,w]=j.useState(""),[M,N]=j.useState(null),k=j.useRef(0),y=j.useRef(null),P=j.useCallback((E=!1)=>{let V=Array.from({length:r},()=>Array(r).fill(null));if(c(!1),g(E===!0),a==="swing"&&(r===4||r===8)){for(let A=0;A<r;A++)for(let O=0;O<r;O++)A%2===0?V[A][O]=A*r+O+1:V[A][O]=A*r+(r-1-O)+1;I(r*r+1)}else I(1);f(V),B({attempts:0,time:0}),h(0),w(""),N(null),y.current=null,k.current=0,E===!0&&G.init()},[r,a]);j.useEffect(()=>{g(!1),P()},[r,e,a,P]);const U=j.useRef(0);j.useEffect(()=>{d>U.current&&(U.current=d,P(!0))},[d,P]);const Z=j.useRef(0);return j.useEffect(()=>{n>Z.current&&(Z.current=n,g(!1),P())},[n,P]),j.useEffect(()=>{let E;return p&&!o&&(E=setInterval(()=>{if(k.current>0){const V=Math.floor(performance.now()-k.current);B(A=>({...A,time:V}))}},100)),()=>{E&&clearInterval(E)}},[p,o]),j.useEffect(()=>{let E=!0;if(!p){S.current&&(clearTimeout(S.current),S.current=null);return}if(y.current||(k.current=performance.now(),a==="heuristic"?y.current={flatBoard:Array(r*r).fill(null),used:Array(r*r+1).fill(!1),stack:[],filledCount:0,firstNumberPositions:[],firstPosIdx:-1}:l==="brute"||a==="backtrack"||a==="metric"?y.current={board:Array(r*r).fill(null),used:Array(r*r+1).fill(!1),currentNum:1,stack:[]}:l==="dynamic"?y.current={flatBoard:Array(r*r).fill(null),used:Array(r*r+1).fill(!1),stack:[],filledCount:0,firstNumberPositions:[],firstPosIdx:-1}:y.current={type:"learn"}),l==="learn")(async()=>{k.current===0&&(k.current=performance.now());let A=i;for(;A<s.length-1&&E&&p;){const O=s[A];let X=J;if(r===8&&O.type==="setup"&&(X=Math.max(30,J/4)),O.type==="highlight_targets"&&(X=1500),O.type==="swing_rotating"&&(X=4e3),await new Promise(R=>{S.current=setTimeout(R,X)}),!E||!p)break;if(A++,h(A),B(R=>({...R,attempts:A})),F){const R=s[A];R?.val?G.playNote(R.val):R?.type==="highlight_targets"||R?.type==="swing_rotating"?G.playNote(r*r):R?.type==="complete"&&G.playSuccess()}if(A===s.length-1||s[A].type==="complete"){const R=performance.now()-k.current;g(!1),c(!0),B(z=>({...z,time:R})),m&&m({attempts:A,time:R});break}}})();else{const V=()=>{if(!E||!p)return;let A;if(a==="heuristic"?A=Ue(y.current,r):l==="brute"||a==="backtrack"||a==="metric"?A=Ze(y.current,r,a):l==="dynamic"&&(A=He(y.current,r)),A&&E)if(f(A.board),w(A.desc||""),N(A.highlight||null),F&&A.val&&G.playNote(A.val),A.isComplete){const O=performance.now()-k.current;g(!1),c(!0),B(X=>({attempts:q.attempts+1,time:O})),F&&G.playSuccess(),m&&m({attempts:q.attempts+1,time:O})}else B(O=>({...O,attempts:O.attempts+1})),S.current=setTimeout(V,J)};S.current=setTimeout(V,J)}return()=>{E=!1,S.current&&clearTimeout(S.current)}},[p,i,s,J,l,a,r,m,F]),{practiceBoard:u,targetNum:b,lastCorrectPos:C,feedback:_,setFeedback:L,isSoundEnabled:F,setIsSoundEnabled:T,stats:q,currentStepIndex:i,isPlaying:p,setIsPlaying:g,isComplete:o,resetPractice:P,handlePracticeClick:(E,V,A,O)=>{if(u[E][V]!==null)return;const X=s.find(R=>R.highlight&&R.highlight.r===E&&R.highlight.c===V&&R.val===b);if(X){const R=[...u];if(R[E]=[...R[E]],R[E][V]=b,f(R),I(z=>z+1),$({r:E,c:V}),F&&G.playNote(b),A(X),b===r*r){const z=performance.now()-k.current;c(!0),B(_e=>({..._e,time:z})),F&&G.playSuccess(),m&&m({attempts:q.attempts,time:z})}}else B(R=>({...R,attempts:R.attempts+1})),O()},dynamicDesc:H,dynamicHighlight:M,setCurrentStepIndex:h}},Ye=({v:r,r:e,c:a,size:s,algoMode:x,mainMode:d,isComplete:n,isPlaying:m,currentStep:l,highlight:i,dynamicHighlight:h,onClick:p,cellClasses:g,getFormulaColor:o})=>{const c=m&&x==="dynamic"&&h?.r===e&&h?.c===a,u=m&&(x==="formula"||x==="swing")&&i?.r===e&&i?.c===a,f=x==="dynamic"?h?.type:null,b=x==="formula"||x==="swing";let I={};const C=(l?.type==="swap_highlight"||l?.type==="swap")&&(i?.r===e&&i?.c===a||i?.targets?.[0]?.r===e&&i?.targets?.[0]?.c===a);if(r&&x==="formula"&&!C){const S=o(r,e,a,n);I={backgroundColor:S,borderColor:`hsla(${140-Math.pow((e+a)/((s-1)*2),.6)*120}, 95%, 65%, 0.75)`,color:"#fff",textShadow:"0 1px 4px rgba(0,0,0,0.6)",boxShadow:u?`0 0 30px ${S}`:"inset 0 0 10px rgba(0,0,0,0.2)"}}let $={};const _=x==="swing"&&s===4&&(a===1||a===2),L=x==="swing"&&s===8&&(a===1||a===2||a===5||a===6);if(_&&(l?.type==="highlight_targets"||l?.type==="swing_rotating"||n)){const q=(1.5-a)*64,B=(1.5-e)*64,H=(56/2+q)/56*100,w=(56/2+B)/56*100;$={backgroundColor:"rgba(245, 158, 11, 0.6)",borderColor:"rgb(245, 158, 11)",boxShadow:"0 0 40px rgba(245, 158, 11, 0.4)",color:"#fff",zIndex:40,...l?.type==="swing_rotating"?{transformOrigin:`${H}% ${w}%`,transform:"rotate(180deg)",transition:"transform 3.6s cubic-bezier(0.4, 0, 0.2, 1)"}:{transform:"none",transition:n?"none":"background-color 1s ease-in-out, border-color 1s ease-in-out, box-shadow 1s ease-in-out"}}}if(L&&(l?.type==="highlight_targets"||l?.type==="swing_rotating"||n)){const q=(3.5-a)*36,B=(3.5-e)*36,H=(32/2+q)/32*100,w=(32/2+B)/32*100;$={backgroundColor:"rgba(245, 158, 11, 0.6)",borderColor:"rgb(245, 158, 11)",boxShadow:"0 0 40px rgba(245, 158, 11, 0.4)",color:"#fff",zIndex:40,...l?.type==="swing_rotating"?{transformOrigin:`${H}% ${w}%`,transform:"rotate(180deg)",transition:"transform 3.8s cubic-bezier(0.34, 1.56, 0.64, 1)"}:{transform:"none",transition:n?"none":"background-color 1s ease-in-out, border-color 1s ease-in-out, box-shadow 1s ease-in-out"}}}let F="",T="";if(n&&x!=="formula"){const S=(e===0||e===s-1)&&(a===0||a===s-1),D=e===Math.floor(s/2)&&a===Math.floor(s/2);S||D?(T="border border-amber-400/80",F="text-white"):a===Math.floor(s/2)?(F="text-pink-300 bg-pink-900/20",T="border border-pink-500/30"):(F="text-sky-300 bg-sky-900/40",T="border border-sky-500/30")}return t.jsxs("div",{onClick:p,style:{...I,...$},className:v("flex items-center justify-center rounded-md font-normal transition-all relative overflow-hidden",g,r&&+r>0?n?"":"text-emerald-50":"text-transparent",b?"border":!n&&r?"bg-emerald-900/40 border border-emerald-500/20":!n&&"bg-slate-800/50 border border-slate-700/30",b&&!r&&!n&&"bg-slate-900/60 border-emerald-500/10 border-dashed",n&&!b&&F,n&&!b?T||"border border-transparent":"",u&&d==="simulation"&&"ring-2 ring-white z-20 shadow-[0_0_30px_rgba(255,255,255,0.4)] animate-in zoom-in duration-200",b&&l?.type==="scan"&&(e%4===a%4||e%4+a%4===3?"bg-emerald-500/20 border-emerald-500/50 text-emerald-200":"bg-slate-700/50 border-slate-600/50 text-slate-400"),b&&(l?.type==="pop_prepare"||l?.type==="mass_invert")&&i?.targets?.some(S=>S.r===e&&S.c===a)&&v("z-30 transition-all duration-700 ease-in-out",l?.type==="pop_prepare"?v("scale-110 shadow-2xl",(i?.group==="top_bottom"?e===0:a===0)?"bg-rose-500/40 border-rose-400 text-rose-100 shadow-rose-500/30":"bg-blue-500/40 border-blue-400 text-blue-100 shadow-blue-500/30"):"",l?.type==="mass_invert"?"scale-100 rotate-y-180 bg-purple-500/50 border-purple-400 text-white shadow-purple-500/40 ring-1 ring-purple-300":""),x==="swing"&&(l?.type==="swing_prepare"||l?.type==="swing_done")&&i?.targets?.some(S=>S.r===e&&S.c===a)&&v("z-40 transition-all duration-1000 ease-in-out",l?.type==="swing_prepare"?"scale-110 shadow-[0_0_30px_rgba(56,189,248,0.6)] border-sky-400 bg-sky-500/40 text-white animate-cyber-pulse":"",l?.type==="swing_done"?"scale-100 rotate-y-180 bg-indigo-500/70 border-indigo-300 text-white shadow-[0_0_40px_rgba(99,102,241,0.7)] ring-2 ring-indigo-400/50":""),x==="swing"&&l?.type==="scan_swing"&&(i?.targets?.some(S=>S.r===e&&S.c===a)?"ring-2 ring-sky-400/50 shadow-[0_0_25px_rgba(34,211,238,0.4)] bg-sky-900/80 text-cyan-300 z-10 border-cyan-500/50":"opacity-30 grayscale-[0.8]"),x==="swing"&&l?.type==="highlight_targets"&&i?.targets?.some(S=>S.r===e&&S.c===a)&&"bg-blue-600/80 text-white z-10 shadow-[0_0_30px_rgba(37,99,235,0.6)] border-blue-400 animate-cyber-pulse ring-2 ring-blue-300",x==="swing"&&s===6&&l?.type==="highlight_quadrant"&&i?.targets?.some(S=>S.r===e&&S.c===a)&&"bg-blue-500/20 border-blue-400/50 ring-1 ring-blue-400/30 z-10",b&&l?.type==="invert"&&u&&"bg-purple-500/40 border-purple-400 ring-1 ring-purple-400 animate-pulse text-white",l?.type==="swap_highlight"&&(i?.r===e&&i?.c===a?"text-amber-400 !bg-emerald-900 border-amber-400 shadow-[0_0_15px_rgba(251,191,36,0.5)] scale-110 z-50 ring-2 ring-amber-400":i?.targets?.[0]?.r===e&&i?.targets?.[0]?.c===a?"text-cyan-400 !bg-emerald-900 border-cyan-400 shadow-[0_0_15px_rgba(34,211,238,0.5)] scale-110 z-50 ring-2 ring-cyan-400":""),l?.type==="swap"&&(i?.r===e&&i?.c===a?"text-cyan-400 !bg-emerald-900 border-cyan-400 scale-100 z-50 transition-all duration-700":i?.targets?.[0]?.r===e&&i?.targets?.[0]?.c===a?"text-amber-400 !bg-emerald-900 border-amber-400 scale-100 z-50 transition-all duration-700":""),c&&f==="active"&&"ring-2 ring-amber-400 bg-amber-900/40 z-10 scale-105",c&&f==="forced"&&"ring-2 ring-purple-400 bg-purple-900/60 z-10 scale-110 shadow-lg shadow-purple-500/40",c&&f==="backtrack"&&"ring-2 ring-rose-500 bg-rose-500/30 z-10 animate-pulse"),children:[r,c&&f==="forced"&&t.jsx("div",{className:"absolute top-0.5 right-0.5 w-1.5 h-1.5 bg-purple-400 rounded-full animate-ping"}),c&&f==="backtrack"&&t.jsx("div",{className:"absolute inset-0 bg-rose-500/20 animate-pulse"})]})},We=({size:r,mainMode:e,algoMode:a,steps:s=[],speed:x=500,triggerRun:d=0,triggerReset:n=0,onComplete:m})=>{const{currentStepIndex:l,isPlaying:i,setIsPlaying:h,isComplete:p,practiceBoard:g,setFeedback:o,isSoundEnabled:c,resetPractice:u,handlePracticeClick:f,stats:b,dynamicDesc:I,dynamicHighlight:C}=Qe({size:r,mainMode:e,algoMode:a,steps:s,speed:x,triggerRun:d,triggerReset:n,onComplete:m}),$=s[l]||{board:[],desc:""},_=e==="simulation"&&(a==="formula"||a==="swing")?$?.type==="complete":p,L=r*(r*r+1)/2,[F,T]=j.useState(!1);j.useEffect(()=>{if(_){const N=setTimeout(()=>T(!0),1e3),k=setTimeout(()=>T(!1),3e3);return()=>{clearTimeout(N),clearTimeout(k)}}else T(!1)},[_]);const{highlight:S}=$,D=e==="simulation"&&(a==="formula"||a==="swing")&&(i||_||l>0)&&$?.board?.length>0?$.board:g,J=j.useMemo(()=>{const N=Array(r).fill(0),k=Array(r).fill(0);return D.forEach(y=>{y&&y.forEach((P,U)=>{P!==null&&(N[U]+=P,k[U]++)})}),N.map((y,P)=>({sum:y,isComplete:y===L&&k[P]===r}))},[D,r,L]),q=j.useMemo(()=>{if(_)return"100.0";if(e==="simulation"&&(a==="swing"||a==="formula"&&r%2===0)&&s.length>0){const y=s[l]?.type;if(y==="complete")return"100.0";if(a==="swing")return y==="swing_rotating"?"80.0":y==="highlight_targets"?"50.0":"0.0";if(a==="formula")return y==="setup"?"0.0":y==="scan"||y==="pop_prepare"?"50.0":y==="mass_invert"?"85.0":"90.0"}if(e==="simulation"&&s.length>0)return((l+1)/s.length*100).toFixed(1);let N=0;D.forEach(y=>{y&&y.forEach(P=>{P!==null&&P>0&&P<=r*r&&N++})});const k=N/(r*r)*100;return k>=100&&!_?"99.9":k.toFixed(1)},[D,r,_,l,s,a,e]),B=()=>r<=3?"w-16 h-16 text-2xl":r<=4?"w-12 h-12 text-xl":r<=6?"w-10 h-10 text-lg":r<=8?"w-8 h-8 text-base":"w-7 h-7 text-sm",H=()=>r<=4?"gap-2":r<=6?"gap-1.5":"gap-1",w=(N,k)=>{f(N,k,y=>{c&&G.playNote(y.val)},()=>{o({type:"error",msg:"Wrong",icon:Ge}),setTimeout(()=>o(null),1e3)})},M=(N,k,y,P)=>{if(!N)return null;const U=(k+y)/((r-1)*2);return`hsla(${140-Math.pow(U,.6)*120}, ${P?"85%":"95%"}, ${P?"45%":"50%"}, ${P?.75:.9})`};return t.jsxs("div",{className:v("glass-panel rounded-2xl p-3 flex flex-col shadow-2xl transition-all group overflow-hidden relative",_?"border-emerald-500/30 bg-emerald-500/5 shadow-[0_0_30px_rgba(16,185,129,0.1)]":"border-slate-700/50"),children:[t.jsx("div",{className:"absolute inset-0 bg-blueprint opacity-[0.03] pointer-events-none"}),t.jsxs("div",{className:"flex justify-between items-center mb-1.5 min-h-[28px]",children:[t.jsxs("div",{className:"flex items-center gap-3",children:[a==="dynamic"?t.jsx(ne,{size:18,className:"text-emerald-400"}):t.jsx(te,{size:18,className:"text-emerald-400"}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsxs("span",{className:"text-sm font-black text-white bg-emerald-500/30 px-2 py-0.5 rounded-lg border border-emerald-500/40 shadow-[0_0_10px_rgba(16,185,129,0.2)]",children:[r,"x",r]}),t.jsx("h3",{className:"text-sm font-black uppercase tracking-[0.25em] text-white/90 drop-shadow-md",children:e==="simulation"?`${a} ENGINE`:"PRACTICE"})]})]}),t.jsx("div",{className:"flex items-center gap-2",children:e==="simulation"&&t.jsxs(t.Fragment,{children:[t.jsx("button",{onClick:u,className:"p-1.5 rounded-lg bg-slate-800/60 text-slate-500 hover:text-emerald-400 border border-white/5 transition-all active:scale-95 group/btn",title:"Reset",children:t.jsx(Re,{size:14,className:"group-hover/btn:rotate-180 transition-transform duration-500"})}),i?t.jsx("button",{onClick:()=>h(!1),className:"p-1.5 rounded-lg bg-rose-500/10 text-rose-400 hover:bg-rose-500/20 transition-all active:scale-95 border border-rose-500/20 shadow-lg shadow-rose-500/10",children:t.jsx(Ve,{size:14,fill:"currentColor"})}):t.jsx("button",{onClick:()=>{_?u(!0):h(!0)},className:"p-1.5 rounded-lg bg-emerald-500/10 text-emerald-400 hover:bg-emerald-500/20 border border-emerald-500/20 transition-all active:scale-95 shadow-lg shadow-emerald-500/10",children:t.jsx(oe,{size:14,fill:"currentColor"})})]})})]}),t.jsxs("div",{className:v("flex flex-col items-center justify-center relative px-2 flex-1 transition-all duration-500",r>7?"py-6":"py-3"),children:[t.jsxs("div",{className:"relative",children:[t.jsx(be,{children:F&&t.jsxs(ee.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.8,ease:"easeInOut"},className:"absolute inset-[-8px] z-30 flex items-center justify-center cursor-pointer overflow-hidden rounded-xl",onClick:()=>T(!1),children:[t.jsx(ee.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"absolute inset-0 bg-slate-950/85 border border-emerald-500/30"}),t.jsxs(ee.div,{initial:{scale:.8,opacity:0,y:15},animate:{scale:1,opacity:1,y:0},exit:{scale:.85,opacity:0,y:-10},transition:{duration:.6,delay:.1},className:"relative flex flex-col items-center gap-3 p-4 w-full",children:[t.jsx(ee.div,{animate:{y:[0,-5,0]},transition:{duration:2,repeat:1/0,ease:"easeInOut"},className:"bg-gradient-to-br from-purple-400 to-violet-600 p-3 rounded-2xl shadow-[0_0_20px_rgba(139,92,246,0.5)]",children:t.jsx(ie,{size:r>6?40:32,className:"text-white",fill:"rgba(255,255,255,0.2)"})}),t.jsxs("div",{className:"space-y-1 text-center",children:[t.jsx("h4",{className:"text-lg font-black text-white tracking-[0.2em] leading-none uppercase drop-shadow-lg",children:"COMPLETE"}),t.jsxs("p",{className:"text-[10px] font-bold text-emerald-400 uppercase tracking-[0.3em] opacity-80",children:["SUM: ",L]})]}),t.jsxs("div",{className:"flex gap-4 mt-1",children:[t.jsxs("div",{className:"text-center",children:[t.jsx("p",{className:"text-[8px] font-bold text-slate-500 uppercase tracking-tighter",children:"Time"}),t.jsxs("p",{className:"text-sm font-mono font-black text-emerald-300",children:[(b?.time/1e3||0).toFixed(2),"s"]})]}),t.jsxs("div",{className:"text-center",children:[t.jsx("p",{className:"text-[8px] font-bold text-slate-500 uppercase tracking-tighter",children:"Steps"}),t.jsx("p",{className:"text-sm font-mono font-black text-emerald-300",children:b?.attempts||0})]})]})]})]})}),t.jsx("div",{className:"flex flex-col gap-1",children:D.map((N,k)=>{const y=N?N.reduce((Z,Q)=>Z+(Q||0),0):0,P=y===L&&N&&N.every(Z=>Z!==null),U=B();return t.jsxs("div",{className:v("flex items-center",H()),children:[t.jsx("div",{className:"w-5 h-5 mr-1 opacity-0"}),N&&N.map((Z,Q)=>t.jsx(Ye,{v:Z,r:k,c:Q,size:r,algoMode:a,mainMode:e,isComplete:_,isPlaying:i,currentStep:$,dynamicHighlight:C,onClick:()=>e==="practice"&&w(k,Q),cellClasses:U,getFormulaColor:M},`${k}-${Q}`)),t.jsx("div",{className:v("flex items-center justify-center font-mono font-bold w-5 h-5 ml-1 text-[8px]",P?"text-sky-400":"text-slate-600",_?"opacity-100":"opacity-0"),children:y>0?y:""})]},`row-${k}`)})})]}),t.jsxs("div",{className:v("flex items-center mt-1",H()),children:[t.jsx("div",{className:"w-5 h-5 mr-1 opacity-0"}),J.map((N,k)=>t.jsx("div",{className:v("flex items-center justify-center font-mono font-bold transition-all duration-700",B(),"text-[8px] h-5",N.isComplete?"text-sky-400":"text-slate-600",_?"opacity-100":"opacity-0"),children:N.sum>0?N.sum:""},`colsum-${k}`)),t.jsx("div",{className:v("flex items-center justify-center font-mono font-bold w-5 h-5 ml-1 text-[8px] transition-all duration-700",D.reduce((N,k,y)=>N+(k&&k[y]?k[y]:0),0)===L&&D.every((N,k)=>N&&N[k])?"text-sky-400":"text-slate-600",_?"opacity-100":"opacity-0"),children:(()=>{const N=D.reduce((k,y,P)=>k+(y&&y[P]?y[P]:0),0);return N>0?N:""})()})]})]}),e==="simulation"&&t.jsxs("div",{className:"flex flex-col mt-3 gap-2 relative z-10",children:[t.jsxs("div",{className:"h-12 flex items-center justify-center px-4 bg-slate-950/60 rounded-xl border border-white/5 shadow-inner overflow-hidden relative",children:[t.jsx("div",{className:"absolute inset-0 bg-blue-500/5 transition-colors duration-500 group-hover:bg-blue-500/10"}),t.jsx("span",{className:"text-[11px] font-black uppercase tracking-widest text-center text-orange-400 relative z-10 leading-snug",children:a!=="formula"&&a!=="swing"?I||"Ready for Simulation":$?.desc||(_?"Analysis Finished":"Processing Logic...")})]}),t.jsxs("div",{className:"grid grid-cols-4 gap-1 p-2 bg-slate-900/40 rounded-xl border border-white/5",children:[t.jsxs("div",{className:"flex flex-col items-center justify-center py-1 rounded-lg hover:bg-white/5 transition-colors cursor-help group/stat",children:[t.jsx(Ne,{size:12,className:"text-slate-500 group-hover/stat:text-rose-400 mb-1 transition-colors"}),t.jsx("span",{className:"text-[10px] font-mono font-bold text-slate-300",children:b?.attempts||0})]}),t.jsxs("div",{className:"flex flex-col items-center justify-center py-1 rounded-lg hover:bg-white/5 transition-colors cursor-help group/stat",children:[t.jsx(ie,{size:12,className:"text-slate-500 group-hover/stat:text-emerald-400 mb-1 transition-colors"}),t.jsxs("span",{className:"text-[10px] font-mono font-bold text-emerald-400",children:[q,"%"]})]}),t.jsxs("div",{className:"flex flex-col items-center justify-center py-1 rounded-lg hover:bg-white/5 transition-colors cursor-help group/stat",children:[t.jsx(Ae,{size:12,className:"text-slate-500 group-hover/stat:text-amber-400 mb-1 transition-colors"}),t.jsx("span",{className:"text-[10px] font-mono font-bold text-slate-300",children:L})]}),t.jsxs("div",{className:"flex flex-col items-center justify-center py-1 rounded-lg hover:bg-white/5 transition-colors cursor-help group/stat",children:[t.jsx(je,{size:12,className:"text-slate-500 group-hover/stat:text-sky-400 mb-1 transition-colors"}),t.jsxs("span",{className:"text-[10px] font-mono font-bold text-slate-300",children:[(b?.time/1e3||0).toFixed(2),"s"]})]})]})]})]})};class Ke{static getZigZagPositions(e){const a=[];for(let s=0;s<e;s++)if(s%2===0)for(let x=0;x<e;x++)a.push({r:s,c:x});else for(let x=e-1;x>=0;x--)a.push({r:s,c:x});return a}static generateSteps(e){if(e!==4&&e!==8&&e!==6)return[];const a=Array.from({length:e},()=>Array(e).fill(null)),s=[],x=(i,h,p,g,o)=>{s.push({board:JSON.parse(JSON.stringify(i)),val:h,highlight:p,desc:g,type:o})};if(x(a,null,null,"Ready to Fill","setup"),e===6){const h=[{r:0,c:0,start:1,name:"A (Top-Left)"},{r:3,c:3,start:10,name:"B (Bottom-Right)"},{r:0,c:3,start:19,name:"C (Top-Right)"},{r:3,c:0,start:28,name:"D (Bottom-Left)"}];for(const p of h){const g=[];for(let o=0;o<3;o++)for(let c=0;c<3;c++)g.push({r:p.r+o,c:p.c+c});x(a,null,{targets:g},`Fill Sub-square ${p.name}`,"highlight_quadrant");for(let o=0;o<9;o++){const c=p.r+Math.floor(o/3),u=p.c+o%3;a[c][u]=p.start+o,x(a,a[c][u],{r:c,c:u},`Filling ${p.name}...`,"setup")}}return x(a,null,null,"4 Sub-squares Ready","complete"),s}const d=this.getZigZagPositions(e);for(let i=0;i<d.length;i++){const{r:h,c:p}=d[i];a[h][p]=i+1,x(a,i+1,{r:h,c:p},"ZigZag Filling","setup")}const n=e===4?[1,2]:[1,2,5,6],m=[];for(let i=0;i<e;i++)for(let h of n)m.push({r:i,c:h});x(a,null,{targets:m},"Select Swing Cells","highlight_targets"),x(a,null,{targets:m},"Swing!","swing_rotating");const l=JSON.parse(JSON.stringify(a));for(const{r:i,c:h}of m)l[e-1-i][e-1-h]=a[i][h];return x(l,null,null,"That's it","complete"),s}}class Ce{static generateSteps(e){const a=Array.from({length:e},()=>Array(e).fill(null)),s=[],x=(m,l,i,h,p)=>{a[l][i]=m,s.push({board:JSON.parse(JSON.stringify(a)),val:m,highlight:{r:l,c:i},desc:h,type:p})};let d=0,n=Math.floor(e/2);x(1,d,n,"Start: Top Center (Siamese Method)","place_start");for(let m=2;m<=e*e;m++){let l=(d-1+e)%e,i=(n+1)%e;a[l][i]!==null?(d=(d+1)%e,x(m,d,n,`Collision at (${l},${i}) -> Move Down`,"move_collision")):(d=l,n=i,x(m,d,n,"Move Diagonally Up-Right ↗","move_normal"))}return s.length>0&&(s[s.length-1].type="complete",s[s.length-1].desc="Magic Square Complete!"),s}}class ze{static generateSteps(e){const a=Array.from({length:e},()=>Array(e).fill(null)),s=[],x=(l,i,h,p,g)=>{s.push({board:JSON.parse(JSON.stringify(l)),val:i,highlight:h,desc:p,type:g})};for(let l=0;l<e;l++)for(let i=0;i<e;i++){const h=l*e+i+1;a[l][i]=h,x(a,h,{r:l,c:i},`Sequential Fill: ${h}`,"setup")}x(a,null,null,"Diagonals: Safe (Green) | Others: Targets (Grey)","scan");const d=[],n=[],m=(l,i)=>l%4===i%4||l%4+i%4===3;for(let l=0;l<e;l++)for(let i=0;i<e;i++)m(l,i)||(l===0||l===e-1||i===0||i===e-1?d.push({r:l,c:i}):n.push({r:l,c:i}));if(d.length>0){x(a,null,{targets:d,group:"top_bottom"},"Invert Outer Edges!","pop_prepare");for(let l=0;l<d.length;l++){const{r:i,c:h}=d[l];a[i][h]=e*e+1-a[i][h]}x(a,null,{targets:d,group:"top_bottom"},"Outer Edges Inverted!","mass_invert")}if(n.length>0){x(a,null,{targets:n,group:"left_right"},"Invert Inner Center!","pop_prepare");for(let l=0;l<n.length;l++){const{r:i,c:h}=n[l];a[i][h]=e*e+1-a[i][h]}x(a,null,{targets:n,group:"left_right"},"Inner Center Inverted!","mass_invert")}return s.length>0&&(s[s.length-1].type="complete",s[s.length-1].desc="Magic Square Complete!"),s}}function et(r){const e=r/2,a=e*e,s=Ce.generateSteps(e),x=s[s.length-1].board,d=Array.from({length:r},()=>Array(r).fill(null)),n=[],m=(o,c,u,f,b,I)=>{d[c][u]=o,n.push({board:JSON.parse(JSON.stringify(d)),val:o,highlight:{r:c,c:u},desc:f,type:b})},l=new Map;for(let o=0;o<e;o++)for(let c=0;c<e;c++)l.set(x[o][c],{r:o,c});for(let o=1;o<=a;o++){const c=l.get(o);m(o,c.r,c.c,`Filling Quadrant A (1-${a}): ${o}`,"place_q1")}for(let o=1;o<=a;o++){const c=o+a,u=l.get(o);m(c,u.r+e,u.c+e,`Filling Quadrant D (${a+1}-${2*a}): ${c}`,"place_q4")}for(let o=1;o<=a;o++){const c=o+2*a,u=l.get(o);m(c,u.r,u.c+e,`Filling Quadrant B (${2*a+1}-${3*a}): ${c}`,"place_q2")}for(let o=1;o<=a;o++){const c=o+3*a,u=l.get(o);m(c,u.r+e,u.c,`Filling Quadrant C (${3*a+1}-${4*a}): ${c}`,"place_q3")}const i=Math.floor((r-2)/4),h=(o,c,u,f,b)=>{const I=d[o][c],C=d[u][f];n.push({board:JSON.parse(JSON.stringify(d)),type:"swap_highlight",desc:`Ready to Swap: (${o},${c}) ↔ (${u},${f})`,highlight:{r:o,c,targets:[{r:u,c:f}]}}),d[o][c]=C,d[u][f]=I,n.push({board:JSON.parse(JSON.stringify(d)),desc:b||`Swapped (${o},${c}) ↔ (${u},${f})`,type:"swap",highlight:{r:o,c,targets:[{r:u,c:f}]}})};for(let o=0;o<e;o++)for(let c=0;c<i;c++)h(o,c,o+e,c,"Swapping Left Columns (Left Side)");const p=Math.floor(e/2);h(p,0,p+e,0,"Adjusting Middle Row: Undo First Col Swap"),h(p,i,p+e,i,"Adjusting Middle Row: Swap Center Col");const g=i-1;if(g>0)for(let o=0;o<e;o++)for(let c=0;c<g;c++){const u=e-1-c;h(o,u+e,o+e,u+e,"Swapping Right Columns (Right Side)")}return n.push({board:JSON.parse(JSON.stringify(d)),type:"complete",desc:`Singly Even (${r}x${r}) Complete! Sum Verified.`}),n}function Y(r,e="formula"){return e==="swing"&&(r===4||r===8)?Ke.generateSteps(r):r%2!==0?Ce.generateSteps(r):r%4===0?ze.generateSteps(r):et(r)}const tt=({selectedSize:r,setSelectedSize:e,selectedAlgos:a,toggleAlgo:s,toggleAllAlgos:x,onRunAll:d,onResetAll:n,isRunningAny:m,mainMode:l,setMainMode:i,setShowAlgoTable:h})=>{const[p,g]=j.useState(!1),[o,c]=j.useState(G.enabled),u=()=>{const C=!o;c(C),G.setEnabled(C)},f=[3,4,5,6,7,8,9,10],b=[{id:"formula",label:"Direct Formula",icon:de},{id:"dynamic",label:"Heuristic CSP",icon:ne},{id:"heuristic",label:"Smart Backtrack",icon:ce},{id:"metric",label:"Metric Backtrack",icon:le},{id:"backtrack",label:"Recursive Backtrack",icon:ye},{id:"brute",label:"Pure Brute Force",icon:te}],I=a.size===b.length;return a.size,t.jsx("div",{className:"lg:hidden fixed bottom-6 left-0 right-0 z-[60] px-6 pointer-events-none",children:t.jsxs("div",{className:"max-w-7xl mx-auto flex flex-col gap-2 pointer-events-auto",children:[p&&t.jsxs("div",{className:"bg-slate-800/95 backdrop-blur-2xl border border-white/10 rounded-2xl p-4 shadow-2xl mb-2 animate-in slide-in-from-bottom-5 duration-300",children:[t.jsxs("div",{className:"flex items-center justify-between mb-4 pb-3 border-b border-white/5",children:[t.jsxs("div",{className:"flex bg-slate-900/50 p-1 rounded-lg border border-white/5",children:[t.jsx("button",{onClick:()=>i("practice"),className:v("px-3 py-1 rounded-md text-[10px] font-black uppercase tracking-widest transition-all",l==="practice"?"bg-emerald-400/20 border border-emerald-400/30 text-emerald-300":"text-slate-500"),children:"Practice"}),t.jsx("button",{onClick:()=>i("simulation"),className:v("px-3 py-1 rounded-md text-[10px] font-black uppercase tracking-widest transition-all",l==="simulation"?"bg-emerald-400/20 border border-emerald-400/30 text-emerald-300":"text-slate-500"),children:"Simulation"})]}),t.jsx("button",{onClick:u,className:v("p-2 rounded-lg transition-all border",o?"bg-emerald-400/20 border-emerald-400/30 text-emerald-300":"bg-slate-700/50 border-white/5 text-slate-500"),children:o?t.jsx(Ie,{size:16}):t.jsx(Pe,{size:16})})]}),t.jsxs("div",{className:"mb-4",children:[t.jsx("span",{className:"text-[10px] font-black text-slate-500 uppercase tracking-widest mb-2 block",children:"Grid Size"}),t.jsx("div",{className:"flex gap-1 overflow-x-auto pb-2 no-scrollbar",children:f.map(C=>t.jsx("button",{onClick:()=>e(C),className:v("flex-shrink-0 w-10 h-10 rounded-lg border text-xs font-black transition-all",r===C?"bg-emerald-500 border-emerald-400 text-white":"bg-slate-900/50 border-white/5 text-slate-500"),children:C},C))})]}),l==="simulation"&&t.jsxs("div",{children:[t.jsxs("div",{className:"flex justify-between items-center mb-2",children:[t.jsx("span",{className:"text-[10px] font-black text-slate-500 uppercase tracking-widest",children:"Algorithms"}),t.jsx("button",{onClick:x,className:"text-[9px] font-black text-emerald-400 uppercase tracking-tighter",children:I?"Deselect All":"Select All"})]}),t.jsx("div",{className:"grid grid-cols-2 gap-2",children:b.map(C=>t.jsxs("button",{onClick:()=>s(C.id),className:v("flex items-center gap-2 p-2 rounded-xl border transition-all text-left",a.has(C.id)?"bg-emerald-600/20 border-emerald-500/50 text-white":"bg-slate-900/40 border-white/5 text-slate-500"),children:[t.jsx("div",{className:v("w-4 h-4 rounded flex items-center justify-center border",a.has(C.id)?"bg-emerald-500 border-emerald-400":"border-slate-700 bg-slate-800"),children:a.has(C.id)&&t.jsx(ve,{size:10,className:"text-white"})}),t.jsx("span",{className:"text-[10px] font-bold truncate uppercase",children:C.label})]},C.id))})]})]}),t.jsxs("div",{className:"h-16 bg-slate-800/90 backdrop-blur-xl border border-white/10 rounded-2xl shadow-2xl flex items-center justify-between p-2 relative overflow-hidden",children:[t.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-emerald-500/5 to-transparent pointer-events-none"}),t.jsxs("div",{className:"flex items-center gap-1.5 z-10",children:[t.jsx("button",{onClick:()=>g(!p),className:v("w-12 h-12 flex items-center justify-center rounded-xl transition-all active:scale-95",p?"bg-emerald-500 text-white shadow-lg shadow-emerald-500/20":"bg-slate-700/50 text-slate-400"),children:p?t.jsx(Be,{size:20}):t.jsx(Ee,{size:20})}),t.jsx("button",{onClick:()=>h(!0),className:"w-12 h-12 flex items-center justify-center rounded-xl bg-emerald-500/10 border border-emerald-500/20 text-emerald-400 hover:text-emerald-300 active:scale-95 transition-all",children:t.jsx(de,{size:18})}),t.jsx("button",{onClick:n,className:"w-12 h-12 flex items-center justify-center rounded-xl bg-slate-700/30 text-slate-400 hover:text-white active:scale-95 transition-all",children:t.jsx(se,{size:18})})]}),t.jsx("div",{className:"flex-1 pl-3 z-10",children:m?t.jsxs("button",{onClick:n,className:"w-full h-12 flex items-center justify-center gap-2 bg-slate-700/50 text-slate-300 border border-white/10 rounded-xl font-black text-xs uppercase tracking-widest active:scale-95 transition-all",children:[t.jsx("div",{className:"w-2.5 h-2.5 bg-slate-400 rounded-sm"})," HOLD ALL"]}):t.jsxs("button",{onClick:d,className:"w-full h-12 flex items-center justify-center gap-2 bg-emerald-500 hover:bg-emerald-400 text-white rounded-xl font-black text-xs uppercase tracking-widest shadow-lg shadow-emerald-500/40 active:scale-95 transition-all",children:[t.jsx(oe,{size:16,fill:"currentColor"})," RUN ",l==="simulation"?"LAB":"PRACTICE"]})})]})]})})},rt=({results:r,onClose:e})=>{if(!r||r.length===0)return null;const a=[...r].sort((n,m)=>n.time-m.time),s=Math.max(...r.map(n=>n.time),1),x=n=>n===1?"text-emerald-400":n===2?"text-teal-400":n===3?"text-lime-400":"text-slate-500",d=n=>n===1?"bg-gradient-to-r from-emerald-500 to-emerald-400":n===2?"bg-gradient-to-r from-teal-500 to-teal-400":n===3?"bg-gradient-to-r from-lime-500 to-lime-400":"bg-gradient-to-r from-slate-600 to-slate-500";return t.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center p-4 bg-black/80 backdrop-blur-md animate-in fade-in duration-300",children:t.jsxs("div",{className:"bg-slate-900/90 border border-white/10 rounded-3xl shadow-2xl w-full max-w-2xl max-h-[90vh] overflow-auto animate-in zoom-in-95 duration-300",children:[t.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-white/5",children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx(ie,{className:"text-emerald-400",size:28}),t.jsx("h2",{className:"text-2xl font-black text-white uppercase tracking-widest",children:"Lab Scoreboard"})]}),t.jsx("button",{onClick:e,className:"p-2 rounded-xl hover:bg-white/5 text-slate-400 hover:text-white transition-all active:scale-90",children:t.jsx(ke,{size:24})})]}),t.jsxs("div",{className:"p-6 border-b border-white/5",children:[t.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[t.jsx(je,{size:16,className:"text-emerald-400"}),t.jsx("span",{className:"text-xs font-black text-slate-500 uppercase tracking-widest",children:"Time Comparison (Seconds)"})]}),t.jsx("div",{className:"space-y-3",children:a.map((n,m)=>{const l=a[0]?.time||1,i=Math.round(n.time/l*100);return t.jsxs("div",{className:"flex items-center gap-4",children:[t.jsx("span",{className:v("w-6 text-center font-black text-sm",x(m+1)),children:m+1}),t.jsx("div",{className:"w-32 flex flex-col",children:t.jsx("span",{className:v("text-xs font-black truncate uppercase tracking-tighter",x(m+1)),children:n.name})}),t.jsxs("div",{className:"flex-1 h-8 bg-slate-800/50 rounded-xl overflow-hidden relative border border-white/5",children:[t.jsx("div",{className:v("h-full rounded-xl transition-all duration-1000 ease-out",d(m+1)),style:{width:`${n.time/s*100}%`}}),t.jsxs("span",{className:"absolute inset-0 flex items-center justify-center gap-2 text-[11px] font-black text-white drop-shadow-md uppercase tracking-tight",children:[(n.time/1e3).toFixed(3),"s",t.jsxs("span",{className:v("font-black opacity-80",m===0?"text-white":"text-white/60"),children:["(",i,"%)"]})]})]})]},n.id)})})]}),t.jsxs("div",{className:"p-6",children:[t.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[t.jsx(Ne,{size:16,className:"text-emerald-400"}),t.jsx("span",{className:"text-xs font-black text-slate-500 uppercase tracking-widest",children:"Detailed Statistics"})]}),t.jsx("div",{className:"overflow-x-auto",children:t.jsxs("table",{className:"w-full text-left",children:[t.jsx("thead",{children:t.jsxs("tr",{className:"text-[10px] font-black text-slate-500 uppercase tracking-widest border-b border-white/5",children:[t.jsx("th",{className:"pb-3 px-2",children:"Rank / Engine"}),t.jsx("th",{className:"pb-3 text-center",children:"Steps"}),t.jsx("th",{className:"pb-3 text-center",children:"Time"}),t.jsx("th",{className:"pb-3 text-center",children:"% (Speed)"}),t.jsx("th",{className:"pb-3 text-center",children:"Complexity"})]})}),t.jsx("tbody",{className:"divide-y divide-white/5",children:a.map((n,m)=>{const l=a[0]?.time||1,i=Math.round(n.time/l*100);return t.jsxs("tr",{className:"group hover:bg-white/5 transition-colors",children:[t.jsx("td",{className:"py-4 px-2",children:t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsxs("span",{className:v("font-black text-sm w-4",x(m+1)),children:[m+1,"."]}),t.jsxs("div",{className:"flex flex-col",children:[t.jsx("span",{className:v("text-xs font-black uppercase tracking-tight",x(m+1)),children:n.name}),t.jsx("span",{className:"text-[9px] text-slate-500 font-bold uppercase",children:n.desc?.split(" ")[0]})]})]})}),t.jsx("td",{className:"py-4 text-center font-mono text-xs text-white/80",children:n.attempts.toLocaleString()}),t.jsxs("td",{className:"py-4 text-center font-mono text-xs text-emerald-400",children:[(n.time/1e3).toFixed(3),"s"]}),t.jsxs("td",{className:v("py-4 text-center text-[10px] font-black tracking-widest",m===0?"text-emerald-400":"text-slate-500"),children:[i,"%"]}),t.jsx("td",{className:"py-4 text-center font-mono text-[10px] text-slate-500",children:n.complexity||"O(Exp)"})]},n.id)})})]})})]}),t.jsx("div",{className:"p-6 border-t border-white/5 flex justify-center bg-slate-900/50 rounded-b-3xl",children:t.jsx("button",{onClick:e,className:"w-full max-w-xs py-3 bg-emerald-500 hover:bg-emerald-400 text-white rounded-xl font-black text-sm uppercase tracking-widest shadow-lg shadow-emerald-500/20 active:scale-95 transition-all",children:"Close Results"})})]})})},at=({onClose:r})=>{const e=[{id:"dynamic",name:"Heuristic CSP",icon:t.jsx(ne,{size:16}),strategy:"Constraint Satisfaction",complexity:"O(Exp)",suitability:"Universal Solver",desc:"Avoids conflicts by predicting constraint violations."},{id:"heuristic",name:"Smart Backtrack",icon:t.jsx(ce,{size:16}),strategy:"Cell Priority DFS",complexity:"O(Exp)",suitability:"Densely Constrained",desc:'Uses "forced-cell" logic to populate squares first.'},{id:"metric",name:"Metric Backtrack",icon:t.jsx(le,{size:16}),strategy:"Distance-Weighted DFS",complexity:"O(Exp)",suitability:"Optimized Search",desc:"Prunes via global sum distance evaluation."},{id:"backtrack",name:"Recursive Backtrack",icon:t.jsx(ye,{size:16}),strategy:"Depth-First Search",complexity:"O(N!)",suitability:"3x3 Visualisation",desc:"Standard exhaustive search. State-space heavy."},{id:"brute",name:"Pure Brute Force",icon:t.jsx(Le,{size:16}),strategy:"Naive Iteration",complexity:"O(N^N)",suitability:"Small Data Only",desc:"Naive permutation without pruning."},{id:"formula",name:"Direct Formula",icon:t.jsx(te,{size:16}),strategy:"Mathematical Construction",complexity:"O(N²)",suitability:"Instant Execution",desc:"Fixed patterns like Siamese or Strachey methods."}];return t.jsxs("div",{className:"fixed inset-0 z-[100] flex items-center justify-center p-4",children:[t.jsx(ee.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:r,className:"absolute inset-0 bg-slate-950/80 backdrop-blur-sm"}),t.jsxs(ee.div,{initial:{opacity:0,scale:.9,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.9,y:20},className:"relative w-full max-w-4xl bg-slate-900 border border-emerald-500/30 rounded-3xl shadow-[0_0_50px_rgba(16,185,129,0.1)] overflow-hidden flex flex-col max-h-[90vh]",children:[t.jsxs("div",{className:"bg-emerald-500/10 px-6 py-5 border-b border-emerald-500/20 flex items-center justify-between",children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("div",{className:"p-2 bg-emerald-500/20 rounded-lg text-emerald-400",children:t.jsx(Se,{size:20})}),t.jsx("h4",{className:"text-sm font-black text-emerald-300 uppercase tracking-widest",children:"Global Algorithm Performance Matrix"})]}),t.jsx("button",{onClick:r,className:"p-2 hover:bg-white/10 rounded-full transition-colors text-slate-400 hover:text-white",children:t.jsx(ke,{size:20})})]}),t.jsx("div",{className:"overflow-auto flex-1 p-6",children:t.jsx("div",{className:"overflow-x-auto",children:t.jsxs("table",{className:"w-full text-left text-[13px]",children:[t.jsx("thead",{children:t.jsxs("tr",{className:"text-[11px] font-black text-slate-400 uppercase tracking-widest border-b border-white/10 bg-white/5",children:[t.jsx("th",{className:"py-5 px-6",children:"Algorithm Engine"}),t.jsx("th",{className:"py-5 px-6",children:"Strategy"}),t.jsx("th",{className:"py-5 px-6",children:"Suitability"})]})}),t.jsx("tbody",{className:"divide-y divide-white/10",children:e.map(a=>t.jsxs("tr",{className:"group hover:bg-emerald-500/10 transition-colors",children:[t.jsx("td",{className:"py-5 px-6",children:t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("div",{className:"p-2.5 bg-slate-800 rounded-xl text-emerald-400 border border-white/5 group-hover:border-emerald-500/30 transition-all shrink-0",children:a.icon}),t.jsxs("div",{className:"flex flex-col",children:[t.jsx("span",{className:"font-black text-white uppercase tracking-tight text-sm leading-none",children:a.name}),t.jsx("span",{className:"text-[10px] text-slate-500 font-bold uppercase mt-1.5 leading-tight",children:a.desc})]})]})}),t.jsx("td",{className:"py-5 px-6 font-semibold text-slate-300 leading-tight",children:a.strategy}),t.jsx("td",{className:"py-5 px-6 whitespace-nowrap",children:t.jsx("span",{className:"px-3 py-1.5 rounded-lg bg-emerald-500/20 text-emerald-300 font-black text-[10px] uppercase tracking-wider border border-emerald-500/30",children:a.suitability})})]},a.id))})]})})})]})]})},st=({selectedSize:r,setSelectedSize:e,selectedAlgos:a,toggleAlgo:s,toggleAllAlgos:x,mainMode:d,setMainMode:n,onRunAll:m,onResetAll:l,isRunningAny:i,showAlgoTable:h,setShowAlgoTable:p,simulationAlgos:g,ALL_SIZES:o})=>{const c=a.size===g.length,u=a.size===0;return t.jsxs("div",{className:"glass-panel rounded-2xl p-4 flex flex-col gap-4 shadow-2xl relative overflow-hidden group h-full",children:[t.jsx("div",{className:"absolute inset-0 bg-blueprint opacity-[0.03] pointer-events-none"}),t.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-blue-500/5 to-transparent pointer-events-none"}),t.jsxs("div",{className:"flex items-center gap-2.5 mb-1 relative z-10",children:[t.jsx("div",{className:"p-1.5 bg-amber-500/20 rounded-lg text-amber-400",children:t.jsx(te,{size:14,className:"fill-amber-400/20"})}),t.jsx("h3",{className:"text-[10px] font-black text-slate-300 uppercase tracking-[0.2em]",children:"Lab Control"})]}),t.jsx("div",{className:"grid grid-cols-2 gap-1.5 p-1 bg-slate-900/60 rounded-xl border border-white/5 relative z-10",children:[{id:"simulation",label:"SIMULATION",icon:te},{id:"practice",label:"PRACTICE",icon:we}].map(f=>t.jsxs("button",{onClick:()=>n(f.id),className:v("flex items-center justify-center gap-2 py-2.5 rounded-lg text-[9px] font-black tracking-[0.2em] transition-all",d===f.id?"bg-emerald-500/20 border border-emerald-500/30 text-emerald-300 shadow-xl shadow-emerald-500/10":"bg-transparent text-slate-500 hover:text-slate-400 hover:bg-white/5"),children:[t.jsx(f.icon,{size:12})," ",f.label]},f.id))}),t.jsxs("div",{className:"flex gap-2",children:[t.jsxs("button",{onClick:l,className:"flex-1 flex items-center justify-center gap-2 py-2.5 bg-slate-700/50 hover:bg-slate-700 text-slate-300 rounded-xl font-bold text-[10px] border border-slate-600/50 transition-all active:scale-95",children:[t.jsx(se,{size:12})," RESET"]}),i?t.jsxs("button",{onClick:l,className:"flex-[1.5] flex items-center justify-center gap-2 py-2.5 bg-slate-700/50 hover:bg-slate-700/80 text-slate-300 rounded-xl font-bold text-[10px] border border-white/10 transition-all active:scale-95",children:[t.jsx($e,{size:12,fill:"currentColor"})," HOLD"]}):t.jsxs("button",{onClick:m,disabled:d==="practice",className:v("flex-[1.5] flex items-center justify-center gap-2 py-2.5 rounded-xl font-bold text-[10px] shadow-xl transition-all active:scale-95",d==="practice"?"bg-slate-800 text-slate-600 cursor-not-allowed":"bg-emerald-400/90 hover:bg-emerald-400 text-white shadow-emerald-400/20 font-black tracking-widest"),children:[t.jsx(oe,{size:12,fill:"currentColor"})," RUN SELECTED"]})]}),d==="simulation"&&t.jsxs("div",{className:"flex flex-col gap-2",children:[t.jsxs("button",{onClick:x,className:v("flex items-center justify-center gap-2 px-3 py-2 rounded-lg bg-slate-900/40 border transition-all hover:bg-emerald-500/10",u?"border-slate-700 text-slate-500":"border-emerald-500/20 text-emerald-300"),children:[t.jsxs("div",{className:v("w-4 h-4 rounded flex items-center justify-center transition-all shrink-0",c?"bg-emerald-400":u?"border border-slate-700 bg-slate-800/50":"border border-emerald-400/30 bg-emerald-400/10"),children:[c&&t.jsx("div",{className:"w-1.5 h-1.5 bg-white rounded-full"}),!c&&!u&&t.jsx("div",{className:"w-1.5 h-1.5 bg-emerald-400/80 rounded-sm"})]}),t.jsxs("span",{className:"text-[11px] font-black uppercase tracking-widest",children:[c?"Unselect":u?"Select All":"Reset Selection"," (",a.size,"/",g.length,")"]})]}),t.jsx("div",{className:"grid grid-cols-2 gap-1.5",children:g.map(f=>t.jsxs("label",{className:v("flex items-center gap-2 px-2 py-1.5 rounded-lg border transition-all cursor-pointer group",a.has(f.id)?"bg-emerald-600/10 border-emerald-500/30 text-white":"bg-slate-900/20 border-white/5 text-slate-500 hover:text-slate-400 hover:border-white/10"),children:[t.jsx("input",{type:"checkbox",className:"hidden",checked:a.has(f.id),onChange:()=>s(f.id)}),t.jsx("div",{className:v("w-3 h-3 rounded flex items-center justify-center transition-all",a.has(f.id)?"bg-emerald-400 shadow-[0_0_4px_rgba(52,211,153,0.3)]":"border border-slate-700 bg-slate-800/50 group-hover:border-slate-600"),children:a.has(f.id)&&t.jsx("div",{className:"w-1 h-1 bg-white rounded-full"})}),t.jsx(f.icon,{size:11,className:a.has(f.id)?"text-emerald-400":"text-slate-600"}),t.jsx("span",{className:"text-[10px] font-black uppercase tracking-tighter whitespace-nowrap",children:f.label})]},f.id))})]}),t.jsxs("div",{className:"mt-auto pt-3 border-t border-slate-700/50",children:[t.jsxs("div",{className:"flex justify-between items-center mb-2 px-1",children:[t.jsx("span",{className:"text-[9px] font-bold text-slate-500 uppercase tracking-widest",children:"Select Order (N x N)"}),t.jsxs("button",{onClick:()=>p(!h),className:v("flex items-center gap-1.5 px-2 py-1 rounded-md text-[9px] font-black uppercase tracking-tighter transition-all border",h?"bg-slate-700 border-white/20 text-slate-300":"bg-emerald-500/30 border-emerald-400/50 text-emerald-300 hover:bg-emerald-500/50"),children:[t.jsx(Se,{size:10}),h?"Hide Matrix":"Engine Matrix"]})]}),t.jsx("div",{className:"grid grid-cols-4 gap-1.5",children:o.map(f=>t.jsxs("button",{onClick:()=>e(f),className:v("py-2 rounded-lg font-bold text-xs transition-all border",r===f?"bg-emerald-400/30 border-emerald-400/40 text-emerald-200 shadow-md shadow-emerald-500/10":"bg-slate-900/30 border-transparent text-slate-500 hover:text-slate-400"),children:[f,"x",f]},f))})]})]})},lt=({algoId:r,size:e,triggerRun:a,triggerReset:s,speed:x,steps:d,onComplete:n})=>{const[m,l]=j.useState({attempts:0,time:0}),[i,h]=j.useState(!1),[p,g]=j.useState(!1),c={dynamic:{name:"Heuristic CSP",desc:"Constraint satisfaction algorithm",color:"text-emerald-400",bg:"bg-emerald-400"},heuristic:{name:"Smart Backtrack",desc:"Forced-assignment backtracking",color:"text-teal-400",bg:"bg-teal-400"},metric:{name:"Metric Backtrack",desc:"Distance-based pruning",color:"text-lime-400",bg:"bg-lime-400"},backtrack:{name:"Recursive Backtrack",desc:"Classic recursive search",color:"text-rose-400",bg:"bg-rose-500"},brute:{name:"Pure Brute Force",desc:"Exhaustive permutation search",color:"text-slate-400",bg:"bg-slate-500"},formula:{name:"Direct Formula",desc:"Static magic square construction",color:"text-yellow-400",bg:"bg-yellow-500"},swing:{name:"Formula Swing",desc:"Dynamic Matrix Rotation",color:"text-sky-400",bg:"bg-sky-500"}}[r]||{name:r,desc:"",color:"text-white",bg:"bg-white"};return t.jsxs("div",{className:v("p-5 rounded-2xl border transition-all duration-500",p?"bg-slate-700/30 border-indigo-500/30 scale-105":"bg-slate-900/40 border-white/5"),children:[t.jsxs("div",{className:"flex justify-between items-start mb-6",children:[t.jsxs("div",{className:"flex items-start gap-3",children:[t.jsx("div",{className:v("w-1 h-8 rounded-full",c.bg)}),t.jsxs("div",{children:[t.jsx("h5",{className:v("text-[10px] font-black uppercase tracking-[0.25em] mb-1.5",c.color),children:c.name}),t.jsx("p",{className:"text-[10px] text-slate-500 font-bold leading-tight",children:c.desc})]})]}),i&&t.jsx(ve,{size:14,className:"text-emerald-500 bg-emerald-500/10 rounded-full p-0.5"})]}),t.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[t.jsxs("div",{className:"flex flex-col",children:[t.jsx("span",{className:"text-[10px] text-slate-500 uppercase font-black tracking-tighter mb-1",children:"Total Steps"}),t.jsxs("span",{className:"text-xl font-mono text-white flex items-baseline gap-1",children:[i?m.attempts.toLocaleString():"0",t.jsx("span",{className:"text-[10px] text-slate-500 font-bold tracking-normal",children:"steps"})]})]}),t.jsxs("div",{className:"flex flex-col",children:[t.jsx("span",{className:"text-[10px] text-slate-500 uppercase font-black tracking-tighter mb-1",children:"Elapsed Time"}),t.jsxs("span",{className:"text-xl font-mono text-white flex items-baseline gap-1",children:[i?(m.time/1e3).toFixed(3):"0.000",t.jsx("span",{className:"text-[10px] text-slate-500 font-bold tracking-normal",children:"sec"})]})]})]}),t.jsx("div",{className:"mt-4 h-1 bg-slate-800 rounded-full overflow-hidden",children:t.jsx("div",{style:{width:i?"100%":"0%"},className:v("h-full transition-all duration-1000 ease-out",c.bg)})})]})},nt=[3,4,5,6,7,8,9,10],ge=[{id:"formula",label:"Formula",icon:Fe},{id:"swing",label:"Swing",icon:se},{id:"dynamic",label:"CSP Solver",icon:ne},{id:"heuristic",label:"Smart BT",icon:ce},{id:"metric",label:"Metric BT",icon:te},{id:"backtrack",label:"Recursive",icon:se},{id:"brute",label:"Brute Force",icon:le}];function ut({speed:r}){const[e,a]=j.useState(8),[s,x]=j.useState(new Set(["swing"])),[d,n]=j.useState("simulation"),[m,l]=j.useState(0),[i,h]=j.useState(0),[p,g]=j.useState(new Set),[o,c]=j.useState(!1),[u,f]=j.useState([]),b=ue.useRef({}),I=ue.useRef(new Set),[C,$]=j.useState(!1),_=w=>{x(M=>{const N=new Set(M);return N.has(w)?N.delete(w):N.add(w),N})},L=()=>{const w=ge.map(M=>M.id);s.size===w.length?x(new Set):x(new Set(w))},F=j.useMemo(()=>({dynamic:Y(e,"dynamic"),heuristic:Y(e,"heuristic"),metric:Y(e,"metric"),backtrack:Y(e,"backtrack"),brute:Y(e,"brute"),formula:Y(e,"formula"),swing:Y(e,"swing")}),[e]),T=()=>{b.current={},I.current=new Set(s),g(new Set(s)),c(!1),l(w=>w+1)},S=()=>{I.current=new Set,g(new Set),c(!1),h(w=>w+1)},D=(w,M)=>{if(d!=="simulation")return;const N={dynamic:{name:"Heuristic CSP"},heuristic:{name:"Smart Backtrack"},metric:{name:"Metric Backtrack"},backtrack:{name:"Recursive Backtrack"},brute:{name:"Pure Brute Force"},formula:{name:"Direct Formula"},swing:{name:"Formula Swing"}};I.current.has(w)&&(b.current[w]={id:w,name:N[w]?.name||w,attempts:M.attempts,time:M.time,complexity:N[w]?.complexity},I.current.delete(w),g(k=>{const y=new Set(k);return y.delete(w),y}),I.current.size===0&&Object.keys(b.current).length>0&&f(Object.values(b.current)))},J=["formula","dynamic","heuristic","metric","backtrack","brute","swing"],q=[...s].sort((w,M)=>J.indexOf(w)-J.indexOf(M)),B=[];d==="simulation"?q.forEach(w=>{B.push({type:"board",algoId:w})}):B.push({type:"board",algoId:"formula"});const H=Math.min(2,B.length);return B.splice(H,0,{type:"control"}),t.jsxs("div",{className:"max-w-7xl mx-auto px-6 pt-0 pb-28 lg:pb-8",children:[t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:B.map((w,M)=>w.type==="control"?t.jsx("div",{className:"hidden lg:block",children:t.jsx(st,{selectedSize:e,setSelectedSize:a,selectedAlgos:s,toggleAlgo:_,toggleAllAlgos:L,mainMode:d,setMainMode:n,onRunAll:T,onResetAll:S,isRunningAny:p.size>0,showAlgoTable:C,setShowAlgoTable:$,simulationAlgos:ge,ALL_SIZES:nt})},"control-wrapper"):t.jsx(We,{size:e,mainMode:d,algoMode:w.algoId,steps:F[w.algoId]||[],speed:r,triggerRun:m,triggerReset:i,onComplete:N=>D(w.algoId,N)},`${e}-${w.algoId}-${i}-${M}`))}),d==="simulation"&&q.length>0&&t.jsxs("div",{className:"hidden md:block mt-8 overflow-hidden bg-slate-800/40 backdrop-blur-xl border border-white/5 rounded-3xl shadow-2xl",children:[t.jsxs("div",{className:"bg-slate-900/50 px-4 py-3 border-b border-white/5 flex items-center justify-between",children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("div",{className:"p-2 bg-emerald-500/20 rounded-lg text-emerald-400",children:t.jsx(le,{size:20})}),t.jsx("h4",{className:"text-sm font-black text-white uppercase tracking-widest",children:"Real-time Performance Analysis"})]}),t.jsxs("div",{className:"flex items-center gap-2 text-[10px] font-bold text-slate-500 uppercase tracking-tighter",children:[t.jsx("span",{className:"w-2 h-2 rounded-full bg-emerald-500 animate-pulse"}),"LIVE RANKING"]})]}),t.jsx("div",{className:"p-4",children:t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:q.map(w=>t.jsx(lt,{algoId:w,size:e,triggerRun:m,triggerReset:i,speed:r,steps:F[w]||[],onComplete:M=>D(w,M)},`score-${w}`))})})]}),d!=="simulation"&&t.jsx("div",{className:"mt-12 flex flex-col gap-6",children:t.jsxs("div",{className:"bg-emerald-950/20 border border-emerald-500/20 rounded-3xl p-8 flex flex-col md:flex-row items-center gap-8 shadow-2xl relative overflow-hidden group",children:[t.jsx("div",{className:"p-5 bg-emerald-500/20 rounded-2xl text-emerald-300 shadow-xl shadow-emerald-500/10",children:t.jsx(we,{size:40})}),t.jsxs("div",{className:"text-center md:text-left flex-1",children:[t.jsx("h4",{className:"text-emerald-300 font-black text-xl mb-2 uppercase tracking-widest",children:"Algorithm Comparison Lab"}),t.jsxs("p",{className:"text-emerald-100/60 text-sm leading-relaxed max-w-2xl font-semibold",children:["In LAB mode, observe how various logic engines operate within the same ",t.jsxs("span",{className:"text-emerald-400",children:[e,"x",e]})," environment.",t.jsx("br",{className:"hidden md:block"}),"Compare the efficiency of each algorithm in real-time, from the intuitive Direct Formula to complex Backtracking."]})]})]})}),t.jsx(be,{children:C&&t.jsx(at,{onClose:()=>$(!1)})}),t.jsx(tt,{selectedSize:e,setSelectedSize:a,selectedAlgos:s,toggleAlgo:_,toggleAllAlgos:L,onRunAll:T,onResetAll:S,isRunningAny:p.size>0,mainMode:d,setMainMode:n,showAlgoTable:C,setShowAlgoTable:$}),o&&t.jsx(rt,{results:u,onClose:()=>c(!1)})]})}export{ut as default};
